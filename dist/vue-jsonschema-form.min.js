var VueJSONSchemaForm=function(e,t,r,a){"use strict";r=r&&r.hasOwnProperty("default")?r.default:r,a=a&&a.hasOwnProperty("default")?a.default:a;var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},s={props:{definition:{type:Object,required:!0},path:{type:Array,required:!0},schema:{type:Object,required:!0}},computed:o({},t.mapState({model:function(e){return e.model}}),{value:{get:function(){return a.get(this.model,this.path)},set:function(e){""===e?this.removeValue(this.path):this.setValue({path:this.path,value:e})}},name:function(){return this.path.join(".")},type:function(){return this.definition.type},required:function(){return this.definition.required}}),methods:o({},t.mapMutations(["setValue","removeValue"]))},l={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.value,expression:"value",modifiers:{lazy:!0}}],staticClass:"form-control spark-input",attrs:{type:"text",placeholder:e.definition.placeholder,disabled:e.definition.disabled,maxlength:e.schema.maxlength,minLength:e.schema.minLength,name:e.name,pattern:e.schema.pattern,readonly:e.definition.readonly,required:e.definition.required},domProps:{value:e.value},on:{change:function(t){e.value=t.target.value}}})},staticRenderFns:[],mixins:[s]},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"checkbox"},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.value,expression:"value",modifiers:{lazy:!0}}],staticClass:"vue-form-input",attrs:{type:"checkbox",disabled:e.definition.disabled,name:e.name,readonly:e.definition.readonly,required:e.definition.required},domProps:{checked:Array.isArray(e.value)?e._i(e.value,null)>-1:e.value},on:{change:function(t){var r=e.value,a=t.target,n=!!a.checked;if(Array.isArray(r)){var i=e._i(r,null);a.checked?i<0&&(e.value=r.concat([null])):i>-1&&(e.value=r.slice(0,i).concat(r.slice(i+1)))}else e.value=n}}}),e._v(" "+e._s(e.schema.title)+" ")])])},staticRenderFns:[],mixins:[s]},u={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",e._l(e.definition.options,function(t){return r("label",{key:t.value,staticClass:"checkbox-inline"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"vue-form-input",attrs:{type:"checkbox",disabled:e.definition.disabled,name:e.path,readonly:e.definition.readonly,lazy:!1!==e.definition.lazy},domProps:{value:t.value,checked:Array.isArray(e.value)?e._i(e.value,t.value)>-1:e.value},on:{change:function(r){var a=e.value,n=r.target,i=!!n.checked;if(Array.isArray(a)){var o=t.value,s=e._i(a,o);n.checked?s<0&&(e.value=a.concat([o])):s>-1&&(e.value=a.slice(0,s).concat(a.slice(s+1)))}else e.value=i}}}),e._v(" "+e._s(t.text)+" ")])}),0)},staticRenderFns:[],mixins:[s]};"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function d(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function h(e,t){return e(t={exports:{}},t.exports),t.exports}var p=h(function(e,t){window,e.exports=function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t,r){var a;!function(n){var i={},o=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,s=/\d\d?/,l=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,c=/\[([^]*?)\]/gm,u=function(){};function d(e,t){for(var r=[],a=0,n=e.length;a<n;a++)r.push(e[a].substr(0,t));return r}function h(e){return function(t,r,a){var n=a[e].indexOf(r.charAt(0).toUpperCase()+r.substr(1).toLowerCase());~n&&(t.month=n)}}function p(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}var f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],m=["January","February","March","April","May","June","July","August","September","October","November","December"],v=d(m,3),g=d(f,3);i.i18n={dayNamesShort:g,dayNames:f,monthNamesShort:v,monthNames:m,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10)*e%10]}};var y={D:function(e){return e.getDate()},DD:function(e){return p(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return e.getDay()},dd:function(e){return p(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return p(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return String(e.getFullYear()).substr(2)},YYYY:function(e){return p(e.getFullYear(),4)},h:function(e){return e.getHours()%12||12},hh:function(e){return p(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return p(e.getHours())},m:function(e){return e.getMinutes()},mm:function(e){return p(e.getMinutes())},s:function(e){return e.getSeconds()},ss:function(e){return p(e.getSeconds())},S:function(e){return Math.round(e.getMilliseconds()/100)},SS:function(e){return p(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return p(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+p(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)}},b={D:[s,function(e,t){e.day=t}],Do:[new RegExp(s.source+l.source),function(e,t){e.day=parseInt(t,10)}],M:[s,function(e,t){e.month=t-1}],YY:[s,function(e,t){var r=+(""+(new Date).getFullYear()).substr(0,2);e.year=""+(t>68?r-1:r)+t}],h:[s,function(e,t){e.hour=t}],m:[s,function(e,t){e.minute=t}],s:[s,function(e,t){e.second=t}],YYYY:[/\d{4}/,function(e,t){e.year=t}],S:[/\d/,function(e,t){e.millisecond=100*t}],SS:[/\d{2}/,function(e,t){e.millisecond=10*t}],SSS:[/\d{3}/,function(e,t){e.millisecond=t}],d:[s,u],ddd:[l,u],MMM:[l,h("monthNamesShort")],MMMM:[l,h("monthNames")],a:[l,function(e,t,r){var a=t.toLowerCase();a===r.amPm[0]?e.isPm=!1:a===r.amPm[1]&&(e.isPm=!0)}],ZZ:[/([\+\-]\d\d:?\d\d|Z)/,function(e,t){"Z"===t&&(t="+00:00");var r,a=(t+"").match(/([\+\-]|\d\d)/gi);a&&(r=60*a[1]+parseInt(a[2],10),e.timezoneOffset="+"===a[0]?r:-r)}]};b.dd=b.d,b.dddd=b.ddd,b.DD=b.D,b.mm=b.m,b.hh=b.H=b.HH=b.h,b.MM=b.M,b.ss=b.s,b.A=b.a,i.masks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},i.format=function(e,t,r){var a=r||i.i18n;if("number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date in fecha.format");var n=[];return(t=(t=(t=i.masks[t]||t||i.masks.default).replace(c,function(e,t){return n.push(t),"??"})).replace(o,function(t){return t in y?y[t](e,a):t.slice(1,t.length-1)})).replace(/\?\?/g,function(){return n.shift()})},i.parse=function(e,t,r){var a=r||i.i18n;if("string"!=typeof t)throw new Error("Invalid format in fecha.parse");if(t=i.masks[t]||t,e.length>1e3)return!1;var n=!0,s={};if(t.replace(o,function(t){if(b[t]){var r=b[t],i=e.search(r[0]);~i?e.replace(r[0],function(t){return r[1](s,t,a),e=e.substr(i+t.length),t}):n=!1}return b[t]?"":t.slice(1,t.length-1)}),!n)return!1;var l,c=new Date;return!0===s.isPm&&null!=s.hour&&12!=+s.hour?s.hour=+s.hour+12:!1===s.isPm&&12==+s.hour&&(s.hour=0),null!=s.timezoneOffset?(s.minute=+(s.minute||0)-+s.timezoneOffset,l=new Date(Date.UTC(s.year||c.getFullYear(),s.month||0,s.day||1,s.hour||0,s.minute||0,s.second||0,s.millisecond||0))):l=new Date(s.year||c.getFullYear(),s.month||0,s.day||1,s.hour||0,s.minute||0,s.second||0,s.millisecond||0),l},void 0!==e&&e.exports?e.exports=i:void 0===(a=function(){return i}.call(t,r,t,e))||(e.exports=a)}()},function(e,t){var r=/^(attrs|props|on|nativeOn|class|style|hook)$/;function a(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}}e.exports=function(e){return e.reduce(function(e,t){var n,i,o,s,l;for(o in t)if(n=e[o],i=t[o],n&&r.test(o))if("class"===o&&("string"==typeof n&&(l=n,e[o]=n={},n[l]=!0),"string"==typeof i&&(l=i,t[o]=i={},i[l]=!0)),"on"===o||"nativeOn"===o||"hook"===o)for(s in i)n[s]=a(n[s],i[s]);else if(Array.isArray(n))e[o]=n.concat(i);else if(Array.isArray(i))e[o]=[n].concat(i);else for(s in i)n[s]=i[s];else e[o]=t[o];return e},{})}},function(e,t,r){function a(e,t){for(var r=[],a={},n=0;n<t.length;n++){var i=t[n],o=i[0],s={id:e+":"+n,css:i[1],media:i[2],sourceMap:i[3]};a[o]?a[o].parts.push(s):r.push(a[o]={id:o,parts:[s]})}return r}r.r(t),r.d(t,"default",function(){return f});var n="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},o=n&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,c=!1,u=function(){},d=null,h="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,t,r,n){c=r,d=n||{};var o=a(e,t);return m(o),function(t){for(var r=[],n=0;n<o.length;n++){var s=o[n];(l=i[s.id]).refs--,r.push(l)}for(t?m(o=a(e,t)):o=[],n=0;n<r.length;n++){var l;if(0===(l=r[n]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete i[l.id]}}}}function m(e){for(var t=0;t<e.length;t++){var r=e[t],a=i[r.id];if(a){a.refs++;for(var n=0;n<a.parts.length;n++)a.parts[n](r.parts[n]);for(;n<r.parts.length;n++)a.parts.push(g(r.parts[n]));a.parts.length>r.parts.length&&(a.parts.length=r.parts.length)}else{var o=[];for(n=0;n<r.parts.length;n++)o.push(g(r.parts[n]));i[r.id]={id:r.id,refs:1,parts:o}}}}function v(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function g(e){var t,r,a=document.querySelector("style["+h+'~="'+e.id+'"]');if(a){if(c)return u;a.parentNode.removeChild(a)}if(p){var n=l++;a=s||(s=v()),t=w.bind(null,a,n,!1),r=w.bind(null,a,n,!0)}else a=v(),t=function(e,t){var r=t.css,a=t.media,n=t.sourceMap;if(a&&e.setAttribute("media",a),d.ssrId&&e.setAttribute(h,t.id),n&&(r+="\n/*# sourceURL="+n.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,a),r=function(){a.parentNode.removeChild(a)};return t(e),function(a){if(a){if(a.css===e.css&&a.media===e.media&&a.sourceMap===e.sourceMap)return;t(e=a)}else r()}}var y,b=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function w(e,t,r,a){var n=r?"":a.css;if(e.styleSheet)e.styleSheet.cssText=b(t,n);else{var i=document.createTextNode(n),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}},function(e,t,r){r.r(t);var a=r(0),n=r.n(a),i={bind:function(e,t,r){e["@clickoutside"]=function(a){e.contains(a.target)||r.context.popupElm&&r.context.popupElm.contains(a.target)||!t.expression||!r.context[t.expression]||t.value()},document.addEventListener("click",e["@clickoutside"],!1)},unbind:function(e){document.removeEventListener("click",e["@clickoutside"],!1)}};function o(e){return"[object Object]"===Object.prototype.toString.call(e)}function s(e){return e instanceof Date}function l(e){return null!==e&&void 0!==e&&!isNaN(new Date(e).getTime())}function c(e){return Array.isArray(e)&&2===e.length&&l(e[0])&&l(e[1])&&new Date(e[1]).getTime()>=new Date(e[0]).getTime()}function u(e){var t=(e||"").split(":");return t.length>=2?{hours:parseInt(t[0],10),minutes:parseInt(t[1],10)}:null}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"24",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"a",a=e.hours,n=(a=(a="24"===t?a:a%12||12)<10?"0"+a:a)+":"+(e.minutes<10?"0"+e.minutes:e.minutes);if("12"===t){var i=e.hours>=12?"pm":"am";"A"===r&&(i=i.toUpperCase()),n=n+" "+i}return n}function h(e,t){try{return n.a.format(new Date(e),t)}catch(e){return""}}function p(e,t){try{return n.a.parse(e,t)}catch(e){return null}}var f={date:{value2date:function(e){return l(e)?new Date(e):null},date2value:function(e){return e}},timestamp:{value2date:function(e){return l(e)?new Date(e):null},date2value:function(e){return l(e)?new Date(e).getTime():null}},format:{value2date:p,date2value:function(e,t){return l(e)?h(e,t):null}}},m={date:{value2date:function(e){return c(e)?[new Date(e[0]),new Date(e[1])]:[null,null]},date2value:function(e){return e}},timestamp:{value2date:function(e){return c(e)?[new Date(e[0]),new Date(e[1])]:[null,null]},date2value:function(e){return e.map(f.timestamp.date2value)}},format:{value2date:function(e,t){if(Array.isArray(e)&&2===e.length){var r=p(e[0],t),a=p(e[1],t);if(r&&a&&a>=r)return[r,a]}return[null,null]},date2value:function(e,t){return e.map(function(e){return f.format.date2value(e,t)})}}},v={zh:{days:["日","一","二","三","四","五","六"],months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],pickers:["未来7天","未来30天","最近7天","最近30天"],placeholder:{date:"请选择日期",dateRange:"请选择日期范围"}},en:{days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],pickers:["next 7 days","next 30 days","previous 7 days","previous 30 days"],placeholder:{date:"Select Date",dateRange:"Select Date Range"}},ro:{days:["Lun","Mar","Mie","Joi","Vin","Sâm","Dum"],months:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Noi","Dec"],pickers:["urmatoarele 7 zile","urmatoarele 30 zile","ultimele 7 zile","ultimele 30 zile"],placeholder:{date:"Selectați Data",dateRange:"Selectați Intervalul De Date"}},fr:{days:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],months:["Jan","Fev","Mar","Avr","Mai","Juin","Juil","Aout","Sep","Oct","Nov","Dec"],pickers:["7 jours suivants","30 jours suivants","7 jours précédents","30 jours précédents"],placeholder:{date:"Sélectionnez une date",dateRange:"Sélectionnez une période"}},es:{days:["Dom","Lun","mar","Mie","Jue","Vie","Sab"],months:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],pickers:["próximos 7 días","próximos 30 días","7 días anteriores","30 días anteriores"],placeholder:{date:"Seleccionar fecha",dateRange:"Seleccionar un rango de fechas"}},"pt-br":{days:["Dom","Seg","Ter","Qua","Quin","Sex","Sáb"],months:["Jan","Fev","Mar","Abr","Maio","Jun","Jul","Ago","Set","Out","Nov","Dez"],pickers:["próximos 7 dias","próximos 30 dias","7 dias anteriores"," 30 dias anteriores"],placeholder:{date:"Selecione uma data",dateRange:"Selecione um período"}},ru:{days:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],pickers:["след. 7 дней","след. 30 дней","прош. 7 дней","прош. 30 дней"],placeholder:{date:"Выберите дату",dateRange:"Выберите период"}},de:{days:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],pickers:["nächsten 7 Tage","nächsten 30 Tage","vorigen 7 Tage","vorigen 30 Tage"],placeholder:{date:"Datum auswählen",dateRange:"Zeitraum auswählen"}},it:{days:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],pickers:["successivi 7 giorni","successivi 30 giorni","precedenti 7 giorni","precedenti 30 giorni"],placeholder:{date:"Seleziona una data",dateRange:"Seleziona un intervallo date"}},cs:{days:["Ned","Pon","Úte","Stř","Čtv","Pát","Sob"],months:["Led","Úno","Bře","Dub","Kvě","Čer","Čerc","Srp","Zář","Říj","Lis","Pro"],pickers:["příštích 7 dní","příštích 30 dní","předchozích 7 dní","předchozích 30 dní"],placeholder:{date:"Vyberte datum",dateRange:"Vyberte časové rozmezí"}},sl:{days:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"],months:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],pickers:["naslednjih 7 dni","naslednjih 30 dni","prejšnjih 7 dni","prejšnjih 30 dni"],placeholder:{date:"Izberite datum",dateRange:"Izberite razpon med 2 datumoma"}}},g=v.zh,y={methods:{t:function(e){for(var t=this,r=t.$options.name;t&&(!r||"DatePicker"!==r);)(t=t.$parent)&&(r=t.$options.name);for(var a=t&&t.language||g,n=e.split("."),i=a,o=void 0,s=0,l=n.length;s<l;s++){if(o=i[n[s]],s===l-1)return o;if(!o)return"";i=o}return""}}};function b(e,t){if(t){for(var r=[],a=t.offsetParent;a&&e!==a&&e.contains(a);)r.push(a),a=a.offsetParent;var n=t.offsetTop+r.reduce(function(e,t){return e+t.offsetTop},0),i=n+t.offsetHeight,o=e.scrollTop,s=o+e.clientHeight;n<o?e.scrollTop=n:i>s&&(e.scrollTop=i-e.clientHeight)}else e.scrollTop=0}var w=r(1),P=r.n(w);function x(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function E(e,t,r,a,n,i,o,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=r,c._compiled=!0),a&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):n&&(l=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}var D=E({name:"CalendarPanel",components:{PanelDate:{name:"panelDate",mixins:[y],props:{value:null,startAt:null,endAt:null,dateFormat:{type:String,default:"YYYY-MM-DD"},calendarMonth:{default:(new Date).getMonth()},calendarYear:{default:(new Date).getFullYear()},firstDayOfWeek:{default:7,type:Number,validator:function(e){return e>=1&&e<=7}},disabledDate:{type:Function,default:function(){return!1}}},methods:{selectDate:function(e){var t=e.year,r=e.month,a=e.day,n=new Date(t,r,a);this.disabledDate(n)||this.$emit("select",n)},getDays:function(e){var t=this.t("days"),r=parseInt(e,10);return t.concat(t).slice(r,r+7)},getDates:function(e,t,r){var a=[],n=new Date(e,t);n.setDate(0);for(var i=(n.getDay()+7-r)%7+1,o=n.getDate()-(i-1),s=0;s<i;s++)a.push({year:e,month:t-1,day:o+s});n.setMonth(n.getMonth()+2,0);for(var l=n.getDate(),c=0;c<l;c++)a.push({year:e,month:t,day:1+c});n.setMonth(n.getMonth()+1,1);for(var u=42-(i+l),d=0;d<u;d++)a.push({year:e,month:t+1,day:1+d});return a},getCellClasses:function(e){var t=e.year,r=e.month,a=e.day,n=[],i=new Date(t,r,a).getTime(),o=(new Date).setHours(0,0,0,0),s=this.value&&new Date(this.value).setHours(0,0,0,0),l=this.startAt&&new Date(this.startAt).setHours(0,0,0,0),c=this.endAt&&new Date(this.endAt).setHours(0,0,0,0);return r<this.calendarMonth?n.push("last-month"):r>this.calendarMonth?n.push("next-month"):n.push("cur-month"),i===o&&n.push("today"),this.disabledDate(i)&&n.push("disabled"),s&&(i===s?n.push("actived"):l&&i<=s?n.push("inrange"):c&&i>=s&&n.push("inrange")),n},getCellTitle:function(e){var t=e.year,r=e.month,a=e.day;return h(new Date(t,r,a),this.dateFormat)}},render:function(e){var t=this,r=this.getDays(this.firstDayOfWeek).map(function(t){return e("th",[t])}),a=this.getDates(this.calendarYear,this.calendarMonth,this.firstDayOfWeek),n=Array.apply(null,{length:6}).map(function(r,n){var i=a.slice(7*n,7*n+7).map(function(r){var a={class:t.getCellClasses(r)};return e("td",P()([{class:"cell"},a,{attrs:{title:t.getCellTitle(r)},on:{click:t.selectDate.bind(t,r)}}]),[r.day])});return e("tr",[i])});return e("table",{class:"mx-panel mx-panel-date"},[e("thead",[e("tr",[r])]),e("tbody",[n])])}},PanelYear:{name:"panelYear",props:{value:null,firstYear:Number,disabledYear:Function},methods:{isDisabled:function(e){return!("function"!=typeof this.disabledYear||!this.disabledYear(e))},selectYear:function(e){this.isDisabled(e)||this.$emit("select",e)}},render:function(e){var t=this,r=10*Math.floor(this.firstYear/10),a=this.value&&new Date(this.value).getFullYear(),n=Array.apply(null,{length:10}).map(function(n,i){var o=r+i;return e("span",{class:{cell:!0,actived:a===o,disabled:t.isDisabled(o)},on:{click:t.selectYear.bind(t,o)}},[o])});return e("div",{class:"mx-panel mx-panel-year"},[n])}},PanelMonth:{name:"panelMonth",mixins:[y],props:{value:null,calendarYear:{default:(new Date).getFullYear()},disabledMonth:Function},methods:{isDisabled:function(e){return!("function"!=typeof this.disabledMonth||!this.disabledMonth(e))},selectMonth:function(e){this.isDisabled(e)||this.$emit("select",e)}},render:function(e){var t=this,r=this.t("months"),a=this.value&&new Date(this.value).getFullYear(),n=this.value&&new Date(this.value).getMonth();return r=r.map(function(r,i){return e("span",{class:{cell:!0,actived:a===t.calendarYear&&n===i,disabled:t.isDisabled(i)},on:{click:t.selectMonth.bind(t,i)}},[r])}),e("div",{class:"mx-panel mx-panel-month"},[r])}},PanelTime:{name:"panelTime",props:{timePickerOptions:{type:[Object,Function],default:function(){return null}},minuteStep:{type:Number,default:0,validator:function(e){return e>=0&&e<=60}},value:null,timeType:{type:Array,default:function(){return["24","a"]}},disabledTime:Function},computed:{currentHours:function(){return this.value?new Date(this.value).getHours():0},currentMinutes:function(){return this.value?new Date(this.value).getMinutes():0},currentSeconds:function(){return this.value?new Date(this.value).getSeconds():0}},methods:{stringifyText:function(e){return("00"+e).slice(String(e).length)},selectTime:function(e){"function"==typeof this.disabledTime&&this.disabledTime(e)||this.$emit("select",new Date(e))},pickTime:function(e){"function"==typeof this.disabledTime&&this.disabledTime(e)||this.$emit("pick",new Date(e))},getTimeSelectOptions:function(){var e=[],t=this.timePickerOptions;if(!t)return[];if("function"==typeof t)return t()||[];var r=u(t.start),a=u(t.end),n=u(t.step);if(r&&a&&n)for(var i=r.minutes+60*r.hours,o=a.minutes+60*a.hours,s=n.minutes+60*n.hours,l=Math.floor((o-i)/s),c=0;c<=l;c++){var h=i+c*s,p={hours:Math.floor(h/60),minutes:h%60};e.push({value:p,label:d.apply(void 0,[p].concat(x(this.timeType)))})}return e}},render:function(e){var t=this,r=new Date(this.value),a="function"==typeof this.disabledTime&&this.disabledTime,n=this.getTimeSelectOptions();if(Array.isArray(n)&&n.length)return n=n.map(function(n){var i=n.value.hours,o=n.value.minutes,s=new Date(r).setHours(i,o,0);return e("li",{class:{"mx-time-picker-item":!0,cell:!0,actived:i===t.currentHours&&o===t.currentMinutes,disabled:a&&a(s)},on:{click:t.pickTime.bind(t,s)}},[n.label])}),e("div",{class:"mx-panel mx-panel-time"},[e("ul",{class:"mx-time-list"},[n])]);var i=Array.apply(null,{length:24}).map(function(n,i){var o=new Date(r).setHours(i);return e("li",{class:{cell:!0,actived:i===t.currentHours,disabled:a&&a(o)},on:{click:t.selectTime.bind(t,o)}},[t.stringifyText(i)])}),o=this.minuteStep||1,s=parseInt(60/o),l=Array.apply(null,{length:s}).map(function(n,i){var s=i*o,l=new Date(r).setMinutes(s);return e("li",{class:{cell:!0,actived:s===t.currentMinutes,disabled:a&&a(l)},on:{click:t.selectTime.bind(t,l)}},[t.stringifyText(s)])}),c=Array.apply(null,{length:60}).map(function(n,i){var o=new Date(r).setSeconds(i);return e("li",{class:{cell:!0,actived:i===t.currentSeconds,disabled:a&&a(o)},on:{click:t.selectTime.bind(t,o)}},[t.stringifyText(i)])}),u=[i,l];return 0===this.minuteStep&&u.push(c),u=u.map(function(t){return e("ul",{class:"mx-time-list",style:{width:100/u.length+"%"}},[t])}),e("div",{class:"mx-panel mx-panel-time"},[u])}}},mixins:[y,{methods:{dispatch:function(e,t,r){for(var a=this.$parent||this.$root,n=a.$options.name;a&&(!n||n!==e);)(a=a.$parent)&&(n=a.$options.name);n&&n===e&&(a=a||this).$emit.apply(a,[t].concat(r))}}}],props:{value:{default:null,validator:function(e){return null===e||l(e)}},startAt:null,endAt:null,visible:{type:Boolean,default:!1},type:{type:String,default:"date"},dateFormat:{type:String,default:"YYYY-MM-DD"},firstDayOfWeek:{default:7,type:Number,validator:function(e){return e>=1&&e<=7}},notBefore:{default:null,validator:function(e){return!e||l(e)}},notAfter:{default:null,validator:function(e){return!e||l(e)}},disabledDays:{type:[Array,Function],default:function(){return[]}},minuteStep:{type:Number,default:0,validator:function(e){return e>=0&&e<=60}},timePickerOptions:{type:[Object,Function],default:function(){return null}}},data:function(){var e=new Date,t=e.getFullYear();return{panel:"NONE",dates:[],calendarMonth:e.getMonth(),calendarYear:t,firstYear:10*Math.floor(t/10)}},computed:{now:{get:function(){return new Date(this.calendarYear,this.calendarMonth).getTime()},set:function(e){var t=new Date(e);this.calendarYear=t.getFullYear(),this.calendarMonth=t.getMonth()}},timeType:function(){return[/h+/.test(this.$parent.format)?"12":"24",/A/.test(this.$parent.format)?"A":"a"]},timeHeader:function(){return"time"===this.type?this.$parent.format:this.value&&h(this.value,this.dateFormat)},yearHeader:function(){return this.firstYear+" ~ "+(this.firstYear+10)},months:function(){return this.t("months")},notBeforeTime:function(){return this.getCriticalTime(this.notBefore)},notAfterTime:function(){return this.getCriticalTime(this.notAfter)}},watch:{value:{immediate:!0,handler:"updateNow"},visible:{immediate:!0,handler:"init"},panel:{handler:"handelPanelChange"}},methods:{handelPanelChange:function(e,t){var r=this;this.dispatch("DatePicker","panel-change",[e,t]),"YEAR"===e?this.firstYear=10*Math.floor(this.calendarYear/10):"TIME"===e&&this.$nextTick(function(){for(var e=r.$el.querySelectorAll(".mx-panel-time .mx-time-list"),t=0,a=e.length;t<a;t++){var n=e[t];b(n,n.querySelector(".actived"))}})},init:function(e){if(e){var t=this.type;"month"===t?this.showPanelMonth():"year"===t?this.showPanelYear():"time"===t?this.showPanelTime():this.showPanelDate()}else this.showPanelNone(),this.updateNow(this.value)},updateNow:function(e){var t=e?new Date(e):new Date,r=new Date(this.now);this.now=t,this.visible&&this.dispatch("DatePicker","calendar-change",[t,r])},getCriticalTime:function(e){if(!e)return null;var t=new Date(e);return"year"===this.type?new Date(t.getFullYear(),0).getTime():"month"===this.type?new Date(t.getFullYear(),t.getMonth()).getTime():"date"===this.type?t.setHours(0,0,0,0):t.getTime()},inBefore:function(e,t){return void 0===t&&(t=this.startAt),this.notBeforeTime&&e<this.notBeforeTime||t&&e<this.getCriticalTime(t)},inAfter:function(e,t){return void 0===t&&(t=this.endAt),this.notAfterTime&&e>this.notAfterTime||t&&e>this.getCriticalTime(t)},inDisabledDays:function(e){var t=this;return Array.isArray(this.disabledDays)?this.disabledDays.some(function(r){return t.getCriticalTime(r)===e}):"function"==typeof this.disabledDays&&this.disabledDays(new Date(e))},isDisabledYear:function(e){var t=new Date(e,0).getTime(),r=new Date(e+1,0).getTime()-1;return this.inBefore(r)||this.inAfter(t)||"year"===this.type&&this.inDisabledDays(t)},isDisabledMonth:function(e){var t=new Date(this.calendarYear,e).getTime(),r=new Date(this.calendarYear,e+1).getTime()-1;return this.inBefore(r)||this.inAfter(t)||"month"===this.type&&this.inDisabledDays(t)},isDisabledDate:function(e){var t=new Date(e).getTime(),r=new Date(e).setHours(23,59,59,999);return this.inBefore(r)||this.inAfter(t)||this.inDisabledDays(t)},isDisabledTime:function(e,t,r){var a=new Date(e).getTime();return this.inBefore(a,t)||this.inAfter(a,r)||this.inDisabledDays(a)},selectDate:function(e){if("datetime"===this.type){var t=new Date(e);return s(this.value)&&t.setHours(this.value.getHours(),this.value.getMinutes(),this.value.getSeconds()),this.isDisabledTime(t)&&(t.setHours(0,0,0,0),this.notBefore&&t.getTime()<new Date(this.notBefore).getTime()&&(t=new Date(this.notBefore)),this.startAt&&t.getTime()<new Date(this.startAt).getTime()&&(t=new Date(this.startAt))),this.selectTime(t),void this.showPanelTime()}this.$emit("select-date",e)},selectYear:function(e){if(this.changeCalendarYear(e),"year"===this.type.toLowerCase())return this.selectDate(new Date(this.now));this.showPanelMonth()},selectMonth:function(e){if(this.changeCalendarMonth(e),"month"===this.type.toLowerCase())return this.selectDate(new Date(this.now));this.showPanelDate()},selectTime:function(e){this.$emit("select-time",e,!1)},pickTime:function(e){this.$emit("select-time",e,!0)},changeCalendarYear:function(e){this.updateNow(new Date(e,this.calendarMonth))},changeCalendarMonth:function(e){this.updateNow(new Date(this.calendarYear,e))},getSibling:function(){var e=this,t=this.$parent.$children.filter(function(t){return t.$options.name===e.$options.name});return t[1^t.indexOf(this)]},handleIconMonth:function(e){var t=this.calendarMonth;this.changeCalendarMonth(t+e),this.$parent.$emit("change-calendar-month",{month:t,flag:e,vm:this,sibling:this.getSibling()})},handleIconYear:function(e){if("YEAR"===this.panel)this.changePanelYears(e);else{var t=this.calendarYear;this.changeCalendarYear(t+e),this.$parent.$emit("change-calendar-year",{year:t,flag:e,vm:this,sibling:this.getSibling()})}},handleBtnYear:function(){this.showPanelYear()},handleBtnMonth:function(){this.showPanelMonth()},handleTimeHeader:function(){"time"!==this.type&&this.showPanelDate()},changePanelYears:function(e){this.firstYear=this.firstYear+10*e},showPanelNone:function(){this.panel="NONE"},showPanelTime:function(){this.panel="TIME"},showPanelDate:function(){this.panel="DATE"},showPanelYear:function(){this.panel="YEAR"},showPanelMonth:function(){this.panel="MONTH"}}},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mx-calendar",class:"mx-calendar-panel-"+e.panel.toLowerCase()},[r("div",{staticClass:"mx-calendar-header"},[r("a",{directives:[{name:"show",rawName:"v-show",value:"TIME"!==e.panel,expression:"panel !== 'TIME'"}],staticClass:"mx-icon-last-year",on:{click:function(t){e.handleIconYear(-1)}}},[e._v("«")]),e._v(" "),r("a",{directives:[{name:"show",rawName:"v-show",value:"DATE"===e.panel,expression:"panel === 'DATE'"}],staticClass:"mx-icon-last-month",on:{click:function(t){e.handleIconMonth(-1)}}},[e._v("‹")]),e._v(" "),r("a",{directives:[{name:"show",rawName:"v-show",value:"TIME"!==e.panel,expression:"panel !== 'TIME'"}],staticClass:"mx-icon-next-year",on:{click:function(t){e.handleIconYear(1)}}},[e._v("»")]),e._v(" "),r("a",{directives:[{name:"show",rawName:"v-show",value:"DATE"===e.panel,expression:"panel === 'DATE'"}],staticClass:"mx-icon-next-month",on:{click:function(t){e.handleIconMonth(1)}}},[e._v("›")]),e._v(" "),r("a",{directives:[{name:"show",rawName:"v-show",value:"DATE"===e.panel,expression:"panel === 'DATE'"}],staticClass:"mx-current-month",on:{click:e.handleBtnMonth}},[e._v(e._s(e.months[e.calendarMonth]))]),e._v(" "),r("a",{directives:[{name:"show",rawName:"v-show",value:"DATE"===e.panel||"MONTH"===e.panel,expression:"panel === 'DATE' || panel === 'MONTH'"}],staticClass:"mx-current-year",on:{click:e.handleBtnYear}},[e._v(e._s(e.calendarYear))]),e._v(" "),r("a",{directives:[{name:"show",rawName:"v-show",value:"YEAR"===e.panel,expression:"panel === 'YEAR'"}],staticClass:"mx-current-year"},[e._v(e._s(e.yearHeader))]),e._v(" "),r("a",{directives:[{name:"show",rawName:"v-show",value:"TIME"===e.panel,expression:"panel === 'TIME'"}],staticClass:"mx-time-header",on:{click:e.handleTimeHeader}},[e._v(e._s(e.timeHeader))])]),e._v(" "),r("div",{staticClass:"mx-calendar-content"},[r("panel-date",{directives:[{name:"show",rawName:"v-show",value:"DATE"===e.panel,expression:"panel === 'DATE'"}],attrs:{value:e.value,"date-format":e.dateFormat,"calendar-month":e.calendarMonth,"calendar-year":e.calendarYear,"start-at":e.startAt,"end-at":e.endAt,"first-day-of-week":e.firstDayOfWeek,"disabled-date":e.isDisabledDate},on:{select:e.selectDate}}),e._v(" "),r("panel-year",{directives:[{name:"show",rawName:"v-show",value:"YEAR"===e.panel,expression:"panel === 'YEAR'"}],attrs:{value:e.value,"disabled-year":e.isDisabledYear,"first-year":e.firstYear},on:{select:e.selectYear}}),e._v(" "),r("panel-month",{directives:[{name:"show",rawName:"v-show",value:"MONTH"===e.panel,expression:"panel === 'MONTH'"}],attrs:{value:e.value,"disabled-month":e.isDisabledMonth,"calendar-year":e.calendarYear},on:{select:e.selectMonth}}),e._v(" "),r("panel-time",{directives:[{name:"show",rawName:"v-show",value:"TIME"===e.panel,expression:"panel === 'TIME'"}],attrs:{"minute-step":e.minuteStep,"time-picker-options":e.timePickerOptions,value:e.value,"disabled-time":e.isDisabledTime,"time-type":e.timeType},on:{select:e.selectTime,pick:e.pickTime}})],1)])},[],!1,null,null,null).exports,_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},S=E({fecha:n.a,name:"DatePicker",components:{CalendarPanel:D},mixins:[y],directives:{clickoutside:i},props:{value:null,valueType:{default:"date",validator:function(e){return-1!==["timestamp","format","date"].indexOf(e)||o(e)}},placeholder:{type:String,default:null},lang:{type:[String,Object],default:"zh"},format:{type:String,default:"YYYY-MM-DD"},dateFormat:{type:String},type:{type:String,default:"date"},range:{type:Boolean,default:!1},rangeSeparator:{type:String,default:"~"},width:{type:[String,Number],default:null},confirmText:{type:String,default:"OK"},confirm:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},shortcuts:{type:[Boolean,Array],default:!0},inputName:{type:String,default:"date"},inputClass:{type:[String,Array],default:"mx-input"},inputAttr:Object,appendToBody:{type:Boolean,default:!1},popupStyle:{type:Object}},data:function(){return{currentValue:this.range?[null,null]:null,userInput:null,popupVisible:!1,position:{}}},watch:{value:{immediate:!0,handler:"handleValueChange"},popupVisible:function(e){e?this.initCalendar():this.userInput=null}},computed:{transform:function(){var e=this.range?m:f,t=this.valueType;return o(t)?_({},e.date,t):e[t]||e.date},language:function(){return o(this.lang)?_({},v.en,this.lang):v[this.lang]||v.en},innerPlaceholder:function(){return"string"==typeof this.placeholder?this.placeholder:this.range?this.t("placeholder.dateRange"):this.t("placeholder.date")},text:function(){if(null!==this.userInput)return this.userInput;var e=this.transform.value2date(this.value,this.format);return this.range?Array.isArray(e)&&e[0]&&e[1]?this.stringify(e[0])+" "+this.rangeSeparator+" "+this.stringify(e[1]):"":e?this.stringify(e):""},computedWidth:function(){return"number"==typeof this.width||"string"==typeof this.width&&/^\d+$/.test(this.width)?this.width+"px":this.width},showClearIcon:function(){return!this.disabled&&this.clearable&&(this.range?c(this.value):l(this.value))},innerType:function(){return String(this.type).toLowerCase()},innerShortcuts:function(){if(Array.isArray(this.shortcuts))return this.shortcuts;if(!1===this.shortcuts)return[];var e=this.t("pickers");return[{text:e[0],onClick:function(e){e.currentValue=[new Date,new Date(Date.now()+6048e5)],e.updateDate(!0)}},{text:e[1],onClick:function(e){e.currentValue=[new Date,new Date(Date.now()+2592e6)],e.updateDate(!0)}},{text:e[2],onClick:function(e){e.currentValue=[new Date(Date.now()-6048e5),new Date],e.updateDate(!0)}},{text:e[3],onClick:function(e){e.currentValue=[new Date(Date.now()-2592e6),new Date],e.updateDate(!0)}}]},innerDateFormat:function(){return this.dateFormat?this.dateFormat:"date"===this.innerType?this.format:this.format.replace(/[Hh]+.*[msSaAZ]|\[.*?\]/g,"").trim()||"YYYY-MM-DD"},innerPopupStyle:function(){return _({},this.position,this.popupStyle)}},mounted:function(){var e,t,r,a=this;this.appendToBody&&(this.popupElm=this.$refs.calendar,document.body.appendChild(this.popupElm)),this._displayPopup=(e=function(){a.popupVisible&&a.displayPopup()},t=0,r=null,function(){var a=this;if(!r){var n=arguments,i=function(){t=Date.now(),r=null,e.apply(a,n)};Date.now()-t>=200?i():r=setTimeout(i,200)}}),window.addEventListener("resize",this._displayPopup),window.addEventListener("scroll",this._displayPopup)},beforeDestroy:function(){this.popupElm&&this.popupElm.parentNode===document.body&&document.body.removeChild(this.popupElm),window.removeEventListener("resize",this._displayPopup),window.removeEventListener("scroll",this._displayPopup)},methods:{initCalendar:function(){this.handleValueChange(this.value),this.displayPopup()},stringify:function(e,t){return h(e,t||this.format)},parseDate:function(e,t){return p(e,t||this.format)},dateEqual:function(e,t){return s(e)&&s(t)&&e.getTime()===t.getTime()},rangeEqual:function(e,t){var r=this;return Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every(function(e,a){return r.dateEqual(e,t[a])})},selectRange:function(e){if("function"==typeof e.onClick)return e.onClick(this);this.currentValue=[new Date(e.start),new Date(e.end)],this.updateDate(!0)},clearDate:function(){var e=this.range?[null,null]:null;this.currentValue=e,this.updateDate(!0),this.$emit("clear")},confirmDate:function(){(this.range?c(this.currentValue):l(this.currentValue))&&this.updateDate(!0),this.emitDate("confirm"),this.closePopup()},updateDate:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!(this.confirm&&!e||this.disabled||(this.range?this.rangeEqual(this.value,this.currentValue):this.dateEqual(this.value,this.currentValue))||(this.emitDate("input"),this.emitDate("change"),0))},emitDate:function(e){this.$emit(e,this.transform.date2value(this.currentValue,this.format))},handleValueChange:function(e){this.currentValue=this.transform.value2date(e,this.format)},selectDate:function(e){this.currentValue=e,this.updateDate()&&this.closePopup()},selectStartDate:function(e){this.$set(this.currentValue,0,e),this.currentValue[1]&&this.updateDate()},selectEndDate:function(e){this.$set(this.currentValue,1,e),this.currentValue[0]&&this.updateDate()},selectTime:function(e,t){this.currentValue=e,this.updateDate()&&t&&this.closePopup()},selectStartTime:function(e){this.selectStartDate(e)},selectEndTime:function(e){this.selectEndDate(e)},showPopup:function(){this.disabled||(this.popupVisible=!0)},closePopup:function(){this.popupVisible=!1},getPopupSize:function(e){var t=e.style.display,r=e.style.visibility;e.style.display="block",e.style.visibility="hidden";var a=window.getComputedStyle(e),n={width:e.offsetWidth+parseInt(a.marginLeft)+parseInt(a.marginRight),height:e.offsetHeight+parseInt(a.marginTop)+parseInt(a.marginBottom)};return e.style.display=t,e.style.visibility=r,n},displayPopup:function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,r=this.$el.getBoundingClientRect(),a=this._popupRect||(this._popupRect=this.getPopupSize(this.$refs.calendar)),n={},i=0,o=0;this.appendToBody&&(i=window.pageXOffset+r.left,o=window.pageYOffset+r.top),e-r.left<a.width&&r.right<a.width?n.left=i-r.left+1+"px":r.left+r.width/2<=e/2?n.left=i+"px":n.left=i+r.width-a.width+"px",r.top<=a.height&&t-r.bottom<=a.height?n.top=o+t-r.top-a.height+"px":r.top+r.height/2<=t/2?n.top=o+r.height+"px":n.top=o-a.height+"px",n.top===this.position.top&&n.left===this.position.left||(this.position=n)},handleInput:function(e){this.userInput=e.target.value},handleChange:function(e){var t=e.target.value;if(this.editable&&null!==this.userInput){var r=this.$refs.calendarPanel.isDisabledTime;if(!t)return void this.clearDate();if(this.range){var a=t.split(" "+this.rangeSeparator+" ");if(2===a.length){var n=this.parseDate(a[0],this.format),i=this.parseDate(a[1],this.format);if(n&&i&&!r(n,null,i)&&!r(i,n,null))return this.currentValue=[n,i],this.updateDate(!0),void this.closePopup()}}else{var o=this.parseDate(t,this.format);if(o&&!r(o,null,null))return this.currentValue=o,this.updateDate(!0),void this.closePopup()}this.$emit("input-error",t)}}}},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.closePopup,expression:"closePopup"}],staticClass:"mx-datepicker",class:{"mx-datepicker-range":e.range,disabled:e.disabled},style:{width:e.computedWidth}},[r("div",{staticClass:"mx-input-wrapper",on:{click:function(t){return t.stopPropagation(),e.showPopup(t)}}},[r("input",e._b({ref:"input",class:e.inputClass,attrs:{name:e.inputName,type:"text",autocomplete:"off",disabled:e.disabled,readonly:!e.editable,placeholder:e.innerPlaceholder},domProps:{value:e.text},on:{input:e.handleInput,change:e.handleChange}},"input",e.inputAttr,!1)),e._v(" "),r("span",{staticClass:"mx-input-append"},[e._t("calendar-icon",[r("svg",{staticClass:"mx-calendar-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 200 200"}},[r("rect",{attrs:{x:"13",y:"29",rx:"14",ry:"14",width:"174",height:"158",fill:"transparent"}}),e._v(" "),r("line",{attrs:{x1:"46",x2:"46",y1:"8",y2:"50"}}),e._v(" "),r("line",{attrs:{x1:"154",x2:"154",y1:"8",y2:"50"}}),e._v(" "),r("line",{attrs:{x1:"13",x2:"187",y1:"70",y2:"70"}}),e._v(" "),r("text",{attrs:{x:"50%",y:"135","font-size":"90","stroke-width":"1","text-anchor":"middle","dominant-baseline":"middle"}},[e._v(e._s((new Date).getDate()))])])])],2),e._v(" "),e.showClearIcon?r("span",{staticClass:"mx-input-append mx-clear-wrapper",on:{click:function(t){return t.stopPropagation(),e.clearDate(t)}}},[e._t("mx-clear-icon",[r("i",{staticClass:"mx-input-icon mx-clear-icon"})])],2):e._e()]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.popupVisible,expression:"popupVisible"}],ref:"calendar",staticClass:"mx-datepicker-popup",style:e.innerPopupStyle,on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[e._t("header",[e.range&&e.innerShortcuts.length?r("div",{staticClass:"mx-shortcuts-wrapper"},e._l(e.innerShortcuts,function(t,a){return r("button",{key:a,staticClass:"mx-shortcuts",attrs:{type:"button"},on:{click:function(r){e.selectRange(t)}}},[e._v(e._s(t.text))])})):e._e()]),e._v(" "),e.range?r("div",{staticClass:"mx-range-wrapper"},[r("calendar-panel",e._b({ref:"calendarPanel",staticStyle:{"box-shadow":"1px 0 rgba(0, 0, 0, .1)"},attrs:{type:e.innerType,"date-format":e.innerDateFormat,value:e.currentValue[0],"end-at":e.currentValue[1],"start-at":null,visible:e.popupVisible},on:{"select-date":e.selectStartDate,"select-time":e.selectStartTime}},"calendar-panel",e.$attrs,!1)),e._v(" "),r("calendar-panel",e._b({attrs:{type:e.innerType,"date-format":e.innerDateFormat,value:e.currentValue[1],"start-at":e.currentValue[0],"end-at":null,visible:e.popupVisible},on:{"select-date":e.selectEndDate,"select-time":e.selectEndTime}},"calendar-panel",e.$attrs,!1))],1):r("calendar-panel",e._b({ref:"calendarPanel",attrs:{type:e.innerType,"date-format":e.innerDateFormat,value:e.currentValue,visible:e.popupVisible},on:{"select-date":e.selectDate,"select-time":e.selectTime}},"calendar-panel",e.$attrs,!1)),e._v(" "),e._t("footer",[e.confirm?r("div",{staticClass:"mx-datepicker-footer"},[r("button",{staticClass:"mx-datepicker-btn mx-datepicker-btn-confirm",attrs:{type:"button"},on:{click:e.confirmDate}},[e._v(e._s(e.confirmText))])]):e._e()],{confirm:e.confirmDate})],2)])},[],!1,null,null,null).exports;r(6),S.install=function(e){e.component(S.name,S)},"undefined"!=typeof window&&window.Vue&&S.install(window.Vue),t.default=S},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t];r[2]?e.push("@media "+r[2]+"{"+r[1]+"}"):e.push(r[1])}return e.join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var a={},n=0;n<this.length;n++){var i=this[n][0];"number"==typeof i&&(a[i]=!0)}for(n=0;n<t.length;n++){var o=t[n];"number"==typeof o[0]&&a[o[0]]||(r&&!o[2]?o[2]=r:r&&(o[2]="("+o[2]+") and ("+r+")"),e.push(o))}},e}},function(e,t,r){(e.exports=r(4)()).push([e.i,"@charset \"UTF-8\";\n.mx-datepicker {\n  position: relative;\n  display: inline-block;\n  width: 210px;\n  color: #73879c;\n  font: 14px/1.5 'Helvetica Neue', Helvetica, Arial, 'Microsoft Yahei', sans-serif; }\n  .mx-datepicker * {\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box; }\n  .mx-datepicker.disabled {\n    opacity: 0.7;\n    cursor: not-allowed; }\n\n.mx-datepicker-range {\n  width: 320px; }\n\n.mx-datepicker-popup {\n  position: absolute;\n  margin-top: 1px;\n  margin-bottom: 1px;\n  border: 1px solid #d9d9d9;\n  background-color: #fff;\n  -webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);\n          box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);\n  z-index: 1000; }\n\n.mx-input-wrapper {\n  position: relative; }\n  .mx-input-wrapper .mx-clear-wrapper {\n    display: none; }\n  .mx-input-wrapper:hover .mx-clear-wrapper {\n    display: block; }\n\n.mx-input {\n  display: inline-block;\n  width: 100%;\n  height: 34px;\n  padding: 6px 30px;\n  padding-left: 10px;\n  font-size: 14px;\n  line-height: 1.4;\n  color: #555;\n  background-color: #fff;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n          box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); }\n  .mx-input:disabled, .mx-input.disabled {\n    opacity: 0.7;\n    cursor: not-allowed; }\n  .mx-input:focus {\n    outline: none; }\n\n.mx-input-append {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 30px;\n  height: 100%;\n  padding: 6px;\n  background-color: #fff;\n  background-clip: content-box; }\n\n.mx-input-icon {\n  display: inline-block;\n  width: 100%;\n  height: 100%;\n  font-style: normal;\n  color: #555;\n  text-align: center;\n  cursor: pointer; }\n\n.mx-calendar-icon {\n  width: 100%;\n  height: 100%;\n  color: #555;\n  stroke-width: 8px;\n  stroke: currentColor;\n  fill: currentColor; }\n\n.mx-clear-icon::before {\n  display: inline-block;\n  content: '\\2716';\n  vertical-align: middle; }\n\n.mx-clear-icon::after {\n  content: '';\n  display: inline-block;\n  width: 0;\n  height: 100%;\n  vertical-align: middle; }\n\n.mx-range-wrapper {\n  width: 496px;\n  overflow: hidden; }\n\n.mx-shortcuts-wrapper {\n  text-align: left;\n  padding: 0 12px;\n  line-height: 34px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05); }\n  .mx-shortcuts-wrapper .mx-shortcuts {\n    background: none;\n    outline: none;\n    border: 0;\n    color: #48576a;\n    margin: 0;\n    padding: 0;\n    white-space: nowrap;\n    cursor: pointer; }\n    .mx-shortcuts-wrapper .mx-shortcuts:hover {\n      color: #419dec; }\n    .mx-shortcuts-wrapper .mx-shortcuts:after {\n      content: '|';\n      margin: 0 10px;\n      color: #48576a; }\n\n.mx-datepicker-footer {\n  padding: 4px;\n  clear: both;\n  text-align: right;\n  border-top: 1px solid rgba(0, 0, 0, 0.05); }\n\n.mx-datepicker-btn {\n  font-size: 12px;\n  line-height: 1;\n  padding: 7px 15px;\n  margin: 0 5px;\n  cursor: pointer;\n  background-color: transparent;\n  outline: none;\n  border: none;\n  border-radius: 3px; }\n\n.mx-datepicker-btn-confirm {\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  color: #73879c; }\n  .mx-datepicker-btn-confirm:hover {\n    color: #1284e7;\n    border-color: #1284e7; }\n\n/* 日历组件 */\n.mx-calendar {\n  float: left;\n  color: #73879c;\n  padding: 6px 12px;\n  font: 14px/1.5 Helvetica Neue,Helvetica,Arial,Microsoft Yahei,sans-serif; }\n  .mx-calendar * {\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box; }\n\n.mx-calendar-header {\n  padding: 0 4px;\n  height: 34px;\n  line-height: 34px;\n  text-align: center;\n  overflow: hidden; }\n  .mx-calendar-header > a {\n    color: inherit;\n    text-decoration: none;\n    cursor: pointer; }\n    .mx-calendar-header > a:hover {\n      color: #419dec; }\n  .mx-icon-last-month, .mx-icon-last-year,\n  .mx-icon-next-month,\n  .mx-icon-next-year {\n    padding: 0 6px;\n    font-size: 20px;\n    line-height: 30px; }\n  .mx-icon-last-month, .mx-icon-last-year {\n    float: left; }\n  \n  .mx-icon-next-month,\n  .mx-icon-next-year {\n    float: right; }\n\n.mx-calendar-content {\n  width: 224px;\n  height: 224px; }\n  .mx-calendar-content .cell {\n    vertical-align: middle;\n    cursor: pointer; }\n    .mx-calendar-content .cell:hover {\n      background-color: #eaf8fe; }\n    .mx-calendar-content .cell.actived {\n      color: #fff;\n      background-color: #1284e7; }\n    .mx-calendar-content .cell.inrange {\n      background-color: #eaf8fe; }\n    .mx-calendar-content .cell.disabled {\n      cursor: not-allowed;\n      color: #ccc;\n      background-color: #f3f3f3; }\n\n.mx-panel {\n  width: 100%;\n  height: 100%;\n  text-align: center; }\n\n.mx-panel-date {\n  table-layout: fixed;\n  border-collapse: collapse;\n  border-spacing: 0; }\n  .mx-panel-date td, .mx-panel-date th {\n    font-size: 12px;\n    width: 32px;\n    height: 32px;\n    padding: 0;\n    overflow: hidden;\n    text-align: center; }\n  .mx-panel-date td.today {\n    color: #2a90e9; }\n  .mx-panel-date td.last-month, .mx-panel-date td.next-month {\n    color: #ddd; }\n\n.mx-panel-year {\n  padding: 7px 0; }\n  .mx-panel-year .cell {\n    display: inline-block;\n    width: 40%;\n    margin: 1px 5%;\n    line-height: 40px; }\n\n.mx-panel-month .cell {\n  display: inline-block;\n  width: 30%;\n  line-height: 40px;\n  margin: 8px 1.5%; }\n\n.mx-time-list {\n  position: relative;\n  float: left;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  width: 100%;\n  height: 100%;\n  border-top: 1px solid rgba(0, 0, 0, 0.05);\n  border-left: 1px solid rgba(0, 0, 0, 0.05);\n  overflow-y: auto;\n  /* 滚动条滑块 */ }\n  .mx-time-list .mx-time-picker-item {\n    display: block;\n    text-align: left;\n    padding-left: 10px; }\n  .mx-time-list:first-child {\n    border-left: 0; }\n  .mx-time-list .cell {\n    width: 100%;\n    font-size: 12px;\n    height: 30px;\n    line-height: 30px; }\n  .mx-time-list::-webkit-scrollbar {\n    width: 8px;\n    height: 8px; }\n  .mx-time-list::-webkit-scrollbar-thumb {\n    background-color: rgba(0, 0, 0, 0.05);\n    border-radius: 10px;\n    -webkit-box-shadow: inset 1px 1px 0 rgba(0, 0, 0, 0.1);\n            box-shadow: inset 1px 1px 0 rgba(0, 0, 0, 0.1); }\n  .mx-time-list:hover::-webkit-scrollbar-thumb {\n    background-color: rgba(0, 0, 0, 0.2); }\n",""])},function(e,t,r){var a=r(5);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals),(0,r(2).default)("511dbeb0",a,!0,{})}])}),f=d(p),m=(p.DatePicker,Object.prototype.hasOwnProperty),v=Object.prototype.toString,g=Object.defineProperty,y=Object.getOwnPropertyDescriptor,b=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===v.call(e)},w=function(e){if(!e||"[object Object]"!==v.call(e))return!1;var t,r=m.call(e,"constructor"),a=e.constructor&&e.constructor.prototype&&m.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!a)return!1;for(t in e);return void 0===t||m.call(e,t)},P=function(e,t){g&&"__proto__"===t.name?g(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},x=function(e,t){if("__proto__"===t){if(!m.call(e,t))return;if(y)return y(e,t).value}return e[t]},E=function e(){var t,r,a,n,i,o,s=arguments[0],l=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},l=2),(null==s||"object"!=typeof s&&"function"!=typeof s)&&(s={});l<c;++l)if(null!=(t=arguments[l]))for(r in t)a=x(s,r),s!==(n=x(t,r))&&(u&&n&&(w(n)||(i=b(n)))?(i?(i=!1,o=a&&b(a)?a:[]):o=a&&w(a)?a:{},P(s,{name:r,newValue:e(u,o,n)})):void 0!==n&&P(s,{name:r,newValue:n}));return s},D={type:"date",range:!1,format:"YYYY-MM-DD",valueType:"format",lang:"zh",clearable:!1,confirm:!1,editable:!0,disabled:!1,appendToBody:!1,width:210,notBefore:"",notAfter:"",disabledDays:null},_={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("datepicker",{attrs:{type:e.options.type,range:e.options.range,"value-type":e.options.valueType,lang:e.options.lang,clearable:e.options.clearable,confirm:e.options.confirm,editable:e.options.editable,disabled:e.options.disabled,format:e.format,width:e.options.width,"not-before":e.options.notBefore,"not-after":e.options.notAfter,disabledDays:e.options.disabledDays,"append-to-body":e.options.appendToBody,"input-class":"form-control vue-form-input",placeholder:e.definition.placeholder},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})},staticRenderFns:[],computed:{format:function(){var e=this.definition.options;if(e&&e.format)return e.format;var t=void 0;switch(this.schema.format||""){case"date":t="YYYY-MM-DD";break;case"time":t="HH:mm:ss";break;case"date-time":default:t="YYYY-MM-DD HH:mm:ss"}return t},options:function(){return E(!0,{},D,this.definition.options)}},components:{Datepicker:f},mixins:[s]},S={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"form-control vue-form-input",attrs:{type:"hidden",maxlength:e.schema.maxlength,minLength:e.schema.minLength,name:e.name,pattern:e.schema.pattern,required:e.definition.required},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}})},staticRenderFns:[],mixins:[s]},k={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"vue-form-html",domProps:{innerHTML:this._s(this.definition.tpl)}})},staticRenderFns:[],props:{definition:{type:Object}}},C={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.value,expression:"value",modifiers:{lazy:!0}}],staticClass:"form-control vue-form-input",attrs:{type:"number",placeholder:e.definition.placeholder,disabled:e.definition.disabled,max:e.schema.maximum,min:e.schema.minimum,name:e.name,readonly:e.definition.readonly,required:e.definition.required,step:e.definition.step},domProps:{value:e.value},on:{change:function(t){e.value=t.target.value}}})},staticRenderFns:[],mixins:[s]},O={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("select",{directives:[{name:"model",rawName:"v-model.lazy",value:e.value,expression:"value",modifiers:{lazy:!0}}],staticClass:"form-control vue-form-input",attrs:{name:e.name,disabled:e.definition.disabled,mutiple:e.definition.mutiple},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.value=t.target.multiple?r:r[0]}}},e._l(e.definition.options,function(t){return r("option",{key:t.value,domProps:{value:t.value}},[e._v(e._s(t.text))])}),0)},staticRenderFns:[],mixins:[s]},A={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("textarea",{directives:[{name:"model",rawName:"v-model.lazy",value:e.value,expression:"value",modifiers:{lazy:!0}}],staticClass:"form-control vue-form-input",attrs:{type:"text",placeholder:e.definition.placeholder,disabled:e.definition.disabled,maxlength:e.schema.maxlength,minLength:e.schema.minLength,name:e.name,readonly:e.definition.readonly,required:e.definition.required,rows:e.definition.row||3},domProps:{value:e.value},on:{change:function(t){e.value=t.target.value}}})},staticRenderFns:[],mixins:[s]},F={status:0,message:""},$={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-group",class:[e.name,1===e.valid.status?"has-success":2===e.valid.status?"has-error":""]},[e.definition.title?[r("label",{staticClass:"col-sm-2 control-label"},[e.definition.required?r("span",{staticClass:"required"},[e._v("*")]):e._e(),e._v(" "+e._s(e.definition.title)+": ")]),e._v(" "),r("div",{staticClass:"col-sm-10"},[r(e.definition.type,{tag:"component",attrs:{definition:e.definition,path:e.path,schema:e.schema}})],1),e._v(" "),r("div",{staticClass:"col-sm-offset-2 col-sm-10 form-tips"},[r("span",{directives:[{name:"show",rawName:"v-show",value:2!==e.valid.status,expression:"valid.status !== 2"}]},[e._v(e._s(e.description))]),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:2===e.valid.status,expression:"valid.status === 2"}]},[e._v(e._s(e.valid.message))])])]:[r("div",{staticClass:"col-sm-12"},[r(e.definition.type,{tag:"component",attrs:{definition:e.definition,path:e.path,schema:e.schema}})],1),e._v(" "),r("div",{staticClass:"col-sm-12 form-tips"},[r("span",{directives:[{name:"show",rawName:"v-show",value:2!==e.valid.status,expression:"valid.status !== 2"}]},[e._v(e._s(e.description))]),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:2===e.valid.status,expression:"valid.status === 2"}]},[e._v(e._s(e.valid.message))])])]],2)},staticRenderFns:[],props:{definition:{type:Object,required:!0},index:{type:Number,default:-1}},computed:o({},t.mapState({messages:function(e){return e.messages}}),t.mapGetters(["getSchema"]),{valid:function(){return a.get(this.messages,this.path.join("."))||F},description:function(){return this.definition.description},path:function(){var e=this.definition.key;if(e){e=e.slice();var t=this.$parent.$parent.path;if(t){var r=t.length;r<e.length&&(e.splice(0,r),e=t.slice(0,r).concat(e))}var n=this.index;if(-1!==(n=-1!==n?n:this.$parent.$parent.index)){var i=a.lastIndexOf(e,"$index");i>-1&&e.splice(i,1,n)}return e}return this.$parent.$parent.path||[]},name:function(){return this.path.join("-")},schema:function(){return this.getSchema(this.definition.key)}}),components:{"v-text":l,checkbox:c,checkboxes:u,date:_,hidden:S,"v-html":k,number:C,"v-select":O,"v-textarea":A}};r.component("form-group",$);var T={props:{definition:{type:Object,required:!0},path:{type:Array,required:!0},schema:{type:Object,required:!0}}},R={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fieldset"},e._l(e.definition.items,function(t){return r("form-group",{key:(t.key?t.key.join("."):"")+"-"+e.idx,attrs:{definition:t}})}),1)},staticRenderFns:[],mixins:[T]};r.component("v-fieldset",R);var I=h(function(e){var t;t=function(){if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var e,t,r,a,n,i,o,s,l,c,u,d,h,p,f,m,v,g,y,b,w,P,x,E,D,_=[],S=!1,k=!1,C=!1,O=[],A=!1,F=!1,$=/\s+/g,T="Sortable"+(new Date).getTime(),R=window,I=R.document,M=R.parseInt,j=R.setTimeout,N=R.jQuery||R.Zepto,z=R.Polymer,Y={capture:!1,passive:!1},L=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),V=!!navigator.userAgent.match(/Edge/i),q=V||L?"cssFloat":"float",H="draggable"in I.createElement("div"),U=function(){if(L)return!1;var e=I.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),B=!1,Q=!1,J=Math.abs,X=Math.min,K=[],W=function(e,t){var r=me(e),a=M(r.width),n=xe(e,0,t),i=xe(e,1,t),o=n&&me(n),s=i&&me(i),l=o&&M(o.marginLeft)+M(o.marginRight)+$e(n).width,c=s&&M(s.marginLeft)+M(s.marginRight)+$e(i).width;return"flex"===r.display?"column"===r.flexDirection||"column-reverse"===r.flexDirection?"vertical":"horizontal":n&&("block"===o.display||"flex"===o.display||"table"===o.display||"grid"===o.display||l>=a&&"none"===r[q]||i&&"none"===r[q]&&l+c>a)?"vertical":"horizontal"},Z=function(e,t){if(!e||!e.getBoundingClientRect)return R;var r=e,a=!1;do{if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var n=me(r);if(r.clientWidth<r.scrollWidth&&("auto"==n.overflowX||"scroll"==n.overflowX)||r.clientHeight<r.scrollHeight&&("auto"==n.overflowY||"scroll"==n.overflowY)){if(!r||!r.getBoundingClientRect||r===I.body)return R;if(a||t)return r;a=!0}}}while(r=r.parentNode);return R},G=ke(function(e,t,r,a){if(t.scroll){var n=r?r[T]:window,i=t.scrollSensitivity,o=t.scrollSpeed,u=e.clientX,d=e.clientY,h=(window.innerWidth,window.innerHeight,!1);l!==r&&(ee(),s=t.scroll,c=t.scrollFn,!0===s&&(s=Z(r,!0),l=s));var p=0,f=s;do{var m,v,g,b,w,P,x,E,D,k=f,C=$e(k),O=C.top,A=C.bottom,F=C.left,$=C.right,M=C.width,j=C.height;if(k!==R?(m=k.scrollWidth,v=k.scrollHeight,g=me(k),P=M<m&&("auto"===g.overflowX||"scroll"===g.overflowX),x=j<v&&("auto"===g.overflowY||"scroll"===g.overflowY),E=k.scrollLeft,D=k.scrollTop):(m=I.documentElement.scrollWidth,v=I.documentElement.scrollHeight,g=me(I.documentElement),P=M<m&&("auto"===g.overflowX||"scroll"===g.overflowX||"visible"===g.overflowX),x=j<v&&("auto"===g.overflowY||"scroll"===g.overflowY||"visible"===g.overflowY),E=I.documentElement.scrollLeft,D=I.documentElement.scrollTop),b=P&&(J($-u)<=i&&E+M<m)-(J(F-u)<=i&&!!E),w=x&&(J(A-d)<=i&&D+j<v)-(J(O-d)<=i&&!!D),!_[p])for(var N=0;N<=p;N++)_[N]||(_[N]={});_[p].vx==b&&_[p].vy==w&&_[p].el===k||(_[p].el=k,_[p].vx=b,_[p].vy=w,clearInterval(_[p].pid),!k||0==b&&0==w||(h=!0,_[p].pid=setInterval(function(){a&&0===this.layer&&ce.active._emulateDragOver(!0);var t=_[this.layer].vy?_[this.layer].vy*o:0,r=_[this.layer].vx?_[this.layer].vx*o:0;"function"==typeof c&&"continue"!==c.call(n,r,t,e,y,_[this.layer].el)||(_[this.layer].el===R?R.scrollTo(R.pageXOffset+r,R.pageYOffset+t):(_[this.layer].el.scrollTop+=t,_[this.layer].el.scrollLeft+=r))}.bind({layer:p}),24))),p++}while(t.bubbleScroll&&f!==R&&(f=Z(f,!1)));S=h}},30),ee=function(){_.forEach(function(e){clearInterval(e.pid)}),_=[]},te=function(e){function t(e,r){return function(a,n,i,o){var s=a.options.group.name&&n.options.group.name&&a.options.group.name===n.options.group.name;if(null==e&&(r||s))return!0;if(null==e||!1===e)return!1;if(r&&"clone"===e)return e;if("function"==typeof e)return t(e(a,n,i,o),r)(a,n,i,o);var l=(r?a:n).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var r={},a=e.group;a&&"object"==typeof a||(a={name:a}),r.name=a.name,r.checkPull=t(a.pull,!0),r.checkPut=t(a.put),r.revertClone=a.revertClone,e.group=r},re=function(t){e&&e.parentNode&&e.parentNode[T]&&e.parentNode[T]._computeIsAligned(t)},ae=function(e,t){for(var r=t;!r[T];)r=r.parentNode;return e===r},ne=function(e,t,r){for(var a=e.parentNode;a&&!a[T];)a=a.parentNode;a&&a[T][r](Ce(t,{artificialBubble:!0}))},ie=function(){!U&&r&&me(r,"display","none")},oe=function(){!U&&r&&me(r,"display","")};I.addEventListener("click",function(e){if(C)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),C=!1,!1},!0);var se,le=function(t){if(e){var r=function(e,t){for(var r=0;r<O.length;r++)if(!O[r].children.length){var a=$e(O[r]),n=O[r][T].options.emptyInsertThreshold,i=e>=a.left-n&&e<=a.right+n,o=t>=a.top-n&&t<=a.bottom+n;if(i&&o)return O[r]}}(t.clientX,t.clientY);r&&r[T]._onDragOver({clientX:t.clientX,clientY:t.clientY,target:r,rootEl:r})}};function ce(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(e);this.el=e,this.options=t=Ce({},t),e[T]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return W(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:M(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ce.supportPointer&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5};for(var a in r)!(a in t)&&(t[a]=r[a]);for(var n in te(t),this)"_"===n.charAt(0)&&"function"==typeof this[n]&&(this[n]=this[n].bind(this));this.nativeDraggable=!t.forceFallback&&H,t.supportPointer?he(e,"pointerdown",this._onTapStart):(he(e,"mousedown",this._onTapStart),he(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(he(e,"dragover",this),he(e,"dragenter",this)),O.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[])}function ue(e,t,r,a){if(e){r=r||I;do{if(">*"===t&&e.parentNode===r||Se(e,t)||a&&e===r)return e;if(e===r)break}while(e=de(e))}return null}function de(e){return e.host&&e!==I&&e.host.nodeType?e.host:e.parentNode}function he(e,t,r){e.addEventListener(t,r,Y)}function pe(e,t,r){e.removeEventListener(t,r,Y)}function fe(e,t,r){if(e&&t)if(e.classList)e.classList[r?"add":"remove"](t);else{var a=(" "+e.className+" ").replace($," ").replace(" "+t+" "," ");e.className=(a+(r?" "+t:"")).replace($," ")}}function me(e,t,r){var a=e&&e.style;if(a){if(void 0===r)return I.defaultView&&I.defaultView.getComputedStyle?r=I.defaultView.getComputedStyle(e,""):e.currentStyle&&(r=e.currentStyle),void 0===t?r:r[t];t in a||-1!==t.indexOf("webkit")||(t="-webkit-"+t),a[t]=r+("string"==typeof r?"":"px")}}function ve(e){var t="";do{var r=me(e,"transform");r&&"none"!==r&&(t=r+" "+t)}while(e=e.parentNode);return window.DOMMatrix?new DOMMatrix(t):window.WebKitCSSMatrix?new WebKitCSSMatrix(t):window.CSSMatrix?new CSSMatrix(t):void 0}function ge(e,t,r){if(e){var a=e.getElementsByTagName(t),n=0,i=a.length;if(r)for(;n<i;n++)r(a[n],n);return a}return[]}function ye(e,t,r,n,i,o,s,l,c){var u,d=(e=e||t[T]).options,h="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||L||V?(u=I.createEvent("Event")).initEvent(r,!0,!0):u=new CustomEvent(r,{bubbles:!0,cancelable:!0}),u.to=i||t,u.from=o||t,u.item=n||t,u.clone=a,u.oldIndex=s,u.newIndex=l,u.originalEvent=c,t&&t.dispatchEvent(u),d[h]&&d[h].call(e,u)}function be(e,t,r,a,n,i,o,s){var l,c,u=e[T],d=u.options.onMove;return!window.CustomEvent||L||V?(l=I.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=r,l.draggedRect=a,l.related=n||t,l.relatedRect=i||$e(t),l.willInsertAfter=s,l.originalEvent=o,e.dispatchEvent(l),d&&(c=d.call(u,l,o)),c}function we(e){e.draggable=!1}function Pe(){B=!1}function xe(t,a,n){for(var i=0,o=0,s=t.children;o<s.length;){if("none"!==s[o].style.display&&s[o]!==r&&s[o]!==e&&ue(s[o],n.draggable,t,!1)){if(i===a)return s[o];i++}o++}return null}function Ee(e){var t=e.lastElementChild;return t===r&&(t=e.children[e.childElementCount-2]),t||null}function De(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,r=t.length,a=0;r--;)a+=t.charCodeAt(r);return a.toString(36)}function _e(e,t){var r=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"!==e.nodeName.toUpperCase()&&e!==a&&r++;return r}function Se(e,t){if(e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}function ke(e,t){return function(){if(!se){var r=arguments,a=this;se=j(function(){1===r.length?e.call(a,r[0]):e.apply(a,r),se=void 0},t)}}}function Ce(e,t){if(e&&t)for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function Oe(e){return z&&z.dom?z.dom(e).cloneNode(!0):N?N(e).clone(!0)[0]:e.cloneNode(!0)}function Ae(e){return j(e,0)}function Fe(e){return clearTimeout(e)}function $e(e,t,r){if(e.getBoundingClientRect||e===R){var a,n,i,o,s,l,c;if(e!==R?(n=(a=e.getBoundingClientRect()).top,i=a.left,o=a.bottom,s=a.right,l=a.height,c=a.width):(n=0,i=0,o=window.innerHeight,s=window.innerWidth,l=window.innerHeight,c=window.innerWidth),r&&e!==R){if(t=t||e.parentNode,!L)do{if(t&&t.getBoundingClientRect&&"none"!==me(t,"transform")){var u=t.getBoundingClientRect();n-=u.top+M(me(t,"border-top-width")),i-=u.left+M(me(t,"border-left-width")),o=n+a.height,s=i+a.width;break}}while(t=t.parentNode);var d=ve(e),h=d&&d.a,p=d&&d.d;d&&(o=(n/=p)+(l/=p),s=(i/=h)+(c/=h))}return{top:n,left:i,bottom:o,right:s,width:c,height:l}}}return I.addEventListener("dragover",le),I.addEventListener("mousemove",le),ce.prototype={constructor:ce,_computeIsAligned:function(t){var a;if(r&&!U?(ie(),a=I.elementFromPoint(t.clientX,t.clientY),oe()):a=t.target,a=ue(a,this.options.draggable,this.el,!1),!Q&&e&&e.parentNode===this.el){for(var n,i,o,s,l,c,u,d,h=this.el.children,p=0;p<h.length;p++)ue(h[p],this.options.draggable,this.el,!1)&&h[p]!==a&&(h[p].sortableMouseAligned=(n=t.clientX,i=t.clientY,o=h[p],s=this._getDirection(t,null),this.options,void 0,void 0,void 0,void 0,l=$e(o),c="vertical"===s?l.left:l.top,u="vertical"===s?l.right:l.bottom,c<(d="vertical"===s?n:i)&&d<u));ue(a,this.options.draggable,this.el,!0)||(w=null),Q=!0,j(function(){Q=!1},30)}},_getDirection:function(t,r){return"function"==typeof this.options.direction?this.options.direction.call(this,t,r,e):this.options.direction},_onTapStart:function(t){if(t.cancelable){var r,a=this,n=this.el,i=this.options,s=i.preventOnFilter,l=t.type,c=t.touches&&t.touches[0],u=(c||t).target,d=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||u,h=i.filter;if(function(e){K.length=0;var t=e.getElementsByTagName("input"),r=t.length;for(;r--;){var a=t[r];a.checked&&K.push(a)}}(n),(!L||t.artificialBubble||ae(n,u))&&!e&&!(/mousedown|pointerdown/.test(l)&&0!==t.button||i.disabled||d.isContentEditable))if(u=ue(u,i.draggable,n,!1)){if(o!==u){if(r=_e(u,i.draggable),"function"==typeof h){if(h.call(this,t,u,this))return ye(a,d,"filter",u,n,n,r),void(s&&t.cancelable&&t.preventDefault())}else if(h&&(h=h.split(",").some(function(e){if(e=ue(d,e.trim(),n,!1))return ye(a,e,"filter",u,n,n,r),!0})))return void(s&&t.cancelable&&t.preventDefault());i.handle&&!ue(d,i.handle,n,!1)||this._prepareDragStart(t,c,u,r)}}else L&&ne(n,t,"_onTapStart")}},_handleAutoScroll:function(t,r){if(e&&this.options.scroll){var a=t.clientX,n=t.clientY,i=I.elementFromPoint(a,n),o=this;if(r||V||L){G(t,o.options,i,r);var s=Z(i,!0);!S||f&&a===m&&n===v||(f&&clearInterval(f),f=setInterval(function(){if(e){var i=Z(I.elementFromPoint(a,n),!0);i!==s&&(s=i,ee(),G(t,o.options,s,r))}},10),m=a,v=n)}else{if(!o.options.bubbleScroll||Z(i,!0)===window)return void ee();G(t,o.options,Z(i,!1),!1)}}},_prepareDragStart:function(r,a,s,l){var c,d=this,p=d.el,f=d.options,m=p.ownerDocument;s&&!e&&s.parentNode===p&&(n=p,t=(e=s).parentNode,i=e.nextSibling,o=s,h=f.group,u=l,g={target:e,clientX:(a||r).clientX,clientY:(a||r).clientY},this._lastX=(a||r).clientX,this._lastY=(a||r).clientY,e.style["will-change"]="all",e.style.transition="",e.style.transform="",c=function(){d._disableDelayedDrag(),e.draggable=d.nativeDraggable,d._triggerDragStart(r,a),ye(d,n,"choose",e,n,n,u),fe(e,f.chosenClass,!0)},f.ignore.split(",").forEach(function(t){ge(e,t.trim(),we)}),f.supportPointer?(he(m,"pointerup",d._onDrop),he(m,"pointercancel",d._onDrop)):(he(m,"mouseup",d._onDrop),he(m,"touchend",d._onDrop),he(m,"touchcancel",d._onDrop)),f.delay?(he(m,"mouseup",d._disableDelayedDrag),he(m,"touchend",d._disableDelayedDrag),he(m,"touchcancel",d._disableDelayedDrag),he(m,"mousemove",d._delayedDragTouchMoveHandler),he(m,"touchmove",d._delayedDragTouchMoveHandler),f.supportPointer&&he(m,"pointermove",d._delayedDragTouchMoveHandler),d._dragStartTimer=j(c,f.delay)):c())},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;X(J(t.clientX-this._lastX),J(t.clientY-this._lastY))>=this.options.touchStartThreshold&&this._disableDelayedDrag()},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),pe(e,"mouseup",this._disableDelayedDrag),pe(e,"touchend",this._disableDelayedDrag),pe(e,"touchcancel",this._disableDelayedDrag),pe(e,"mousemove",this._delayedDragTouchMoveHandler),pe(e,"touchmove",this._delayedDragTouchMoveHandler),pe(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,r){r=r||("touch"==t.pointerType?t:null),!this.nativeDraggable||r?this.options.supportPointer?he(I,"pointermove",this._onTouchMove):he(I,r?"touchmove":"mousemove",this._onTouchMove):(he(e,"dragend",this),he(n,"dragstart",this._onDragStart));try{I.selection?Ae(function(){I.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(t){if(k=!1,n&&e){this.nativeDraggable&&(he(I,"dragover",this._handleAutoScroll),he(I,"dragover",re));var r=this.options;!t&&fe(e,r.dragClass,!1),fe(e,r.ghostClass,!0),me(e,"transform",""),ce.active=this,t&&this._appendGhost(),ye(this,n,"start",e,n,n,u)}else this._nulling()},_emulateDragOver:function(t){if(y){if(this._lastX===y.clientX&&this._lastY===y.clientY&&!t)return;this._lastX=y.clientX,this._lastY=y.clientY,ie();for(var r=I.elementFromPoint(y.clientX,y.clientY),a=r;r&&r.shadowRoot;)a=r=r.shadowRoot.elementFromPoint(y.clientX,y.clientY);if(a)do{if(a[T])if(a[T]._onDragOver({clientX:y.clientX,clientY:y.clientY,target:r,rootEl:a})&&!this.options.dragoverBubble)break;r=a}while(a=a.parentNode);e.parentNode[T]._computeIsAligned(y),oe()}},_onTouchMove:function(e){if(g){if(!e.cancelable)return;var t=this.options,a=t.fallbackTolerance,n=t.fallbackOffset,i=e.touches?e.touches[0]:e,o=r&&ve(r),s=r&&o&&o.a,l=r&&o&&o.d,c=(i.clientX-g.clientX+n.x)/(s||1),u=(i.clientY-g.clientY+n.y)/(l||1),d=e.touches?"translate3d("+c+"px,"+u+"px,0)":"translate("+c+"px,"+u+"px)";if(!ce.active&&!k){if(a&&X(J(i.clientX-this._lastX),J(i.clientY-this._lastY))<a)return;this._onDragStart(e,!0)}this._handleAutoScroll(i,!0),b=!0,y=i,me(r,"webkitTransform",d),me(r,"mozTransform",d),me(r,"msTransform",d),me(r,"transform",d),e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!r){var t=$e(e,this.options.fallbackOnBody?I.body:n,!0),a=(me(e),this.options);fe(r=e.cloneNode(!0),a.ghostClass,!1),fe(r,a.fallbackClass,!0),fe(r,a.dragClass,!0),me(r,"box-sizing","border-box"),me(r,"margin",0),me(r,"top",t.top),me(r,"left",t.left),me(r,"width",t.width),me(r,"height",t.height),me(r,"opacity","0.8"),me(r,"position","fixed"),me(r,"zIndex","100000"),me(r,"pointerEvents","none"),a.fallbackOnBody&&I.body.appendChild(r)||n.appendChild(r)}},_onDragStart:function(t,r){var i=this,o=t.dataTransfer,s=i.options;(a=Oe(e)).draggable=!1,a.style["will-change"]="",this._hideClone(),fe(a,i.options.chosenClass,!1),i._cloneId=Ae(function(){i.options.removeCloneOnHide||n.insertBefore(a,e),ye(i,n,"clone",e)}),!r&&fe(e,s.dragClass,!0),r?(C=!0,i._loopId=setInterval(i._emulateDragOver,50)):(pe(I,"mouseup",i._onDrop),pe(I,"touchend",i._onDrop),pe(I,"touchcancel",i._onDrop),pe(I,"pointercancel",i._onDrop),o&&(o.effectAllowed="move",s.setData&&s.setData.call(i,o,e)),he(I,"drop",i),me(e,"transform","translateZ(0)")),k=!0,i._dragStartId=Ae(i._dragStarted.bind(i,r)),he(I,"selectstart",i)},_onDragOver:function(a){var o,s,l,c=this.el,d=a.target,f=this.options,m=f.group,v=ce.active,g=h===m,y=f.sort,_=this;if(!B&&(!L||a.rootEl||a.artificialBubble||ae(c,d))){if(void 0!==a.preventDefault&&a.cancelable&&a.preventDefault(),b=!0,d=ue(d,f.draggable,c,!0),ue(a.target,null,e,!0)||d.animated)return H();if(d!==e&&(C=!1),v&&!f.disabled&&(g?y||(l=!n.contains(e)):p===this||(this.lastPutMode=h.checkPull(this,v,e,a))&&m.checkPut(this,v,e,a))){var k=this._getDirection(a,d);if(o=$e(e),l)return this._hideClone(),t=n,i?n.insertBefore(e,i):n.appendChild(e),H();if(0===c.children.length||c.children[0]===r||function(e,t,r){var a=$e(Ee(r)),n="vertical"===t?e.clientY:e.clientX,i="vertical"===t?e.clientX:e.clientY,o="vertical"===t?a.bottom:a.right,s="vertical"===t?a.left:a.top,l="vertical"===t?a.right:a.bottom;return i>s&&i<l&&n>o}(a,k,c)&&!e.animated){if(0!==c.children.length&&c.children[0]!==r&&c===a.target&&(d=Ee(c)),d&&(s=$e(d)),g?v._hideClone():v._showClone(this),!1!==be(n,c,e,o,d,s,a,!!d))return c.appendChild(e),t=c,D=null,U(),this._animate(o,e),d&&this._animate(s,d),H()}else if(d&&d!==e&&void 0!==d.parentNode[T]&&d!==c){var O,$=0,M=d.sortableMouseAligned,N=e.parentNode!==c,z=function(e,t){var r=Z(r,!0),a=$e(e)[t];for(;r;){var n=$e(r)[t];if(!("top"===t||"left"===t?a>=n:a<=n))return!0;if(r===R)break;r=Z(r,!1)}return!1}(d,"vertical"===k?"top":"left");if(w!==d&&(x=null,O=$e(d)["vertical"===k?"top":"left"],A=!1),function(t,r,a){var n=t===e&&D||$e(t),i=r===e&&D||$e(r),o="vertical"===a?n.left:n.top,s="vertical"===a?n.right:n.bottom,l="vertical"===a?n.width:n.height,c="vertical"===a?i.left:i.top,u="vertical"===a?i.right:i.bottom,d="vertical"===a?i.width:i.height;return o===c||s===u||o+l/2===c+d/2}(e,d,k)&&M||N||z||f.invertSwap||"insert"===x||"swap"===x?("swap"!==x&&(F=f.invertSwap||N||S||z),$=function(t,r,a,n,i,o,s){var l=$e(r),c="vertical"===a?t.clientY:t.clientX,u="vertical"===a?l.height:l.width,d="vertical"===a?l.top:l.left,h="vertical"===a?l.bottom:l.right,p=$e(e),f=!1;if(!o)if(s&&E<u*n)if(!A&&(1===P?c>d+u*i/2:c<h-u*i/2)&&(A=!0),A)f=!0;else{"vertical"===a?p.top:p.left,"vertical"===a?p.bottom:p.right;if(1===P?c<d+E:c>h-E)return-1*P}else if(c>d+u*(1-n)/2&&c<h-u*(1-n)/2)return c>d+u/2?-1:1;if((f=f||o)&&(c<d+u*i/2||c>h-u*i/2))return c>d+u/2?1:-1;return 0}(a,d,k,f.swapThreshold,null==f.invertedSwapThreshold?f.swapThreshold:f.invertedSwapThreshold,F,w===d),x="swap"):($=function(t,r){var a=_e(e,r.draggable),n=_e(t,r.draggable);return a<n?1:-1}(d,f),x="insert"),0===$)return H();D=null,w=d,P=$,s=$e(d);var Y=d.nextElementSibling,V=!1,q=be(n,c,e,o,d,s,a,V=1===$);if(!1!==q)return 1!==q&&-1!==q||(V=1===q),B=!0,j(Pe,30),g?v._hideClone():v._showClone(this),V&&!Y?c.appendChild(e):d.parentNode.insertBefore(e,V?Y:d),t=e.parentNode,void 0===O||F||(E=J(O-$e(d)["vertical"===k?"top":"left"])),U(),!N&&this._animate(s,d),this._animate(o,e),H()}if(c.contains(e))return H()}return L&&!a.rootEl&&ne(c,a,"_onDragOver"),!1}function H(){return v&&(fe(e,p?p.options.ghostClass:v.options.ghostClass,!1),fe(e,f.ghostClass,!0)),p!==_&&_!==ce.active?p=_:_===ce.active&&(p=null),(d===e&&!e.animated||d===c&&!d.animated)&&(w=null),f.dragoverBubble||a.rootEl||d===I||(_._handleAutoScroll(a),e.parentNode[T]._computeIsAligned(a)),!f.dragoverBubble&&a.stopPropagation&&a.stopPropagation(),!0}function U(){ye(_,n,"change",d,c,n,u,_e(e,f.draggable),a)}},_animate:function(t,r){var a=this.options.animation;if(a){var n=$e(r);if(r===e&&(D=n),1===t.nodeType&&(t=$e(t)),t.left+t.width/2!==n.left+n.width/2||t.top+t.height/2!==n.top+n.height/2){var i=ve(this.el),o=i&&i.a,s=i&&i.d;me(r,"transition","none"),me(r,"transform","translate3d("+(t.left-n.left)/(o||1)+"px,"+(t.top-n.top)/(s||1)+"px,0)"),r.offsetWidth,me(r,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),me(r,"transform","translate3d(0,0,0)")}"number"==typeof r.animated&&clearTimeout(r.animated),r.animated=j(function(){me(r,"transition",""),me(r,"transform",""),r.animated=!1},a)}},_offUpEvents:function(){var e=this.el.ownerDocument;pe(I,"touchmove",this._onTouchMove),pe(I,"pointermove",this._onTouchMove),pe(e,"mouseup",this._onDrop),pe(e,"touchend",this._onDrop),pe(e,"pointerup",this._onDrop),pe(e,"touchcancel",this._onDrop),pe(e,"pointercancel",this._onDrop),pe(I,"selectstart",this)},_onDrop:function(o){var s=this.el,l=this.options;k=!1,S=!1,F=!1,A=!1,clearInterval(this._loopId),clearInterval(f),ee(),clearTimeout(se),se=void 0,clearTimeout(this._dragStartTimer),Fe(this._cloneId),Fe(this._dragStartId),pe(I,"mousemove",this._onTouchMove),this.nativeDraggable&&(pe(I,"drop",this),pe(s,"dragstart",this._onDragStart),pe(I,"dragover",this._handleAutoScroll),pe(I,"dragover",re)),this._offUpEvents(),o&&(b&&(o.cancelable&&o.preventDefault(),!l.dropBubble&&o.stopPropagation()),r&&r.parentNode&&r.parentNode.removeChild(r),(n===t||p&&"clone"!==p.lastPutMode)&&a&&a.parentNode&&a.parentNode.removeChild(a),e&&(this.nativeDraggable&&pe(e,"dragend",this),we(e),e.style["will-change"]="",fe(e,p?p.options.ghostClass:this.options.ghostClass,!1),fe(e,this.options.chosenClass,!1),ye(this,n,"unchoose",e,t,n,u,null,o),n!==t?((d=_e(e,l.draggable))>=0&&(ye(null,t,"add",e,t,n,u,d,o),ye(this,n,"remove",e,t,n,u,d,o),ye(null,t,"sort",e,t,n,u,d,o),ye(this,n,"sort",e,t,n,u,d,o)),p&&p.save()):e.nextSibling!==i&&(d=_e(e,l.draggable))>=0&&(ye(this,n,"update",e,t,n,u,d,o),ye(this,n,"sort",e,t,n,u,d,o)),ce.active&&(null!=d&&-1!==d||(d=u),ye(this,n,"end",e,t,n,u,d,o),this.save()))),this._nulling()},_nulling:function(){n=e=t=r=i=a=o=s=l=_.length=f=m=v=g=y=b=d=u=w=P=D=p=h=ce.active=null,K.forEach(function(e){e.checked=!0}),K.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":e&&(this._onDragOver(t),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var e,t=[],r=this.el.children,a=0,n=r.length,i=this.options;a<n;a++)ue(e=r[a],i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||De(e));return t},sort:function(e){var t={},r=this.el;this.toArray().forEach(function(e,a){var n=r.children[a];ue(n,this.options.draggable,r,!1)&&(t[e]=n)},this),e.forEach(function(e){t[e]&&(r.removeChild(t[e]),r.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return ue(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(void 0===t)return r[e];r[e]=t,"group"===e&&te(r)},destroy:function(){var e=this.el;e[T]=null,pe(e,"mousedown",this._onTapStart),pe(e,"touchstart",this._onTapStart),pe(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(pe(e,"dragover",this),pe(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),O.splice(O.indexOf(this.el),1),this.el=e=null},_hideClone:function(){a.cloneHidden||(me(a,"display","none"),a.cloneHidden=!0,a.parentNode&&this.options.removeCloneOnHide&&a.parentNode.removeChild(a))},_showClone:function(t){"clone"===t.lastPutMode?a.cloneHidden&&(n.contains(e)&&!this.options.group.revertClone?n.insertBefore(a,e):i?n.insertBefore(a,i):n.appendChild(a),this.options.group.revertClone&&this._animate(e,a),me(a,"display",""),a.cloneHidden=!1):this._hideClone()}},he(I,"touchmove",function(e){(ce.active||k)&&e.cancelable&&e.preventDefault()}),ce.utils={on:he,off:pe,css:me,find:ge,is:function(e,t){return!!ue(e,t,e,!1)},extend:Ce,throttle:ke,closest:ue,toggleClass:fe,clone:Oe,index:_e,nextTick:Ae,cancelNextTick:Fe,detectDirection:W,getChild:xe},ce.create=function(e,t){return new ce(e,t)},ce.version="1.8.1",ce},e.exports=t()}),M=h(function(e,t){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}!function(){Array.from||(Array.from=function(e){return[].slice.call(e)});var t=I;e.exports=function(e){function t(e){e.parentElement.removeChild(e)}function n(e,t,r){var a=0===r?e.children[0]:e.children[r-1].nextSibling;e.insertBefore(t,a)}function i(e,t){var r=this;this.$nextTick(function(){return r.$emit(e.toLowerCase(),t)})}var o=["Start","Add","Remove","Update","End"],s=["Choose","Sort","Filter","Clone"],l=["Move"].concat(o,s).map(function(e){return"on"+e}),c=null;return{name:"draggable",props:{options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(e){return e}},element:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1,init:!1}},render:function(e){var t=this.$slots.default;if(t&&1===t.length){var r=t[0];r.componentOptions&&"transition-group"===r.componentOptions.tag&&(this.transitionMode=!0)}var n=0,i=t,o=this.$slots,s=o.header,l=o.footer;s&&(n=s.length,i=i?[].concat(a(s),a(i)):[].concat(a(s))),l&&(i=i?[].concat(a(i),a(l)):[].concat(a(l))),this.headerOffset=n;var c=null,u=function(e,t){c=function(e,t,r){return void 0==r?e:((e=null==e?{}:e)[t]=r,e)}(c,e,t)};if(u("attrs",this.$attrs),this.componentData){var d=this.componentData,h=d.on,p=d.props;u("on",h),u("props",p)}return e(this.element,c,i)},mounted:function(){var t=this;if(this.noneFunctionalComponentMode=this.element.toLowerCase()!==this.$el.nodeName.toLowerCase(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter element value or remove transition-group. Current element value: "+this.element);var a={};o.forEach(function(e){a["on"+e]=function(e){var t=this;return function(r){null!==t.realList&&t["onDrag"+e](r),i.call(t,e,r)}}.call(t,e)}),s.forEach(function(e){a["on"+e]=i.bind(t,e)});var n=r({},this.options,a,{onMove:function(e,r){return t.onDragMove(e,r)}});!("draggable"in n)&&(n.draggable=">*"),this._sortable=new e(this.rootContainer,n),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},isCloning:function(){return!!this.options&&!!this.options.group&&"clone"===this.options.group.pull},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(e){for(var t in e)-1==l.indexOf(t)&&this._sortable.option(t,e[t])},deep:!0},realList:function(){this.computeIndexes()}},methods:{getChildrenNodes:function(){if(this.init||(this.noneFunctionalComponentMode=this.noneFunctionalComponentMode&&1==this.$children.length,this.init=!0),this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var e=this.$slots.default;return this.transitionMode?e[0].child.$slots.default:e},computeIndexes:function(){var e=this;this.$nextTick(function(){e.visibleIndexes=function(e,t,r){if(!e)return[];var n=e.map(function(e){return e.elm}),i=[].concat(a(t)).map(function(e){return n.indexOf(e)});return r?i.filter(function(e){return-1!==e}):i}(e.getChildrenNodes(),e.rootContainer.children,e.transitionMode)})},getUnderlyingVm:function(e){var t=function(e,t){return e.map(function(e){return e.elm}).indexOf(t)}(this.getChildrenNodes()||[],e);return-1===t?null:{index:t,element:this.realList[t]}},getUnderlyingPotencialDraggableComponent:function(e){var t=e.__vue__;return t&&t.$options&&"transition-group"===t.$options._componentTag?t.$parent:t},emitChanges:function(e){var t=this;this.$nextTick(function(){t.$emit("change",e)})},alterList:function(e){if(this.list)e(this.list);else{var t=[].concat(a(this.value));e(t),this.$emit("input",t)}},spliceList:function(){var e=arguments,t=function(t){return t.splice.apply(t,e)};this.alterList(t)},updatePosition:function(e,t){var r=function(r){return r.splice(t,0,r.splice(e,1)[0])};this.alterList(r)},getRelatedContextFromMoveEvent:function(e){var t=e.to,a=e.related,n=this.getUnderlyingPotencialDraggableComponent(t);if(!n)return{component:n};var i=n.realList,o={list:i,component:n};if(t!==a&&i&&n.getUnderlyingVm){var s=n.getUnderlyingVm(a);if(s)return r(s,o)}return o},getVmIndex:function(e){var t=this.visibleIndexes,r=t.length;return e>r-1?r:t[e]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(e){if(this.noTransitionOnDrag&&this.transitionMode){this.getChildrenNodes()[e].data=null;var t=this.getComponent();t.children=[],t.kept=void 0}},onDragStart:function(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),c=e.item},onDragAdd:function(e){this.updateEvenemt(e);var r=e.item._underlying_vm_;if(void 0!==r){t(e.item);var a=this.getVmIndex(e.newIndex);this.spliceList(a,0,r),this.computeIndexes();var n={element:r,newIndex:a};this.emitChanges({added:n})}},onDragRemove:function(e){if(this.updateEvenemt(e),n(this.rootContainer,e.item,e.oldIndex),this.isCloning)t(e.clone);else{var r=this.context.index;this.spliceList(r,1);var a={element:this.context.element,oldIndex:r};this.resetTransitionData(r),this.emitChanges({removed:a})}},onDragUpdate:function(e){this.updateEvenemt(e),t(e.item),n(e.from,e.item,e.oldIndex);var r=this.context.index,a=this.getVmIndex(e.newIndex);this.updatePosition(r,a);var i={element:this.context.element,oldIndex:r,newIndex:a};this.emitChanges({moved:i})},updateEvenemt:function(e){this.updateProperty(e,"newIndex"),this.updateProperty(e,"oldIndex")},updateProperty:function(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},computeFutureIndex:function(e,t){if(!e.element)return 0;var r=[].concat(a(t.to.children)).filter(function(e){return"none"!==e.style.display}),n=r.indexOf(t.related),i=e.component.getVmIndex(n);return-1==r.indexOf(c)&&t.willInsertAfter?i+1:i},onDragMove:function(e,t){var a=this.move;if(!a||!this.realList)return!0;var n=this.getRelatedContextFromMoveEvent(e),i=this.context,o=this.computeFutureIndex(n,e);return r(i,{futureIndex:o}),r(e,{relatedContext:n,draggedContext:i}),a(e,t)},onDragEnd:function(e){this.computeIndexes(),c=null}}}}(t)}()}),j={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("draggable",{staticClass:"list-group",attrs:{element:"ul",options:{draggable:".drag-item"}},model:{value:e.list,callback:function(t){e.list=t},expression:"list"}},[e._l(e.len,function(t){return r("li",{key:t-1,staticClass:"list-group-item drag-item",attrs:{drop:"moveItem"}},[e._l(e.definition.items,function(e){return r("form-group",{key:(e.key?e.key.join("."):"")+"-"+(t-1),attrs:{definition:e,index:t-1}})}),e._v(" "),e.definition.isFixed?e._e():r("span",{staticClass:"glyphicon glyphicon-remove",attrs:{type:"button"},on:{click:function(r){e.remveItem(t-1)}}}),e._v(" "),e.definition.isFixed||1===t?e._e():r("span",{staticClass:"glyphicon glyphicon-chevron-up",attrs:{type:"button"},on:{click:function(r){e.upItem(t-1)}}}),e._v(" "),e.definition.isFixed||t===e.len?e._e():r("span",{staticClass:"glyphicon glyphicon-chevron-down",attrs:{type:"button"},on:{click:function(r){e.downItem(t-1)}}})],2)}),e._v(" "),r("li",{staticClass:"list-group-item text-right",attrs:{slot:"footer"},slot:"footer"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.addItem}},[e._v("添加")])])],2)},staticRenderFns:[],mixins:[{data:function(){return{len:0}},props:{definition:{type:Object,required:!0},path:{type:Array,required:!0},schema:{type:Object,required:!0}},computed:o({},t.mapState({model:function(e){return e.model}}),{list:{get:function(){return a.get(this.model,this.path)},set:function(e){this.setValue({path:this.path,value:e})}},minItems:function(){return this.schema.minItems||0},maxItems:function(){return this.schema.maxItems||100}}),created:function(){var e=a.get(this.model,this.path);this.len=e?e.length:0},methods:o({},t.mapMutations(["removeValue","setValue","exchanceItem"]),{remveItem:function(e){this.len>this.minItems?(this.len=this.len-1,this.removeValue(this.path.concat(e))):alert("小于最小个数")},addItem:function(){this.len<this.maxItems?this.len=this.len+1:alert("大于最大个数")},upItem:function(e){this.exchanceItem({path:this.path,newIndex:e-1,oldIndex:e})},downItem:function(e){this.exchanceItem({path:this.path,newIndex:e,oldIndex:e+1})}}),components:{draggable:M}}]};r.component("array",j);var N={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row"},e._l(e.definition.items,function(t){return r("div",{key:(t.key?t.key.join("."):"")+"-"+e.idx,class:["col-xs-"+t.col]},[r("form-group",{attrs:{definition:t}})],1)}),0)},staticRenderFns:[],mixins:[T]};r.component("inline",N);var z={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("ul",{staticClass:"nav nav-tabs"},e._l(e.definition.items,function(t,a){return r("li",{key:a,class:{active:a===e.active}},[r("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.tab(a)}}},[e._v(e._s(t.title))])])}),0),e._v(" "),r("div",{staticClass:"tab-content"},e._l(e.definition.items,function(t,a){return r("div",{key:a,staticClass:"tab-pane",class:{active:a===e.active}},e._l(t.items,function(e){return r("form-group",{key:(e.key?e.key.join("."):"")+"-"+a,attrs:{definition:e}})}),1)}),0)])},staticRenderFns:[],data:function(){return{active:0}},created:function(){var e=this.definition.active;"number"==typeof e&&(this.active=e)},methods:{tab:function(e){e!==this.active&&(this.active=e)}},mixins:[T]};r.component("tabs",z);var Y={render:function(){var e=this.$createElement,t=this._self._c||e;return t("form",{staticClass:"form-horizontal",on:{submit:function(e){e.preventDefault()}}},this._l(this.definition,function(e,r){return t("form-group",{key:(e.key?e.key.join("."):"")+"-"+r,attrs:{definition:e}})}),1)},staticRenderFns:[],computed:t.mapState({definition:function(e){return e.definition}})},L={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"vue-form"},[t(this.theme,{tag:"component"}),this._v(" "),this._t("default")],2)},staticRenderFns:[],props:{schema:{type:Object,required:!0},definition:{type:Array},model:[Object,Array],theme:{type:String,default:"bootstrap"}},created:function(){var e=this.schema,t=this.definition,r=this.model;this.init({schema:e,definition:t,model:r})},components:{bootstrap:Y},methods:o({},t.mapMutations(["init"]))},V=h(function(e,t){var r,a;r={"'":/\\\'/g,'"':/\\\"/g},a={parse:function(e){if("string"!=typeof e)throw new TypeError("ObjectPath.parse must be passed a string");for(var t,a,n,i,o=0,s=[];o<e.length;)if(t=e.indexOf(".",o),a=e.indexOf("[",o),-1===t&&-1===a)s.push(e.slice(o,e.length)),o=e.length;else if(-1===a||-1!==t&&t<a)s.push(e.slice(o,t)),o=t+1;else if(a>o&&(s.push(e.slice(o,a)),o=a),'"'!==(n=e.slice(a+1,a+2))&&"'"!==n)-1===(i=e.indexOf("]",a))&&(i=e.length),s.push(e.slice(o+1,i)),o="."===e.slice(i+1,i+2)?i+2:i+1;else{for(-1===(i=e.indexOf(n+"]",a))&&(i=e.length);"\\"===e.slice(i-1,i)&&a<e.length;)a++,i=e.indexOf(n+"]",a);s.push(e.slice(o+2,i).replace(r[n],n)),o="."===e.slice(i+2,i+3)?i+3:i+2}return s},stringify:function(e,t){return Array.isArray(e)||(e=[e.toString()]),t='"'===t?'"':"'",e.map(function(e){return"["+t+e.toString().replace(new RegExp(t,"g"),"\\"+t)+t+"]"}).join("")},normalize:function(e,t){return a.stringify(Array.isArray(e)?e:a.parse(e),t)},registerModule:function(e){e.module("ObjectPath",[]).provider("ObjectPath",function(){this.parse=a.parse,this.stringify=a.stringify,this.normalize=a.normalize,this.$get=function(){return a}})}},t.ObjectPath=a}),q=(V.ObjectPath,V.ObjectPath),H={boolean:["checkbox"],object:["fieldset"],array:["checkboxes","array"],number:["number"],string:["date","select","text"]},U=function(e){var t=[];return a.each(e,function(e){t.push({text:e,value:e})}),t},B={checkbox:function(e,t){"boolean"===t.type&&(t.default=!1,e.type="checkbox")},fieldset:function(e,t,r){var n=this,i=t.type,s=r.parentType;if(delete r.parentType,delete r.col,"object"===i){if(s&&"array"===s){var l=a.size(t.properties),c=l>4?"v-fieldset":"inline";e.type=c,"inline"===c&&(r.col=Math.floor(12/l))}else e.type="v-fieldset";e.items=[],a.each(t.properties,function(i,s){/\./.test(s)&&(s=[s]);var l=r.path.slice();l.push(s);var c=t.required&&-1!==a.indexOf(t.required,s);n._parse(s,i,e.items,o({},r,{path:l,required:c,lookup:r.lookup}))})}},checkboxes:function(e,t){"array"===t.type&&t.items&&t.items.enum&&(e.type="checkboxes",e.options=U(t.items.enum),e.required&&!t.minItems&&(t.minItems=1))},array:function(e,t,r){var a=t.type;if(delete r.parentType,delete r.col,"array"===a){e.type="array",e.items=[];var n=r.path.slice();n.push("$index"),this._parse("",t.items,e.items,{path:n,lookup:r.lookup,parentType:"array"})}},number:function(e,t){"number"===t.type&&(e.type="number")},date:function(e,t){var r=t.type,a=t.format;"string"===r&&a&&"date,date-time,time".indexOf(a)>-1&&(e.type="date")},select:function(e,t){"string"===t.type&&t.enum&&(e.type="v-select",e.options=U(t.enum))},text:function(e,t){"string"===t.type&&(e.type="v-text")}},Q=["text","select","textarea","html","grid","fieldset"],J=function(){function e(){n(this,e),this.rules={},this.init()}return i(e,[{key:"init",value:function(){var e={};a.each(H,function(t,r){e[r]=t.map(function(e){return B[e]})}),this.rules=e}},{key:"addRule",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=this.rules[e];if(!a)throw new Error("不支持的类型: "+e);a.splice(r,0,t)}},{key:"parse",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e&&e.properties)throw new Error("schema no validate!");var n={path:[],lookup:{}},i=[];return a.each(e.properties,function(r,o){var s=e.required&&-1!==a.indexOf(e.required,o);t._parse(o,r,i,{path:[o],required:s,lookup:n.lookup})}),r=r.length?function e(t,r,n){var i=a.indexOf(t,"*");if(0===i)return r;if(-1!==i)return t=t.slice(0,i).concat(r).concat(t.slice(i+1));var o=[];a.each(t,function(t){"string"==typeof t&&(t={key:t}),t.key&&"string"==typeof t.key&&(t.key=t.key.replace(/\[\]/g,".$index"),t.key=q.parse(t.key));var i=void 0;if(t.key){var s=q.stringify(t.key);(i=n[s])&&a.each(i,function(e,r){void 0===t[r]&&(t[r]=e)})}a.indexOf(Q,t.type)>-1&&(t.type="v-"+t.type),t.items&&(t.items=e(t.items,i?i.items:r,n)),o.push(t)});return o}(r,i,n.lookup):i}},{key:"_parse",value:function(e,t,r,a){var n=this.rules[t.type],i=void 0;if(n){i=function(e,t,r){var a={key:r.path};return a.title=void 0!==t.title?t.title:e,t.description&&(a.description=t.description),r.required&&(a.required=!0),r.col&&(a.col=r.col),r.lookup[q.stringify(r.path)]=a,a}(e,t,a);for(var o=0,s=n.length;o<s&&(n[o].call(this,i,t,a),!i.type);o++);}r.push(i)}},{key:"getDefaultModal",value:function(e){var t={};return a.each(e.properties,function(e,r){!function e(t,r,n){var i=t.type;"object"===i?(n[r]={},a.each(t.properties,function(t,r){e(t,r,n[r])})):"array"===i?(n[r]=[],e(t.items,0,n[r])):t.default&&(n[r]=t.default)}(e,r,t)}),t}}]),e}();var X=h(function(e,t){!function(e){function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var a=t.length-1,n=1;n<a;++n)t[n]=t[n].slice(1,-1);return t[a]=t[a].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function a(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function n(e){return e.toUpperCase()}function i(e){var a=t("[0-9]","[A-Fa-f]"),n=r(r("%[EFef]"+a+"%"+a+a+"%"+a+a)+"|"+r("%[89A-Fa-f]"+a+"%"+a+a)+"|"+r("%"+a+a)),i="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",o=t("[\\:\\/\\?\\#\\[\\]\\@]",i),s=e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",l=e?"[\\uE000-\\uF8FF]":"[]",c=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",s),u=(r("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),r(r(n+"|"+t(c,i,"[\\:]"))+"*")),d=(r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("[1-9][0-9]")+"|[0-9]"),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?[0-9]")),h=r(d+"\\."+d+"\\."+d+"\\."+d),p=r(a+"{1,4}"),f=r(r(p+"\\:"+p)+"|"+h),m=r(r(p+"\\:")+"{6}"+f),v=r("\\:\\:"+r(p+"\\:")+"{5}"+f),g=r(r(p)+"?\\:\\:"+r(p+"\\:")+"{4}"+f),y=r(r(r(p+"\\:")+"{0,1}"+p)+"?\\:\\:"+r(p+"\\:")+"{3}"+f),b=r(r(r(p+"\\:")+"{0,2}"+p)+"?\\:\\:"+r(p+"\\:")+"{2}"+f),w=r(r(r(p+"\\:")+"{0,3}"+p)+"?\\:\\:"+p+"\\:"+f),P=r(r(r(p+"\\:")+"{0,4}"+p)+"?\\:\\:"+f),x=r(r(r(p+"\\:")+"{0,5}"+p)+"?\\:\\:"+p),E=r(r(r(p+"\\:")+"{0,6}"+p)+"?\\:\\:"),D=r([m,v,g,y,b,w,P,x,E].join("|")),_=r(r(c+"|"+n)+"+"),S=(r(D+"\\%25"+_),r(D+r("\\%25|\\%(?!"+a+"{2})")+_)),k=r("[vV]"+a+"+\\."+t(c,i,"[\\:]")+"+"),C=r("\\["+r(S+"|"+D+"|"+k)+"\\]"),O=r(r(n+"|"+t(c,i))+"*"),A=r(C+"|"+h+"(?!"+O+")|"+O),F=r("[0-9]*"),$=(r(r(u+"@")+"?"+A+r("\\:"+F)+"?"),r(n+"|"+t(c,i,"[\\:\\@]"))),T=r($+"*"),R=r($+"+"),I=r(r(n+"|"+t(c,i,"[\\@]"))+"+"),M=r(r("\\/"+T)+"*"),j=r("\\/"+r(R+M)+"?"),N=r(I+M),z=r(R+M),Y="(?!"+$+")";return r(M+"|"+j+"|"+N+"|"+z+"|"+Y),r(r($+"|"+t("[\\/\\?]",l))+"*"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",c,i),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",c,i),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",c,i),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",c,i),"g"),NOT_QUERY:new RegExp(t("[^\\%]",c,i,"[\\:\\@\\/\\?]",l),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",c,i,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",c,i),"g"),UNRESERVED:new RegExp(c,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",c,o),"g"),PCT_ENCODED:new RegExp(n,"g"),IPV4ADDRESS:new RegExp("^("+h+")$"),IPV6ADDRESS:new RegExp("^\\[?("+D+")"+r(r("\\%25|\\%(?!"+a+"{2})")+"("+_+")")+"?\\]?$")}}var o=i(!1),s=i(!0),l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){n=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,u=/^xn--/,d=/[^\0-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,m=String.fromCharCode;function v(e){throw new RangeError(p[e])}function g(e,t){var r=e.split("@"),a="";r.length>1&&(a=r[0]+"@",e=r[1]);var n=(e=e.replace(h,".")).split("."),i=function(e,t){for(var r=[],a=e.length;a--;)r[a]=t(e[a]);return r}(n,t).join(".");return a+i}function y(e){for(var t=[],r=0,a=e.length;r<a;){var n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<a){var i=e.charCodeAt(r++);56320==(64512&i)?t.push(((1023&n)<<10)+(1023&i)+65536):(t.push(n),r--)}else t.push(n)}return t}var b=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},w=function(e,t,r){var a=0;for(e=r?f(e/700):e>>1,e+=f(e/t);e>455;a+=36)e=f(e/35);return f(a+36*e/(e+38))},P=function(e){var t,r=[],a=e.length,n=0,i=128,o=72,s=e.lastIndexOf("-");s<0&&(s=0);for(var l=0;l<s;++l)e.charCodeAt(l)>=128&&v("not-basic"),r.push(e.charCodeAt(l));for(var u=s>0?s+1:0;u<a;){for(var d=n,h=1,p=36;;p+=36){u>=a&&v("invalid-input");var m=(t=e.charCodeAt(u++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(m>=36||m>f((c-n)/h))&&v("overflow"),n+=m*h;var g=p<=o?1:p>=o+26?26:p-o;if(m<g)break;var y=36-g;h>f(c/y)&&v("overflow"),h*=y}var b=r.length+1;o=w(n-d,b,0==d),f(n/b)>c-i&&v("overflow"),i+=f(n/b),n%=b,r.splice(n++,0,i)}return String.fromCodePoint.apply(String,r)},x=function(e){var t=[],r=(e=y(e)).length,a=128,n=0,i=72,o=!0,s=!1,l=void 0;try{for(var u,d=e[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var h=u.value;h<128&&t.push(m(h))}}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}var p=t.length,g=p;for(p&&t.push("-");g<r;){var P=c,x=!0,E=!1,D=void 0;try{for(var _,S=e[Symbol.iterator]();!(x=(_=S.next()).done);x=!0){var k=_.value;k>=a&&k<P&&(P=k)}}catch(e){E=!0,D=e}finally{try{!x&&S.return&&S.return()}finally{if(E)throw D}}var C=g+1;P-a>f((c-n)/C)&&v("overflow"),n+=(P-a)*C,a=P;var O=!0,A=!1,F=void 0;try{for(var $,T=e[Symbol.iterator]();!(O=($=T.next()).done);O=!0){var R=$.value;if(R<a&&++n>c&&v("overflow"),R==a){for(var I=n,M=36;;M+=36){var j=M<=i?1:M>=i+26?26:M-i;if(I<j)break;var N=I-j,z=36-j;t.push(m(b(j+N%z,0))),I=f(N/z)}t.push(m(b(I,0))),i=w(n,C,g==p),n=0,++g}}}catch(e){A=!0,F=e}finally{try{!O&&T.return&&T.return()}finally{if(A)throw F}}++n,++a}return t.join("")},E={version:"2.1.0",ucs2:{decode:y,encode:function(e){return String.fromCodePoint.apply(String,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))}},decode:P,encode:x,toASCII:function(e){return g(e,function(e){return d.test(e)?"xn--"+x(e):e})},toUnicode:function(e){return g(e,function(e){return u.test(e)?P(e.slice(4).toLowerCase()):e})}},D={};function _(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function S(e){for(var t="",r=0,a=e.length;r<a;){var n=parseInt(e.substr(r+1,2),16);if(n<128)t+=String.fromCharCode(n),r+=3;else if(n>=194&&n<224){if(a-r>=6){var i=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&n)<<6|63&i)}else t+=e.substr(r,6);r+=6}else if(n>=224){if(a-r>=9){var o=parseInt(e.substr(r+4,2),16),s=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&s)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function k(e,t){function r(e){var r=S(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,_).replace(t.PCT_ENCODED,n)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,_).replace(t.PCT_ENCODED,n)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,_).replace(t.PCT_ENCODED,n)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,_).replace(t.PCT_ENCODED,n)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,_).replace(t.PCT_ENCODED,n)),e}function C(e){return e.replace(/^0*(.*)/,"$1")||"0"}function O(e,t){var r=e.match(t.IPV4ADDRESS)||[],a=l(r,2),n=a[1];return n?n.split(".").map(C).join("."):e}function A(e,t){var r=e.match(t.IPV6ADDRESS)||[],a=l(r,3),n=a[1],i=a[2];if(n){for(var o=n.toLowerCase().split("::").reverse(),s=l(o,2),c=s[0],u=s[1],d=u?u.split(":").map(C):[],h=c.split(":").map(C),p=t.IPV4ADDRESS.test(h[h.length-1]),f=p?7:8,m=h.length-f,v=Array(f),g=0;g<f;++g)v[g]=d[g]||h[m+g]||"";p&&(v[f-1]=O(v[f-1],t));var y=v.reduce(function(e,t,r){if(!t||"0"===t){var a=e[e.length-1];a&&a.index+a.length===r?a.length++:e.push({index:r,length:1})}return e},[]),b=y.sort(function(e,t){return t.length-e.length})[0],w=void 0;if(b&&b.length>1){var P=v.slice(0,b.index),x=v.slice(b.index+b.length);w=P.join(":")+"::"+x.join(":")}else w=v.join(":");return i&&(w+="%"+i),w}return e}var F=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,$=void 0==="".match(/(){0}/)[1];function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},a=!1!==t.iri?s:o;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var n=e.match(F);if(n){$?(r.scheme=n[1],r.userinfo=n[3],r.host=n[4],r.port=parseInt(n[5],10),r.path=n[6]||"",r.query=n[7],r.fragment=n[8],isNaN(r.port)&&(r.port=n[5])):(r.scheme=n[1]||void 0,r.userinfo=-1!==e.indexOf("@")?n[3]:void 0,r.host=-1!==e.indexOf("//")?n[4]:void 0,r.port=parseInt(n[5],10),r.path=n[6]||"",r.query=-1!==e.indexOf("?")?n[7]:void 0,r.fragment=-1!==e.indexOf("#")?n[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?n[4]:void 0)),r.host&&(r.host=A(O(r.host,a),a)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var i=D[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||i&&i.unicodeSupport)k(r,a);else{if(r.host&&(t.domainHost||i&&i.domainHost))try{r.host=E.toASCII(r.host.replace(a.PCT_ENCODED,S).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}k(r,o)}i&&i.parse&&i.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}var R=/^\.\.?\//,I=/^\/\.(\/|$)/,M=/^\/\.\.(\/|$)/,j=/^\/?(?:.|\n)*?(?=\/|$)/;function N(e){for(var t=[];e.length;)if(e.match(R))e=e.replace(R,"");else if(e.match(I))e=e.replace(I,"/");else if(e.match(M))e=e.replace(M,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(j);if(!r)throw new Error("Unexpected dot segment condition");var a=r[0];e=e.slice(a.length),t.push(a)}return t.join("")}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?s:o,a=[],n=D[(t.scheme||e.scheme||"").toLowerCase()];if(n&&n.serialize&&n.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||n&&n.domainHost)try{e.host=t.iri?E.toUnicode(e.host):E.toASCII(e.host.replace(r.PCT_ENCODED,S).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}k(e,r),"suffix"!==t.reference&&e.scheme&&(a.push(e.scheme),a.push(":"));var i=function(e,t){var r=!1!==t.iri?s:o,a=[];return void 0!==e.userinfo&&(a.push(e.userinfo),a.push("@")),void 0!==e.host&&a.push(A(O(String(e.host),r),r).replace(r.IPV6ADDRESS,function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"})),"number"==typeof e.port&&(a.push(":"),a.push(e.port.toString(10))),a.length?a.join(""):void 0}(e,t);if(void 0!==i&&("suffix"!==t.reference&&a.push("//"),a.push(i),e.path&&"/"!==e.path.charAt(0)&&a.push("/")),void 0!==e.path){var l=e.path;t.absolutePath||n&&n.absolutePath||(l=N(l)),void 0===i&&(l=l.replace(/^\/\//,"/%2F")),a.push(l)}return void 0!==e.query&&(a.push("?"),a.push(e.query)),void 0!==e.fragment&&(a.push("#"),a.push(e.fragment)),a.join("")}function Y(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments[3],n={};return a||(e=T(z(e,r),r),t=T(z(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(n.scheme=t.scheme,n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=N(t.path||""),n.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=N(t.path||""),n.query=t.query):(t.path?("/"===t.path.charAt(0)?n.path=N(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?n.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:n.path=t.path:n.path="/"+t.path,n.path=N(n.path)),n.query=t.query):(n.path=e.path,void 0!==t.query?n.query=t.query:n.query=e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=t.fragment,n}function L(e,t){return e&&e.toString().replace(t&&t.iri?s.PCT_ENCODED:o.PCT_ENCODED,S)}var V={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},q={scheme:"https",domainHost:V.domainHost,parse:V.parse,serialize:V.serialize},H={},U="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",B="[0-9A-Fa-f]",Q=r(r("%[EFef][0-9A-Fa-f]%"+B+B+"%"+B+B)+"|"+r("%[89A-Fa-f][0-9A-Fa-f]%"+B+B)+"|"+r("%"+B+B)),J=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),X=new RegExp(U,"g"),K=new RegExp(Q,"g"),W=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',J),"g"),Z=new RegExp(t("[^]",U,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),G=Z;function ee(e){var t=S(e);return t.match(X)?t:e}var te={scheme:"mailto",parse:function(e,t){var r=e,a=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var n=!1,i={},o=r.query.split("&"),s=0,l=o.length;s<l;++s){var c=o[s].split("=");switch(c[0]){case"to":for(var u=c[1].split(","),d=0,h=u.length;d<h;++d)a.push(u[d]);break;case"subject":r.subject=L(c[1],t);break;case"body":r.body=L(c[1],t);break;default:n=!0,i[L(c[0],t)]=L(c[1],t)}}n&&(r.headers=i)}r.query=void 0;for(var p=0,f=a.length;p<f;++p){var m=a[p].split("@");if(m[0]=L(m[0]),t.unicodeSupport)m[1]=L(m[1],t).toLowerCase();else try{m[1]=E.toASCII(L(m[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}a[p]=m.join("@")}return r},serialize:function(e,t){var r,a=e,i=void 0!==(r=e.to)&&null!==r?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(i){for(var o=0,s=i.length;o<s;++o){var l=String(i[o]),c=l.lastIndexOf("@"),u=l.slice(0,c).replace(K,ee).replace(K,n).replace(W,_),d=l.slice(c+1);try{d=t.iri?E.toUnicode(d):E.toASCII(L(d,t).toLowerCase())}catch(e){a.error=a.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}i[o]=u+"@"+d}a.path=i.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var p=[];for(var f in h)h[f]!==H[f]&&p.push(f.replace(K,ee).replace(K,n).replace(Z,_)+"="+h[f].replace(K,ee).replace(K,n).replace(G,_));return p.length&&(a.query=p.join("&")),a}},re=/^([^\:]+)\:(.*)/,ae={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(re),a=e;if(r){var n=t.scheme||a.scheme||"urn",i=r[1].toLowerCase(),o=r[2],s=n+":"+(t.nid||i),l=D[s];a.nid=i,a.nss=o,a.path=void 0,l&&(a=l.parse(a,t))}else a.error=a.error||"URN can not be parsed.";return a},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",a=e.nid,n=r+":"+(t.nid||a),i=D[n];i&&(e=i.serialize(e,t));var o=e,s=e.nss;return o.path=(a||t.nid)+":"+s,o}},ne=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ie={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(ne)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};D[V.scheme]=V,D[q.scheme]=q,D[te.scheme]=te,D[ae.scheme]=ae,D[ie.scheme]=ie,e.SCHEMES=D,e.pctEncChar=_,e.pctDecChars=S,e.parse=T,e.removeDotSegments=N,e.serialize=z,e.resolveComponents=Y,e.resolve=function(e,t,r){var a=function(e,t){var r=e;if(t)for(var a in t)r[a]=t[a];return r}({scheme:"null"},r);return z(Y(T(e,a),T(t,a),a,!0),a)},e.normalize=function(e,t){return"string"==typeof e?e=z(T(e,t),t):"object"===a(e)&&(e=T(z(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=z(T(e,r),r):"object"===a(e)&&(e=z(e,r)),"string"==typeof t?t=z(T(t,r),r):"object"===a(t)&&(t=z(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?s.ESCAPE:o.ESCAPE,_)},e.unescapeComponent=L,Object.defineProperty(e,"__esModule",{value:!0})}(t)});d(X);var K=Array.isArray,W=Object.keys,Z=Object.prototype.hasOwnProperty,G=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){var a,n,i,o=K(t),s=K(r);if(o&&s){if((n=t.length)!=r.length)return!1;for(a=n;0!=a--;)if(!e(t[a],r[a]))return!1;return!0}if(o!=s)return!1;var l=t instanceof Date,c=r instanceof Date;if(l!=c)return!1;if(l&&c)return t.getTime()==r.getTime();var u=t instanceof RegExp,d=r instanceof RegExp;if(u!=d)return!1;if(u&&d)return t.toString()==r.toString();var h=W(t);if((n=h.length)!==W(r).length)return!1;for(a=n;0!=a--;)if(!Z.call(r,h[a]))return!1;for(a=n;0!=a--;)if(!e(t[i=h[a]],r[i]))return!1;return!0}return t!=t&&r!=r},ee={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:te,checkDataTypes:function(e,t){switch(e.length){case 1:return te(e[0],t,!0);default:var r="",a=ae(e);for(var n in a.array&&a.object&&(r=a.null?"(":"(!"+t+" || ",r+="typeof "+t+' !== "object")',delete a.null,delete a.array,delete a.object),a.number&&delete a.integer,a)r+=(r?" && ":"")+te(n,t,!0);return r}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],a=0;a<t.length;a++){var n=t[a];re[n]?r[r.length]=n:"array"===e&&"array"===n&&(r[r.length]=n)}if(r.length)return r}else{if(re[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:ae,getProperty:oe,escapeQuotes:se,equal:G,ucs2length:function(e){for(var t,r=0,a=e.length,n=0;n<a;)r++,(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<a&&56320==(64512&(t=e.charCodeAt(n)))&&n++;return r},varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},cleanUpCode:function(e){return e.replace(le,"").replace(ce,"").replace(ue,"if (!($1))")},finalCleanUpCode:function(e,t){var r=e.match(de);r&&2==r.length&&(e=t?e.replace(pe,"").replace(ve,ge):e.replace(he,"").replace(fe,me));return(r=e.match(ye))&&3===r.length?e.replace(be,""):e},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var a in e)if(a!=r&&t[a])return!0},toQuotedString:we,getPathExpr:function(e,t,r,a){return Ee(e,r?"'/' + "+t+(a?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):a?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var a=we(r?"/"+De(t):oe(t));return Ee(e,a)},getData:function(e,t,r){var a,n,i,o;if(""===e)return"rootData";if("/"==e[0]){if(!Pe.test(e))throw new Error("Invalid JSON-pointer: "+e);n=e,i="rootData"}else{if(!(o=e.match(xe)))throw new Error("Invalid JSON-pointer: "+e);if(a=+o[1],"#"==(n=o[2])){if(a>=t)throw new Error("Cannot access property/index "+a+" levels up, current level is "+t);return r[t-a]}if(a>t)throw new Error("Cannot access data "+a+" levels up, current level is "+t);if(i="data"+(t-a||""),!n)return i}for(var s=i,l=n.split("/"),c=0;c<l.length;c++){var u=l[c];u&&(i+=oe(_e(u)),s+=" && "+i)}return s},unescapeFragment:function(e){return _e(decodeURIComponent(e))},unescapeJsonPointer:_e,escapeFragment:function(e){return encodeURIComponent(De(e))},escapeJsonPointer:De};function te(e,t,r){var a=r?" !== ":" === ",n=r?" || ":" && ",i=r?"!":"",o=r?"":"!";switch(e){case"null":return t+a+"null";case"array":return i+"Array.isArray("+t+")";case"object":return"("+i+t+n+"typeof "+t+a+'"object"'+n+o+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+a+'"number"'+n+o+"("+t+" % 1)"+n+t+a+t+")";default:return"typeof "+t+a+'"'+e+'"'}}var re=ae(["string","number","integer","boolean","null"]);function ae(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var ne=/^[a-z$_][a-z$_0-9]*$/i,ie=/'|\\/g;function oe(e){return"number"==typeof e?"["+e+"]":ne.test(e)?"."+e:"['"+se(e)+"']"}function se(e){return e.replace(ie,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var le=/else\s*{\s*}/g,ce=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,ue=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;var de=/[^v.]errors/g,he=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,pe=/var errors = 0;|var vErrors = null;/g,fe="return errors === 0;",me="validate.errors = null; return true;",ve=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,ge="return data;",ye=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,be=/if \(rootData === undefined\) rootData = data;/;function we(e){return"'"+se(e)+"'"}var Pe=/^\/(?:[^~]|~0|~1)*$/,xe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Ee(e,t){return'""'==e?t:(e+" + "+t).replace(/' \+ '/g,"")}function De(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function _e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}var Se=function(e){ee.copy(e,this)};var ke=h(function(e){var t=e.exports=function(e,r,a){"function"==typeof r&&(a=r,r={}),function e(r,a,n,i,o,s,l,c,u,d){if(i&&"object"==typeof i&&!Array.isArray(i)){for(var h in a(i,o,s,l,c,u,d),i){var p=i[h];if(Array.isArray(p)){if(h in t.arrayKeywords)for(var f=0;f<p.length;f++)e(r,a,n,p[f],o+"/"+h+"/"+f,s,o,h,i,f)}else if(h in t.propsKeywords){if(p&&"object"==typeof p)for(var m in p)e(r,a,n,p[m],o+"/"+h+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),s,o,h,i,m)}else(h in t.keywords||r.allKeys&&!(h in t.skipKeywords))&&e(r,a,n,p,o+"/"+h,s,o,h,i)}n(i,o,s,l,c,u,d)}}(r,"function"==typeof(a=r.cb||a)?a:a.pre||function(){},a.post||function(){},e,"",e)};t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}}),Ce=Oe;function Oe(e,t,r){var a=this._refs[r];if("string"==typeof a){if(!this._refs[a])return Oe.call(this,e,t,a);a=this._refs[a]}if((a=a||this._schemas[r])instanceof Se)return Re(a.schema,this._opts.inlineRefs)?a.schema:a.validate||this._compile(a);var n,i,o,s=Ae.call(this,t,r);return s&&(n=s.schema,t=s.root,o=s.baseId),n instanceof Se?i=n.validate||e.call(this,n.schema,t,void 0,o):void 0!==n&&(i=Re(n,this._opts.inlineRefs)?n:e.call(this,n,t,void 0,o)),i}function Ae(e,t){var r=X.parse(t),a=Me(r),n=Ie(this._getId(e.schema));if(0===Object.keys(e.schema).length||a!==n){var i=Ne(a),o=this._refs[i];if("string"==typeof o)return function(e,t,r){var a=Ae.call(this,e,t);if(a){var n=a.schema,i=a.baseId;e=a.root;var o=this._getId(n);return o&&(i=ze(i,o)),$e.call(this,r,i,n,e)}}.call(this,e,o,r);if(o instanceof Se)o.validate||this._compile(o),e=o;else{if(!((o=this._schemas[i])instanceof Se))return;if(o.validate||this._compile(o),i==Ne(t))return{schema:o,root:e,baseId:n};e=o}if(!e.schema)return;n=Ie(this._getId(e.schema))}return $e.call(this,r,n,e.schema,e)}Oe.normalizeId=Ne,Oe.fullPath=Ie,Oe.url=ze,Oe.ids=function(e){var t=Ne(this._getId(e)),r={"":t},a={"":Ie(t,!1)},n={},i=this;return ke(e,{allKeys:!0},function(e,t,o,s,l,c,u){if(""!==t){var d=i._getId(e),h=r[s],p=a[s]+"/"+l;if(void 0!==u&&(p+="/"+("number"==typeof u?u:ee.escapeFragment(u))),"string"==typeof d){d=h=Ne(h?X.resolve(h,d):d);var f=i._refs[d];if("string"==typeof f&&(f=i._refs[f]),f&&f.schema){if(!G(e,f.schema))throw new Error('id "'+d+'" resolves to more than one schema')}else if(d!=Ne(p))if("#"==d[0]){if(n[d]&&!G(e,n[d]))throw new Error('id "'+d+'" resolves to more than one schema');n[d]=e}else i._refs[d]=p}r[t]=h,a[t]=p}}),n},Oe.inlineRef=Re,Oe.schema=Ae;var Fe=ee.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function $e(e,t,r,a){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var n=e.fragment.split("/"),i=1;i<n.length;i++){var o=n[i];if(o){if(void 0===(r=r[o=ee.unescapeFragment(o)]))break;var s;if(!Fe[o]&&((s=this._getId(r))&&(t=ze(t,s)),r.$ref)){var l=ze(t,r.$ref),c=Ae.call(this,a,l);c&&(r=c.schema,a=c.root,t=c.baseId)}}}return void 0!==r&&r!==a.schema?{schema:r,root:a,baseId:t}:void 0}}var Te=ee.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function Re(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var a=0;a<t.length;a++)if("object"==typeof(r=t[a])&&!e(r))return!1}else for(var n in t){if("$ref"==n)return!1;if("object"==typeof(r=t[n])&&!e(r))return!1}return!0}(e):t?function e(t){var r,a=0;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if("object"==typeof(r=t[n])&&(a+=e(r)),a==1/0)return 1/0}else for(var i in t){if("$ref"==i)return 1/0;if(Te[i])a++;else if("object"==typeof(r=t[i])&&(a+=e(r)+1),a==1/0)return 1/0}return a}(e)<=t:void 0)}function Ie(e,t){return!1!==t&&(e=Ne(e)),Me(X.parse(e))}function Me(e){return X.serialize(e).split("#")[0]+"#"}var je=/#\/?$/;function Ne(e){return e?e.replace(je,""):""}function ze(e,t){return t=Ne(t),X.resolve(e,t)}var Ye={Validation:Ve(function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}),MissingRef:Ve(Le)};function Le(e,t,r){this.message=r||Le.message(e,t),this.missingRef=Ce.url(e,t),this.missingSchema=Ce.normalizeId(Ce.fullPath(this.missingRef))}function Ve(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}Le.message=function(e,t){return"can't resolve reference "+t+" from id "+e};var qe=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,a="boolean"==typeof t.cycles&&t.cycles,n=t.cmp&&(r=t.cmp,function(e){return function(t,a){var n={key:t,value:e[t]},i={key:a,value:e[a]};return r(n,i)}}),i=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,o;if(Array.isArray(t)){for(o="[",r=0;r<t.length;r++)r&&(o+=","),o+=e(t[r])||"null";return o+"]"}if(null===t)return"null";if(-1!==i.indexOf(t)){if(a)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=i.push(t)-1,l=Object.keys(t).sort(n&&n(t));for(o="",r=0;r<l.length;r++){var c=l[r],u=e(t[c]);u&&(o&&(o+=","),o+=JSON.stringify(c)+":"+u)}return i.splice(s,1),"{"+o+"}"}}(e)},He=function(e,t,r){var a="",n=!0===e.schema.$async,i=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),o=e.self._getId(e.schema);if(e.isTop&&(a+=" var validate = ",n&&(e.async=!0,a+="async "),a+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",o&&(e.opts.sourceCode||e.opts.processCode)&&(a+=" /*# sourceURL="+o+" */ ")),"boolean"==typeof e.schema||!i&&!e.schema.$ref){var s=e.level,l=e.dataLevel,c=e.schema["false schema"],u=e.schemaPath+e.util.getProperty("false schema"),d=e.errSchemaPath+"/false schema",h=!e.opts.allErrors,p="data"+(l||""),f="valid"+s;if(!1===e.schema){e.isTop?h=!0:a+=" var "+f+" = false; ",(K=K||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(g||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'boolean schema is false' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),a+=" } "):a+=" {} ";var m=a;a=K.pop(),!e.compositeRule&&h?e.async?a+=" throw new ValidationError(["+m+"]); ":a+=" validate.errors = ["+m+"]; return false; ":a+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?a+=n?" return data; ":" validate.errors = null; return true; ":a+=" var "+f+" = true; ";return e.isTop&&(a+=" }; return validate; "),a}if(e.isTop){var v=e.isTop;s=e.level=0,l=e.dataLevel=0,p="data";e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],a+=" var vErrors = null; ",a+=" var errors = 0;     ",a+=" if (rootData === undefined) rootData = data; "}else{s=e.level,p="data"+((l=e.dataLevel)||"");if(o&&(e.baseId=e.resolve.url(e.baseId,o)),n&&!e.async)throw new Error("async schema in sync schema");a+=" var errs_"+s+" = errors;"}f="valid"+s,h=!e.opts.allErrors;var g,y="",b="",w=e.schema.type,P=Array.isArray(w);if(w&&e.opts.nullable&&!0===e.schema.nullable&&(P?-1==w.indexOf("null")&&(w=w.concat("null")):"null"!=w&&(w=[w,"null"],P=!0)),P&&1==w.length&&(w=w[0],P=!1),e.schema.$ref&&i){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(i=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(a+=" "+e.RULES.all.$comment.code(e,"$comment")),w){if(e.opts.coerceTypes)var x=e.util.coerceToTypes(e.opts.coerceTypes,w);var E=e.RULES.types[w];if(x||P||!0===E||E&&!W(E)){u=e.schemaPath+".type",d=e.errSchemaPath+"/type",u=e.schemaPath+".type",d=e.errSchemaPath+"/type";var D=P?"checkDataTypes":"checkDataType";if(a+=" if ("+e.util[D](w,p,!0)+") { ",x){var _="dataType"+s,S="coerced"+s;a+=" var "+_+" = typeof "+p+"; ","array"==e.opts.coerceTypes&&(a+=" if ("+_+" == 'object' && Array.isArray("+p+")) "+_+" = 'array'; "),a+=" var "+S+" = undefined; ";var k="",C=x;if(C)for(var O,A=-1,F=C.length-1;A<F;)O=C[A+=1],A&&(a+=" if ("+S+" === undefined) { ",k+="}"),"array"==e.opts.coerceTypes&&"array"!=O&&(a+=" if ("+_+" == 'array' && "+p+".length == 1) { "+S+" = "+p+" = "+p+"[0]; "+_+" = typeof "+p+";  } "),"string"==O?a+=" if ("+_+" == 'number' || "+_+" == 'boolean') "+S+" = '' + "+p+"; else if ("+p+" === null) "+S+" = ''; ":"number"==O||"integer"==O?(a+=" if ("+_+" == 'boolean' || "+p+" === null || ("+_+" == 'string' && "+p+" && "+p+" == +"+p+" ","integer"==O&&(a+=" && !("+p+" % 1)"),a+=")) "+S+" = +"+p+"; "):"boolean"==O?a+=" if ("+p+" === 'false' || "+p+" === 0 || "+p+" === null) "+S+" = false; else if ("+p+" === 'true' || "+p+" === 1) "+S+" = true; ":"null"==O?a+=" if ("+p+" === '' || "+p+" === 0 || "+p+" === false) "+S+" = null; ":"array"==e.opts.coerceTypes&&"array"==O&&(a+=" if ("+_+" == 'string' || "+_+" == 'number' || "+_+" == 'boolean' || "+p+" == null) "+S+" = ["+p+"]; ");a+=" "+k+" if ("+S+" === undefined) {   ",(K=K||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(g||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",a+=P?""+w.join(","):""+w,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=P?""+w.join(","):""+w,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),a+=" } "):a+=" {} ";m=a;a=K.pop(),!e.compositeRule&&h?e.async?a+=" throw new ValidationError(["+m+"]); ":a+=" validate.errors = ["+m+"]; return false; ":a+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else {  ";var $=l?"data"+(l-1||""):"parentData",T=l?e.dataPathArr[l]:"parentDataProperty";a+=" "+p+" = "+S+"; ",l||(a+="if ("+$+" !== undefined)"),a+=" "+$+"["+T+"] = "+S+"; } "}else{(K=K||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(g||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",a+=P?""+w.join(","):""+w,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=P?""+w.join(","):""+w,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),a+=" } "):a+=" {} ";m=a;a=K.pop(),!e.compositeRule&&h?e.async?a+=" throw new ValidationError(["+m+"]); ":a+=" validate.errors = ["+m+"]; return false; ":a+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}a+=" } "}}if(e.schema.$ref&&!i)a+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",h&&(a+=" } if (errors === ",a+=v?"0":"errs_"+s,a+=") { ",b+="}");else{var R=e.RULES;if(R)for(var I=-1,M=R.length-1;I<M;)if(W(E=R[I+=1])){if(E.type&&(a+=" if ("+e.util.checkDataType(E.type,p)+") { "),e.opts.useDefaults&&!e.compositeRule)if("object"==E.type&&e.schema.properties){c=e.schema.properties;var j=Object.keys(c);if(j)for(var N,z=-1,Y=j.length-1;z<Y;){if(void 0!==(V=c[N=j[z+=1]]).default)a+="  if ("+(H=p+e.util.getProperty(N))+" === undefined ","empty"==e.opts.useDefaults&&(a+=" || "+H+" === null || "+H+" === '' "),a+=" ) "+H+" = ","shared"==e.opts.useDefaults?a+=" "+e.useDefault(V.default)+" ":a+=" "+JSON.stringify(V.default)+" ",a+="; "}}else if("array"==E.type&&Array.isArray(e.schema.items)){var L=e.schema.items;if(L){A=-1;for(var V,q=L.length-1;A<q;){var H;if(void 0!==(V=L[A+=1]).default)a+="  if ("+(H=p+"["+A+"]")+" === undefined ","empty"==e.opts.useDefaults&&(a+=" || "+H+" === null || "+H+" === '' "),a+=" ) "+H+" = ","shared"==e.opts.useDefaults?a+=" "+e.useDefault(V.default)+" ":a+=" "+JSON.stringify(V.default)+" ",a+="; "}}}var U=E.rules;if(U)for(var B,Q=-1,J=U.length-1;Q<J;)if(Z(B=U[Q+=1])){var X=B.code(e,B.keyword,E.type);X&&(a+=" "+X+" ",h&&(y+="}"))}if(h&&(a+=" "+y+" ",y=""),E.type&&(a+=" } ",w&&w===E.type&&!x)){a+=" else { ";var K;u=e.schemaPath+".type",d=e.errSchemaPath+"/type";(K=K||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(g||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",a+=P?""+w.join(","):""+w,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=P?""+w.join(","):""+w,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),a+=" } "):a+=" {} ";m=a;a=K.pop(),!e.compositeRule&&h?e.async?a+=" throw new ValidationError(["+m+"]); ":a+=" validate.errors = ["+m+"]; return false; ":a+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } "}h&&(a+=" if (errors === ",a+=v?"0":"errs_"+s,a+=") { ",b+="}")}}function W(e){for(var t=e.rules,r=0;r<t.length;r++)if(Z(t[r]))return!0}function Z(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,a=0;a<r.length;a++)if(void 0!==e.schema[r[a]])return!0}(t)}return h&&(a+=" "+b+" "),v?(n?(a+=" if (errors === 0) return data;           ",a+=" else throw new ValidationError(vErrors); "):(a+=" validate.errors = vErrors; ",a+=" return errors === 0;       "),a+=" }; return validate;"):a+=" var "+f+" = errors === errs_"+s+";",a=e.util.cleanUpCode(a),v&&(a=e.util.finalCleanUpCode(a,n)),a},Ue=ee.ucs2length,Be=Ye.Validation,Qe=function e(t,r,a,n){var i=this,o=this._opts,s=[void 0],l={},c=[],u={},d=[],h={},p=[];r=r||{schema:t,refVal:s,refs:l};var f=function(e,t,r){var a=Je.call(this,e,t,r);return a>=0?{index:a,compiling:!0}:(a=this._compilations.length,this._compilations[a]={schema:e,root:t,baseId:r},{index:a,compiling:!1})}.call(this,t,r,n);var m=this._compilations[f.index];if(f.compiling)return m.callValidate=function e(){var t=m.validate;var r=t.apply(this,arguments);e.errors=t.errors;return r};var v=this._formats;var g=this.RULES;try{var y=w(t,r,a,n);m.validate=y;var b=m.callValidate;return b&&(b.schema=y.schema,b.errors=null,b.refs=y.refs,b.refVal=y.refVal,b.root=y.root,b.$async=y.$async,o.sourceCode&&(b.source=y.source)),y}finally{(function(e,t,r){var a=Je.call(this,e,t,r);a>=0&&this._compilations.splice(a,1)}).call(this,t,r,n)}function w(t,a,n,u){var h=!a||a&&a.schema==t;if(a.schema!=r.schema)return e.call(i,t,a,n,u);var f,m=!0===t.$async,y=He({isTop:!0,schema:t,isRoot:h,baseId:u,root:a,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Ye.MissingRef,RULES:g,validate:He,util:ee,resolve:Ce,resolveRef:P,usePattern:D,useDefault:_,useCustomRule:S,opts:o,formats:v,logger:i.logger,self:i});y=Ge(s,We)+Ge(c,Xe)+Ge(d,Ke)+Ge(p,Ze)+y,o.processCode&&(y=o.processCode(y));try{var b=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",y);f=b(i,g,v,r,s,d,p,G,Ue,Be),s[0]=f}catch(e){throw i.logger.error("Error compiling schema, function code:",y),e}return f.schema=t,f.errors=null,f.refs=l,f.refVal=s,f.root=h?f:a,m&&(f.$async=!0),!0===o.sourceCode&&(f.source={code:y,patterns:c,defaults:d}),f}function P(t,n,c){n=Ce.url(t,n);var u,d,h=l[n];if(void 0!==h)return E(u=s[h],d="refVal["+h+"]");if(!c&&r.refs){var p=r.refs[n];if(void 0!==p)return u=r.refVal[p],d=x(n,u),E(u,d)}d=x(n);var f=Ce.call(i,w,r,n);if(void 0===f){var m=a&&a[n];m&&(f=Ce.inlineRef(m,o.inlineRefs)?m:e.call(i,m,r,a,t))}if(void 0!==f)return function(e,t){var r=l[e];s[r]=t}(n,f),E(f,d);!function(e){delete l[e]}(n)}function x(e,t){var r=s.length;return s[r]=t,l[e]=r,"refVal"+r}function E(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function D(e){var t=u[e];return void 0===t&&(t=u[e]=c.length,c[t]=e),"pattern"+t}function _(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return ee.toQuotedString(e);case"object":if(null===e)return"null";var t=qe(e),r=h[t];return void 0===r&&(r=h[t]=d.length,d[r]=e),"default"+r}}function S(e,t,r,a){var n=e.definition.validateSchema;if(n&&!1!==i._opts.validateSchema){var s=n(t);if(!s){var l="keyword schema is invalid: "+i.errorsText(n.errors);if("log"!=i._opts.validateSchema)throw new Error(l);i.logger.error(l)}}var c,u=e.definition.compile,d=e.definition.inline,h=e.definition.macro;if(u)c=u.call(i,t,r,a);else if(h)c=h.call(i,t,r,a),!1!==o.validateSchema&&i.validateSchema(c,!0);else if(d)c=d.call(i,a,e.keyword,t,r);else if(!(c=e.definition.validate))return;if(void 0===c)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var f=p.length;return p[f]=c,{code:"customRule"+f,validate:c}}};function Je(e,t,r){for(var a=0;a<this._compilations.length;a++){var n=this._compilations[a];if(n.schema==e&&n.root==t&&n.baseId==r)return a}return-1}function Xe(e,t){return"var pattern"+e+" = new RegExp("+ee.toQuotedString(t[e])+");"}function Ke(e){return"var default"+e+" = defaults["+e+"];"}function We(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function Ze(e){return"var customRule"+e+" = customRules["+e+"];"}function Ge(e,t){if(!e.length)return"";for(var r="",a=0;a<e.length;a++)r+=t(a,e);return r}var et=h(function(e){var t=e.exports=function(){this._cache={}};t.prototype.put=function(e,t){this._cache[e]=t},t.prototype.get=function(e){return this._cache[e]},t.prototype.del=function(e){delete this._cache[e]},t.prototype.clear=function(){this._cache={}}}),tt=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,rt=[0,31,28,31,30,31,30,31,31,30,31,30,31],at=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,nt=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,it=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,ot=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,st=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,lt=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,ct=/^(?:\/(?:[^~/]|~0|~1)*)*$/,ut=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,dt=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,ht=pt;function pt(e){return e="full"==e?"full":"fast",ee.copy(pt[e])}function ft(e){var t=e.match(tt);if(!t)return!1;var r=+t[1],a=+t[2],n=+t[3];return a>=1&&a<=12&&n>=1&&n<=(2==a&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:rt[a])}function mt(e,t){var r=e.match(at);if(!r)return!1;var a=r[1],n=r[2],i=r[3],o=r[5];return(a<=23&&n<=59&&i<=59||23==a&&59==n&&60==i)&&(!t||o)}pt.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":ot,url:st,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:nt,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:bt,uuid:lt,"json-pointer":ct,"json-pointer-uri-fragment":ut,"relative-json-pointer":dt},pt.full={date:ft,time:mt,"date-time":function(e){var t=e.split(vt);return 2==t.length&&ft(t[0])&&mt(t[1],!0)},uri:function(e){return gt.test(e)&&it.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":ot,url:st,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:function(e){return e.length<=255&&nt.test(e)},ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:bt,uuid:lt,"json-pointer":ct,"json-pointer-uri-fragment":ut,"relative-json-pointer":dt};var vt=/t|\s/i;var gt=/\/|:/;var yt=/[^\\]\\Z/;function bt(e){if(yt.test(e))return!1;try{return!0}catch(e){return!1}}var wt=function(e,t,r){var a,n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),h=e.opts.$data&&s&&s.$data;h?(n+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",a="schema"+i):a=s;var p="maximum"==t,f=p?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[f],v=e.opts.$data&&m&&m.$data,g=p?"<":">",y=p?">":"<",b=void 0;if(v){var w=e.util.getData(m.$data,o,e.dataPathArr),P="exclusive"+i,x="exclType"+i,E="exclIsNumber"+i,D="' + "+(k="op"+i)+" + '";n+=" var schemaExcl"+i+" = "+w+"; ",n+=" var "+P+"; var "+x+" = typeof "+(w="schemaExcl"+i)+"; if ("+x+" != 'boolean' && "+x+" != 'undefined' && "+x+" != 'number') { ";var _;b=f;(_=_||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: '"+f+" should be boolean' "),e.opts.verbose&&(n+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var S=n;n=_.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+S+"]); ":n+=" validate.errors = ["+S+"]; return false; ":n+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else if ( ",h&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),n+=" "+x+" == 'number' ? ( ("+P+" = "+a+" === undefined || "+w+" "+g+"= "+a+") ? "+d+" "+y+"= "+w+" : "+d+" "+y+" "+a+" ) : ( ("+P+" = "+w+" === true) ? "+d+" "+y+"= "+a+" : "+d+" "+y+" "+a+" ) || "+d+" !== "+d+") { var op"+i+" = "+P+" ? '"+g+"' : '"+g+"='; ",void 0===s&&(b=f,c=e.errSchemaPath+"/"+f,a=w,h=v)}else{D=g;if((E="number"==typeof m)&&h){var k="'"+D+"'";n+=" if ( ",h&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),n+=" ( "+a+" === undefined || "+m+" "+g+"= "+a+" ? "+d+" "+y+"= "+m+" : "+d+" "+y+" "+a+" ) || "+d+" !== "+d+") { "}else{E&&void 0===s?(P=!0,b=f,c=e.errSchemaPath+"/"+f,a=m,y+="="):(E&&(a=Math[p?"min":"max"](m,s)),m===(!E||a)?(P=!0,b=f,c=e.errSchemaPath+"/"+f,y+="="):(P=!1,D+="="));k="'"+D+"'";n+=" if ( ",h&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),n+=" "+d+" "+y+" "+a+" || "+d+" !== "+d+") { "}}b=b||t,(_=_||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+k+", limit: "+a+", exclusive: "+P+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be "+D+" ",n+=h?"' + "+a:a+"'"),e.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";S=n;return n=_.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+S+"]); ":n+=" validate.errors = ["+S+"]; return false; ":n+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u&&(n+=" else { "),n},Pt=function(e,t,r){var a,n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),h=e.opts.$data&&s&&s.$data;h?(n+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",a="schema"+i):a=s,n+="if ( ",h&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),n+=" "+d+".length "+("maxItems"==t?">":"<")+" "+a+") { ";var p=t,f=f||[];f.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(p||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have ",n+="maxItems"==t?"more":"fewer",n+=" than ",n+=h?"' + "+a+" + '":""+s,n+=" items' "),e.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var m=n;return n=f.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n},xt=function(e,t,r){var a,n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),h=e.opts.$data&&s&&s.$data;h?(n+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",a="schema"+i):a=s;var p="maxLength"==t?">":"<";n+="if ( ",h&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),!1===e.opts.unicode?n+=" "+d+".length ":n+=" ucs2length("+d+") ",n+=" "+p+" "+a+") { ";var f=t,m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(f||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be ",n+="maxLength"==t?"longer":"shorter",n+=" than ",n+=h?"' + "+a+" + '":""+s,n+=" characters' "),e.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var v=n;return n=m.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n},Et=function(e,t,r){var a,n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),h=e.opts.$data&&s&&s.$data;h?(n+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",a="schema"+i):a=s,n+="if ( ",h&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),n+=" Object.keys("+d+").length "+("maxProperties"==t?">":"<")+" "+a+") { ";var p=t,f=f||[];f.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(p||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have ",n+="maxProperties"==t?"more":"fewer",n+=" than ",n+=h?"' + "+a+" + '":""+s,n+=" properties' "),e.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var m=n;return n=f.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n},Dt={$ref:function(e,t,r){var a,n,i=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h="valid"+o;if("#"==l||"#/"==l)e.isRoot?(a=e.async,n="validate"):(a=!0===e.root.schema.$async,n="root.refVal[0]");else{var p=e.resolveRef(e.baseId,l,e.isRoot);if(void 0===p){var f=e.MissingRefError.message(e.baseId,l);if("fail"==e.opts.missingRefs){e.logger.error(f),(y=y||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",!1!==e.opts.messages&&(i+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(i+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var m=i;i=y.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(i+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,l,f);e.logger.warn(f),u&&(i+=" if (true) { ")}}else if(p.inline){var v=e.util.copy(e);v.level++;var g="valid"+v.level;v.schema=p.schema,v.schemaPath="",v.errSchemaPath=l,i+=" "+e.validate(v).replace(/validate\.schema/g,p.code)+" ",u&&(i+=" if ("+g+") { ")}else a=!0===p.$async||e.async&&!1!==p.$async,n=p.code}if(n){var y;(y=y||[]).push(i),i="",e.opts.passContext?i+=" "+n+".call(this, ":i+=" "+n+"( ",i+=" "+d+", (dataPath || '')",'""'!=e.errorPath&&(i+=" + "+e.errorPath);var b=i+=" , "+(s?"data"+(s-1||""):"parentData")+" , "+(s?e.dataPathArr[s]:"parentDataProperty")+", rootData)  ";if(i=y.pop(),a){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(i+=" var "+h+"; "),i+=" try { await "+b+"; ",u&&(i+=" "+h+" = true; "),i+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(i+=" "+h+" = false; "),i+=" } ",u&&(i+=" if ("+h+") { ")}else i+=" if (!"+b+") { if (vErrors === null) vErrors = "+n+".errors; else vErrors = vErrors.concat("+n+".errors); errors = vErrors.length; } ",u&&(i+=" else { ")}return i},allOf:function(e,t,r){var a=" ",n=e.schema[t],i=e.schemaPath+e.util.getProperty(t),o=e.errSchemaPath+"/"+t,s=!e.opts.allErrors,l=e.util.copy(e),c="";l.level++;var u="valid"+l.level,d=l.baseId,h=!0,p=n;if(p)for(var f,m=-1,v=p.length-1;m<v;)f=p[m+=1],e.util.schemaHasRules(f,e.RULES.all)&&(h=!1,l.schema=f,l.schemaPath=i+"["+m+"]",l.errSchemaPath=o+"/"+m,a+="  "+e.validate(l)+" ",l.baseId=d,s&&(a+=" if ("+u+") { ",c+="}"));return s&&(a+=h?" if (true) { ":" "+c.slice(0,-1)+" "),a=e.util.cleanUpCode(a)},anyOf:function(e,t,r){var a=" ",n=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(i||""),d="valid"+n,h="errs__"+n,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level;if(o.every(function(t){return e.util.schemaHasRules(t,e.RULES.all)})){var v=p.baseId;a+=" var "+h+" = errors; var "+d+" = false;  ";var g=e.compositeRule;e.compositeRule=p.compositeRule=!0;var y=o;if(y)for(var b,w=-1,P=y.length-1;w<P;)b=y[w+=1],p.schema=b,p.schemaPath=s+"["+w+"]",p.errSchemaPath=l+"/"+w,a+="  "+e.validate(p)+" ",p.baseId=v,a+=" "+d+" = "+d+" || "+m+"; if (!"+d+") { ",f+="}";e.compositeRule=p.compositeRule=g,a+=" "+f+" if (!"+d+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(a+=" } "),a=e.util.cleanUpCode(a)}else c&&(a+=" if (true) { ");return a},$comment:function(e,t,r){var a=" ",n=e.schema[t],i=e.errSchemaPath+"/"+t,o=(e.opts.allErrors,e.util.toQuotedString(n));return!0===e.opts.$comment?a+=" console.log("+o+");":"function"==typeof e.opts.$comment&&(a+=" self._opts.$comment("+o+", "+e.util.toQuotedString(i)+", validate.root.schema);"),a},const:function(e,t,r){var a=" ",n=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(i||""),d="valid"+n,h=e.opts.$data&&o&&o.$data;h&&(a+=" var schema"+n+" = "+e.util.getData(o.$data,i,e.dataPathArr)+"; "),h||(a+=" var schema"+n+" = validate.schema"+s+";"),a+="var "+d+" = equal("+u+", schema"+n+"); if (!"+d+") {   ";var p=p||[];p.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValue: schema"+n+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be equal to constant' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var f=a;return a=p.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+f+"]); ":a+=" validate.errors = ["+f+"]; return false; ":a+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" }",c&&(a+=" else { "),a},contains:function(e,t,r){var a=" ",n=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(i||""),d="valid"+n,h="errs__"+n,p=e.util.copy(e);p.level++;var f="valid"+p.level,m="i"+n,v=p.dataLevel=e.dataLevel+1,g="data"+v,y=e.baseId,b=e.util.schemaHasRules(o,e.RULES.all);if(a+="var "+h+" = errors;var "+d+";",b){var w=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=o,p.schemaPath=s,p.errSchemaPath=l,a+=" var "+f+" = false; for (var "+m+" = 0; "+m+" < "+u+".length; "+m+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var P=u+"["+m+"]";p.dataPathArr[v]=m;var x=e.validate(p);p.baseId=y,e.util.varOccurences(x,g)<2?a+=" "+e.util.varReplace(x,g,P)+" ":a+=" var "+g+" = "+P+"; "+x+" ",a+=" if ("+f+") break; }  ",e.compositeRule=p.compositeRule=w,a+="  if (!"+f+") {"}else a+=" if ("+u+".length == 0) {";var E=E||[];E.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should contain a valid item' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var D=a;return a=E.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+D+"]); ":a+=" validate.errors = ["+D+"]; return false; ":a+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { ",b&&(a+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(a+=" } "),a=e.util.cleanUpCode(a)},dependencies:function(e,t,r){var a=" ",n=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(i||""),d="errs__"+n,h=e.util.copy(e),p="";h.level++;var f="valid"+h.level,m={},v={},g=e.opts.ownProperties;for(P in o){var y=o[P],b=Array.isArray(y)?v:m;b[P]=y}a+="var "+d+" = errors;";var w=e.errorPath;for(var P in a+="var missing"+n+";",v)if((b=v[P]).length){if(a+=" if ( "+u+e.util.getProperty(P)+" !== undefined ",g&&(a+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(P)+"') "),c){a+=" && ( ";var x=b;if(x)for(var E=-1,D=x.length-1;E<D;)A=x[E+=1],E&&(a+=" || "),a+=" ( ( "+(R=u+(T=e.util.getProperty(A)))+" === undefined ",g&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(A)+"') "),a+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?A:T)+") ) ";a+=")) {  ";var _="missing"+n,S="' + "+_+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,_,!0):w+" + "+_);var k=k||[];k.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(P)+"', missingProperty: '"+S+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==b.length?a+="property "+e.util.escapeQuotes(b[0]):a+="properties "+e.util.escapeQuotes(b.join(", ")),a+=" when property "+e.util.escapeQuotes(P)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var C=a;a=k.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+C+"]); ":a+=" validate.errors = ["+C+"]; return false; ":a+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{a+=" ) { ";var O=b;if(O)for(var A,F=-1,$=O.length-1;F<$;){A=O[F+=1];var T=e.util.getProperty(A),R=(S=e.util.escapeQuotes(A),u+T);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,A,e.opts.jsonPointers)),a+=" if ( "+R+" === undefined ",g&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(A)+"') "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(P)+"', missingProperty: '"+S+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==b.length?a+="property "+e.util.escapeQuotes(b[0]):a+="properties "+e.util.escapeQuotes(b.join(", ")),a+=" when property "+e.util.escapeQuotes(P)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}a+=" }   ",c&&(p+="}",a+=" else { ")}e.errorPath=w;var I=h.baseId;for(var P in m)y=m[P],e.util.schemaHasRules(y,e.RULES.all)&&(a+=" "+f+" = true; if ( "+u+e.util.getProperty(P)+" !== undefined ",g&&(a+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(P)+"') "),a+=") { ",h.schema=y,h.schemaPath=s+e.util.getProperty(P),h.errSchemaPath=l+"/"+e.util.escapeFragment(P),a+="  "+e.validate(h)+" ",h.baseId=I,a+=" }  ",c&&(a+=" if ("+f+") { ",p+="}"));return c&&(a+="   "+p+" if ("+d+" == errors) {"),a=e.util.cleanUpCode(a)},enum:function(e,t,r){var a=" ",n=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(i||""),d="valid"+n,h=e.opts.$data&&o&&o.$data;h&&(a+=" var schema"+n+" = "+e.util.getData(o.$data,i,e.dataPathArr)+"; ");var p="i"+n,f="schema"+n;h||(a+=" var "+f+" = validate.schema"+s+";"),a+="var "+d+";",h&&(a+=" if (schema"+n+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+n+")) "+d+" = false; else {"),a+=d+" = false;for (var "+p+"=0; "+p+"<"+f+".length; "+p+"++) if (equal("+u+", "+f+"["+p+"])) { "+d+" = true; break; }",h&&(a+="  }  "),a+=" if (!"+d+") {   ";var m=m||[];m.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValues: schema"+n+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var v=a;return a=m.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+v+"]); ":a+=" validate.errors = ["+v+"]; return false; ":a+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" }",c&&(a+=" else { "),a},format:function(e,t,r){var a=" ",n=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(i||"");if(!1===e.opts.format)return c&&(a+=" if (true) { "),a;var d,h=e.opts.$data&&o&&o.$data;h?(a+=" var schema"+n+" = "+e.util.getData(o.$data,i,e.dataPathArr)+"; ",d="schema"+n):d=o;var p=e.opts.unknownFormats,f=Array.isArray(p);if(h)a+=" var "+(m="format"+n)+" = formats["+d+"]; var "+(v="isObject"+n)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(g="formatType"+n)+" = "+v+" && "+m+".type || 'string'; if ("+v+") { ",e.async&&(a+=" var async"+n+" = "+m+".async; "),a+=" "+m+" = "+m+".validate; } if (  ",h&&(a+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),a+=" (","ignore"!=p&&(a+=" ("+d+" && !"+m+" ",f&&(a+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),a+=") || "),a+=" ("+m+" && "+g+" == '"+r+"' && !(typeof "+m+" == 'function' ? ",e.async?a+=" (async"+n+" ? await "+m+"("+u+") : "+m+"("+u+")) ":a+=" "+m+"("+u+") ",a+=" : "+m+".test("+u+"))))) {";else{var m;if(!(m=e.formats[o])){if("ignore"==p)return e.logger.warn('unknown format "'+o+'" ignored in schema at path "'+e.errSchemaPath+'"'),c&&(a+=" if (true) { "),a;if(f&&p.indexOf(o)>=0)return c&&(a+=" if (true) { "),a;throw new Error('unknown format "'+o+'" is used in schema at path "'+e.errSchemaPath+'"')}var v,g=(v="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(v){var y=!0===m.async;m=m.validate}if(g!=r)return c&&(a+=" if (true) { "),a;if(y){if(!e.async)throw new Error("async format in sync schema");a+=" if (!(await "+(b="formats"+e.util.getProperty(o)+".validate")+"("+u+"))) { "}else{a+=" if (! ";var b="formats"+e.util.getProperty(o);v&&(b+=".validate"),a+="function"==typeof m?" "+b+"("+u+") ":" "+b+".test("+u+") ",a+=") { "}}var w=w||[];w.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { format:  ",a+=h?""+d:""+e.util.toQuotedString(o),a+="  } ",!1!==e.opts.messages&&(a+=" , message: 'should match format \"",a+=h?"' + "+d+" + '":""+e.util.escapeQuotes(o),a+="\"' "),e.opts.verbose&&(a+=" , schema:  ",a+=h?"validate.schema"+s:""+e.util.toQuotedString(o),a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var P=a;return a=w.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+P+"]); ":a+=" validate.errors = ["+P+"]; return false; ":a+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",c&&(a+=" else { "),a},if:function(e,t,r){var a=" ",n=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(i||""),d="valid"+n,h="errs__"+n,p=e.util.copy(e);p.level++;var f="valid"+p.level,m=e.schema.then,v=e.schema.else,g=void 0!==m&&e.util.schemaHasRules(m,e.RULES.all),y=void 0!==v&&e.util.schemaHasRules(v,e.RULES.all),b=p.baseId;if(g||y){var w;p.createErrors=!1,p.schema=o,p.schemaPath=s,p.errSchemaPath=l,a+=" var "+h+" = errors; var "+d+" = true;  ";var P=e.compositeRule;e.compositeRule=p.compositeRule=!0,a+="  "+e.validate(p)+" ",p.baseId=b,p.createErrors=!0,a+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }  ",e.compositeRule=p.compositeRule=P,g?(a+=" if ("+f+") {  ",p.schema=e.schema.then,p.schemaPath=e.schemaPath+".then",p.errSchemaPath=e.errSchemaPath+"/then",a+="  "+e.validate(p)+" ",p.baseId=b,a+=" "+d+" = "+f+"; ",g&&y?a+=" var "+(w="ifClause"+n)+" = 'then'; ":w="'then'",a+=" } ",y&&(a+=" else { ")):a+=" if (!"+f+") { ",y&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+".else",p.errSchemaPath=e.errSchemaPath+"/else",a+="  "+e.validate(p)+" ",p.baseId=b,a+=" "+d+" = "+f+"; ",g&&y?a+=" var "+(w="ifClause"+n)+" = 'else'; ":w="'else'",a+=" } "),a+=" if (!"+d+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { failingKeyword: "+w+" } ",!1!==e.opts.messages&&(a+=" , message: 'should match \"' + "+w+" + '\" schema' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+=" }   ",c&&(a+=" else { "),a=e.util.cleanUpCode(a)}else c&&(a+=" if (true) { ");return a},items:function(e,t,r){var a=" ",n=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(i||""),d="valid"+n,h="errs__"+n,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level,v="i"+n,g=p.dataLevel=e.dataLevel+1,y="data"+g,b=e.baseId;if(a+="var "+h+" = errors;var "+d+";",Array.isArray(o)){var w=e.schema.additionalItems;if(!1===w){a+=" "+d+" = "+u+".length <= "+o.length+"; ";var P=l;l=e.errSchemaPath+"/additionalItems",a+="  if (!"+d+") {   ";var x=x||[];x.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+o.length+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have more than "+o.length+" items' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var E=a;a=x.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+E+"]); ":a+=" validate.errors = ["+E+"]; return false; ":a+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",l=P,c&&(f+="}",a+=" else { ")}var D=o;if(D)for(var _,S=-1,k=D.length-1;S<k;)if(_=D[S+=1],e.util.schemaHasRules(_,e.RULES.all)){a+=" "+m+" = true; if ("+u+".length > "+S+") { ";var C=u+"["+S+"]";p.schema=_,p.schemaPath=s+"["+S+"]",p.errSchemaPath=l+"/"+S,p.errorPath=e.util.getPathExpr(e.errorPath,S,e.opts.jsonPointers,!0),p.dataPathArr[g]=S;var O=e.validate(p);p.baseId=b,e.util.varOccurences(O,y)<2?a+=" "+e.util.varReplace(O,y,C)+" ":a+=" var "+y+" = "+C+"; "+O+" ",a+=" }  ",c&&(a+=" if ("+m+") { ",f+="}")}"object"==typeof w&&e.util.schemaHasRules(w,e.RULES.all)&&(p.schema=w,p.schemaPath=e.schemaPath+".additionalItems",p.errSchemaPath=e.errSchemaPath+"/additionalItems",a+=" "+m+" = true; if ("+u+".length > "+o.length+") {  for (var "+v+" = "+o.length+"; "+v+" < "+u+".length; "+v+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0),C=u+"["+v+"]",p.dataPathArr[g]=v,O=e.validate(p),p.baseId=b,e.util.varOccurences(O,y)<2?a+=" "+e.util.varReplace(O,y,C)+" ":a+=" var "+y+" = "+C+"; "+O+" ",c&&(a+=" if (!"+m+") break; "),a+=" } }  ",c&&(a+=" if ("+m+") { ",f+="}"))}else e.util.schemaHasRules(o,e.RULES.all)&&(p.schema=o,p.schemaPath=s,p.errSchemaPath=l,a+="  for (var "+v+" = 0; "+v+" < "+u+".length; "+v+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0),C=u+"["+v+"]",p.dataPathArr[g]=v,O=e.validate(p),p.baseId=b,e.util.varOccurences(O,y)<2?a+=" "+e.util.varReplace(O,y,C)+" ":a+=" var "+y+" = "+C+"; "+O+" ",c&&(a+=" if (!"+m+") break; "),a+=" }");return c&&(a+=" "+f+" if ("+h+" == errors) {"),a=e.util.cleanUpCode(a)},maximum:wt,minimum:wt,maxItems:Pt,minItems:Pt,maxLength:xt,minLength:xt,maxProperties:Et,minProperties:Et,multipleOf:function(e,t,r){var a,n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),h=e.opts.$data&&s&&s.$data;h?(n+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",a="schema"+i):a=s,n+="var division"+i+";if (",h&&(n+=" "+a+" !== undefined && ( typeof "+a+" != 'number' || "),n+=" (division"+i+" = "+d+" / "+a+", ",e.opts.multipleOfPrecision?n+=" Math.abs(Math.round(division"+i+") - division"+i+") > 1e-"+e.opts.multipleOfPrecision+" ":n+=" division"+i+" !== parseInt(division"+i+") ",n+=" ) ",h&&(n+="  )  "),n+=" ) {   ";var p=p||[];p.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+a+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be multiple of ",n+=h?"' + "+a:a+"'"),e.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var f=n;return n=p.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+f+"]); ":n+=" validate.errors = ["+f+"]; return false; ":n+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n},not:function(e,t,r){var a=" ",n=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(i||""),d="errs__"+n,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(e.util.schemaHasRules(o,e.RULES.all)){h.schema=o,h.schemaPath=s,h.errSchemaPath=l,a+=" var "+d+" = errors;  ";var f,m=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1,h.opts.allErrors&&(f=h.opts.allErrors,h.opts.allErrors=!1),a+=" "+e.validate(h)+" ",h.createErrors=!0,f&&(h.opts.allErrors=f),e.compositeRule=h.compositeRule=m,a+=" if ("+p+") {   ";var v=v||[];v.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be valid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var g=a;a=v.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(a+=" } ")}else a+="  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be valid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(a+=" if (false) { ");return a},oneOf:function(e,t,r){var a=" ",n=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(i||""),d="valid"+n,h="errs__"+n,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level,v=p.baseId,g="prevValid"+n,y="passingSchemas"+n;a+="var "+h+" = errors , "+g+" = false , "+d+" = false , "+y+" = null; ";var b=e.compositeRule;e.compositeRule=p.compositeRule=!0;var w=o;if(w)for(var P,x=-1,E=w.length-1;x<E;)P=w[x+=1],e.util.schemaHasRules(P,e.RULES.all)?(p.schema=P,p.schemaPath=s+"["+x+"]",p.errSchemaPath=l+"/"+x,a+="  "+e.validate(p)+" ",p.baseId=v):a+=" var "+m+" = true; ",x&&(a+=" if ("+m+" && "+g+") { "+d+" = false; "+y+" = ["+y+", "+x+"]; } else { ",f+="}"),a+=" if ("+m+") { "+d+" = "+g+" = true; "+y+" = "+x+"; }";return e.compositeRule=p.compositeRule=b,a+=f+"if (!"+d+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { passingSchemas: "+y+" } ",!1!==e.opts.messages&&(a+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(a+=" } "),a},pattern:function(e,t,r){var a,n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),h=e.opts.$data&&s&&s.$data;h?(n+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",a="schema"+i):a=s;var p=h?"(new RegExp("+a+"))":e.usePattern(s);n+="if ( ",h&&(n+=" ("+a+" !== undefined && typeof "+a+" != 'string') || "),n+=" !"+p+".test("+d+") ) {   ";var f=f||[];f.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",n+=h?""+a:""+e.util.toQuotedString(s),n+="  } ",!1!==e.opts.messages&&(n+=" , message: 'should match pattern \"",n+=h?"' + "+a+" + '":""+e.util.escapeQuotes(s),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+l:""+e.util.toQuotedString(s),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var m=n;return n=f.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n},properties:function(e,t,r){var a=" ",n=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(i||""),d="errs__"+n,h=e.util.copy(e),p="";h.level++;var f="valid"+h.level,m="key"+n,v="idx"+n,g=h.dataLevel=e.dataLevel+1,y="data"+g,b="dataProperties"+n,w=Object.keys(o||{}),P=e.schema.patternProperties||{},x=Object.keys(P),E=e.schema.additionalProperties,D=w.length||x.length,_=!1===E,S="object"==typeof E&&Object.keys(E).length,k=e.opts.removeAdditional,C=_||S||k,O=e.opts.ownProperties,A=e.baseId,F=e.schema.required;if(F&&(!e.opts.$data||!F.$data)&&F.length<e.opts.loopRequired)var $=e.util.toHash(F);if(a+="var "+d+" = errors;var "+f+" = true;",O&&(a+=" var "+b+" = undefined;"),C){if(a+=O?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+v+"=0; "+v+"<"+b+".length; "+v+"++) { var "+m+" = "+b+"["+v+"]; ":" for (var "+m+" in "+u+") { ",D){if(a+=" var isAdditional"+n+" = !(false ",w.length)if(w.length>8)a+=" || validate.schema"+s+".hasOwnProperty("+m+") ";else{var T=w;if(T)for(var R=-1,I=T.length-1;R<I;)J=T[R+=1],a+=" || "+m+" == "+e.util.toQuotedString(J)+" "}if(x.length){var M=x;if(M)for(var j=-1,N=M.length-1;j<N;)ne=M[j+=1],a+=" || "+e.usePattern(ne)+".test("+m+") "}a+=" ); if (isAdditional"+n+") { "}if("all"==k)a+=" delete "+u+"["+m+"]; ";else{var z=e.errorPath,Y="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),_)if(k)a+=" delete "+u+"["+m+"]; ";else{a+=" "+f+" = false; ";var L=l;l=e.errSchemaPath+"/additionalProperties",(te=te||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { additionalProperty: '"+Y+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is an invalid additional property":a+="should NOT have additional properties",a+="' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var V=a;a=te.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+V+"]); ":a+=" validate.errors = ["+V+"]; return false; ":a+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=L,c&&(a+=" break; ")}else if(S)if("failing"==k){a+=" var "+d+" = errors;  ";var q=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=E,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var H=u+"["+m+"]";h.dataPathArr[g]=m;var U=e.validate(h);h.baseId=A,e.util.varOccurences(U,y)<2?a+=" "+e.util.varReplace(U,y,H)+" ":a+=" var "+y+" = "+H+"; "+U+" ",a+=" if (!"+f+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+m+"]; }  ",e.compositeRule=h.compositeRule=q}else h.schema=E,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers),H=u+"["+m+"]",h.dataPathArr[g]=m,U=e.validate(h),h.baseId=A,e.util.varOccurences(U,y)<2?a+=" "+e.util.varReplace(U,y,H)+" ":a+=" var "+y+" = "+H+"; "+U+" ",c&&(a+=" if (!"+f+") break; ");e.errorPath=z}D&&(a+=" } "),a+=" }  ",c&&(a+=" if ("+f+") { ",p+="}")}var B=e.opts.useDefaults&&!e.compositeRule;if(w.length){var Q=w;if(Q)for(var J,X=-1,K=Q.length-1;X<K;){var W=o[J=Q[X+=1]];if(e.util.schemaHasRules(W,e.RULES.all)){var Z=e.util.getProperty(J),G=(H=u+Z,B&&void 0!==W.default);if(h.schema=W,h.schemaPath=s+Z,h.errSchemaPath=l+"/"+e.util.escapeFragment(J),h.errorPath=e.util.getPath(e.errorPath,J,e.opts.jsonPointers),h.dataPathArr[g]=e.util.toQuotedString(J),U=e.validate(h),h.baseId=A,e.util.varOccurences(U,y)<2){U=e.util.varReplace(U,y,H);var ee=H}else ee=y,a+=" var "+y+" = "+H+"; ";if(G)a+=" "+U+" ";else{if($&&$[J]){a+=" if ( "+ee+" === undefined ",O&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(J)+"') "),a+=") { "+f+" = false; ",z=e.errorPath,L=l;var te,re=e.util.escapeQuotes(J);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(z,J,e.opts.jsonPointers)),l=e.errSchemaPath+"/required",(te=te||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+re+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+re+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",V=a,a=te.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+V+"]); ":a+=" validate.errors = ["+V+"]; return false; ":a+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=L,e.errorPath=z,a+=" } else { "}else c?(a+=" if ( "+ee+" === undefined ",O&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(J)+"') "),a+=") { "+f+" = true; } else { "):(a+=" if ("+ee+" !== undefined ",O&&(a+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(J)+"') "),a+=" ) { ");a+=" "+U+" } "}}c&&(a+=" if ("+f+") { ",p+="}")}}if(x.length){var ae=x;if(ae)for(var ne,ie=-1,oe=ae.length-1;ie<oe;)W=P[ne=ae[ie+=1]],e.util.schemaHasRules(W,e.RULES.all)&&(h.schema=W,h.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ne),h.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ne),a+=O?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+v+"=0; "+v+"<"+b+".length; "+v+"++) { var "+m+" = "+b+"["+v+"]; ":" for (var "+m+" in "+u+") { ",a+=" if ("+e.usePattern(ne)+".test("+m+")) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers),H=u+"["+m+"]",h.dataPathArr[g]=m,U=e.validate(h),h.baseId=A,e.util.varOccurences(U,y)<2?a+=" "+e.util.varReplace(U,y,H)+" ":a+=" var "+y+" = "+H+"; "+U+" ",c&&(a+=" if (!"+f+") break; "),a+=" } ",c&&(a+=" else "+f+" = true; "),a+=" }  ",c&&(a+=" if ("+f+") { ",p+="}"))}return c&&(a+=" "+p+" if ("+d+" == errors) {"),a=e.util.cleanUpCode(a)},propertyNames:function(e,t,r){var a=" ",n=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(i||""),d="errs__"+n,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(a+="var "+d+" = errors;",e.util.schemaHasRules(o,e.RULES.all)){h.schema=o,h.schemaPath=s,h.errSchemaPath=l;var f="key"+n,m="idx"+n,v="i"+n,g="' + "+f+" + '",y="data"+(h.dataLevel=e.dataLevel+1),b="dataProperties"+n,w=e.opts.ownProperties,P=e.baseId;w&&(a+=" var "+b+" = undefined; "),a+=w?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+f+" = "+b+"["+m+"]; ":" for (var "+f+" in "+u+") { ",a+=" var startErrs"+n+" = errors; ";var x=f,E=e.compositeRule;e.compositeRule=h.compositeRule=!0;var D=e.validate(h);h.baseId=P,e.util.varOccurences(D,y)<2?a+=" "+e.util.varReplace(D,y,x)+" ":a+=" var "+y+" = "+x+"; "+D+" ",e.compositeRule=h.compositeRule=E,a+=" if (!"+p+") { for (var "+v+"=startErrs"+n+"; "+v+"<errors; "+v+"++) { vErrors["+v+"].propertyName = "+f+"; }   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { propertyName: '"+g+"' } ",!1!==e.opts.messages&&(a+=" , message: 'property name \\'"+g+"\\' is invalid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),c&&(a+=" break; "),a+=" } }"}return c&&(a+="  if ("+d+" == errors) {"),a=e.util.cleanUpCode(a)},required:function(e,t,r){var a=" ",n=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(i||""),d="valid"+n,h=e.opts.$data&&o&&o.$data;h&&(a+=" var schema"+n+" = "+e.util.getData(o.$data,i,e.dataPathArr)+"; ");var p="schema"+n;if(!h)if(o.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var f=[],m=o;if(m)for(var v,g=-1,y=m.length-1;g<y;){v=m[g+=1];var b=e.schema.properties[v];b&&e.util.schemaHasRules(b,e.RULES.all)||(f[f.length]=v)}}else f=o;if(h||f.length){var w=e.errorPath,P=h||f.length>=e.opts.loopRequired,x=e.opts.ownProperties;if(c)if(a+=" var missing"+n+"; ",P){h||(a+=" var "+p+" = validate.schema"+s+"; ");var E="' + "+(O="schema"+n+"["+(k="i"+n)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,O,e.opts.jsonPointers)),a+=" var "+d+" = true; ",h&&(a+=" if (schema"+n+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+n+")) "+d+" = false; else {"),a+=" for (var "+k+" = 0; "+k+" < "+p+".length; "+k+"++) { "+d+" = "+u+"["+p+"["+k+"]] !== undefined ",x&&(a+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+p+"["+k+"]) "),a+="; if (!"+d+") break; } ",h&&(a+="  }  "),a+="  if (!"+d+") {   ",(_=_||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var D=a;a=_.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+D+"]); ":a+=" validate.errors = ["+D+"]; return false; ":a+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { "}else{a+=" if ( ";var _,S=f;if(S)for(var k=-1,C=S.length-1;k<C;)F=S[k+=1],k&&(a+=" || "),a+=" ( ( "+(I=u+(R=e.util.getProperty(F)))+" === undefined ",x&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(F)+"') "),a+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?F:R)+") ) ";a+=") {  ",E="' + "+(O="missing"+n)+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,O,!0):w+" + "+O),(_=_||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",D=a,a=_.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+D+"]); ":a+=" validate.errors = ["+D+"]; return false; ":a+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { "}else if(P){var O;h||(a+=" var "+p+" = validate.schema"+s+"; "),E="' + "+(O="schema"+n+"["+(k="i"+n)+"]")+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,O,e.opts.jsonPointers)),h&&(a+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),a+=" for (var "+k+" = 0; "+k+" < "+p+".length; "+k+"++) { if ("+u+"["+p+"["+k+"]] === undefined ",x&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+p+"["+k+"]) "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(a+="  }  ")}else{var A=f;if(A)for(var F,$=-1,T=A.length-1;$<T;){F=A[$+=1];var R=e.util.getProperty(F),I=(E=e.util.escapeQuotes(F),u+R);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,F,e.opts.jsonPointers)),a+=" if ( "+I+" === undefined ",x&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(F)+"') "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=w}else c&&(a+=" if (true) {");return a},uniqueItems:function(e,t,r){var a,n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),h="valid"+i,p=e.opts.$data&&s&&s.$data;if(p?(n+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",a="schema"+i):a=s,(s||p)&&!1!==e.opts.uniqueItems){p&&(n+=" var "+h+"; if ("+a+" === false || "+a+" === undefined) "+h+" = true; else if (typeof "+a+" != 'boolean') "+h+" = false; else { "),n+=" var i = "+d+".length , "+h+" = true , j; if (i > 1) { ";var f=e.schema.items&&e.schema.items.type,m=Array.isArray(f);if(!f||"object"==f||"array"==f||m&&(f.indexOf("object")>=0||f.indexOf("array")>=0))n+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+h+" = false; break outer; } } } ";else{n+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ";var v="checkDataType"+(m?"s":"");n+=" if ("+e.util[v](f,"item",!0)+") continue; ",m&&(n+=" if (typeof item == 'string') item = '\"' + item; "),n+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}n+=" } ",p&&(n+="  }  "),n+=" if (!"+h+") {   ";var g=g||[];g.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(n+=" , schema:  ",n+=p?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var y=n;n=g.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u&&(n+=" else { ")}else u&&(n+=" if (true) { ");return n},validate:He},_t=ee.toHash,St=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=_t(t),e.types=_t(["number","integer","string","array","object","boolean","null"]),e.forEach(function(r){r.rules=r.rules.map(function(r){var a;if("object"==typeof r){var n=Object.keys(r)[0];a=r[n],r=n,a.forEach(function(r){t.push(r),e.all[r]=!0})}return t.push(r),e.all[r]={keyword:r,code:Dt[r],implements:a}}),e.all.$comment={keyword:"$comment",code:Dt.$comment},r.type&&(e.types[r.type]=r)}),e.keywords=_t(t.concat(["$schema","$id","id","$data","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e},kt=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],Ct=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var a,n=t[r].split("/"),i=e;for(a=1;a<n.length;a++)i=i[n[a]];for(a=0;a<kt.length;a++){var o=kt[a],s=i[o];s&&(i[o]={anyOf:[s,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]})}}return e},Ot=Ye.MissingRef,At=function e(t,r,a){var n=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(a=r,r=void 0);var i=o(t).then(function(){var e=n._addSchema(t,void 0,r);return e.validate||function e(t){try{return n._compile(t)}catch(e){if(e instanceof Ot)return function a(e){var a=e.missingSchema;if(l(a))throw new Error("Schema "+a+" is loaded but "+e.missingRef+" cannot be resolved");var i=n._loadingSchemas[a];i||(i=n._loadingSchemas[a]=n._opts.loadSchema(a)).then(s,s);return i.then(function(e){if(!l(a))return o(e).then(function(){l(a)||n.addSchema(e,a,void 0,r)})}).then(function(){return function e(t){try{return n._compile(t)}catch(e){if(e instanceof Ot)return a(e);throw e}function a(a){var i=a.missingSchema;if(c(i))throw new Error("Schema "+i+" is loaded but "+a.missingRef+" cannot be resolved");var s=n._loadingSchemas[i];return s||(s=n._loadingSchemas[i]=n._opts.loadSchema(i)).then(l,l),s.then(function(e){if(!c(i))return o(e).then(function(){c(i)||n.addSchema(e,i,void 0,r)})}).then(function(){return e(t)});function l(){delete n._loadingSchemas[i]}function c(e){return n._refs[e]||n._schemas[e]}}}(t)});function s(){delete n._loadingSchemas[a]}function l(e){return n._refs[e]||n._schemas[e]}}(e);throw e}function a(a){var i=a.missingSchema;if(c(i))throw new Error("Schema "+i+" is loaded but "+a.missingRef+" cannot be resolved");var s=n._loadingSchemas[i];return s||(s=n._loadingSchemas[i]=n._opts.loadSchema(i)).then(l,l),s.then(function(e){if(!c(i))return o(e).then(function(){c(i)||n.addSchema(e,i,void 0,r)})}).then(function(){return e(t)});function l(){delete n._loadingSchemas[i]}function c(e){return n._refs[e]||n._schemas[e]}}}(e)});a&&i.then(function(e){a(null,e)},a);return i;function o(t){var r=t.$schema;return r&&!n.getSchema(r)?e.call(n,{$ref:r},!0):Promise.resolve()}};var Ft=function(e,t,r){var a,n,i=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,h="data"+(s||""),p="valid"+o,f="errs__"+o,m=e.opts.$data&&l&&l.$data;m?(i+=" var schema"+o+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=l;var v,g,y,b,w,P="definition"+o,x=this.definition,E="";if(m&&x.$data){w="keywordValidate"+o;var D=x.validateSchema;i+=" var "+P+" = RULES.custom['"+t+"'].definition; var "+w+" = "+P+".validate;"}else{if(!(b=e.useCustomRule(this,l,e.schema,e)))return;n="validate.schema"+c,w=b.code,v=x.compile,g=x.inline,y=x.macro}var _=w+".errors",S="i"+o,k="ruleErr"+o,C=x.async;if(C&&!e.async)throw new Error("async keyword in sync schema");if(g||y||(i+=_+" = null;"),i+="var "+f+" = errors;var "+p+";",m&&x.$data&&(E+="}",i+=" if ("+n+" === undefined) { "+p+" = true; } else { ",D&&(E+="}",i+=" "+p+" = "+P+".validateSchema("+n+"); if ("+p+") { ")),g)x.statements?i+=" "+b.validate+" ":i+=" "+p+" = "+b.validate+"; ";else if(y){var O=e.util.copy(e);E="";O.level++;var A="valid"+O.level;O.schema=b.validate,O.schemaPath="";var F=e.compositeRule;e.compositeRule=O.compositeRule=!0;var $=e.validate(O).replace(/validate\.schema/g,w);e.compositeRule=O.compositeRule=F,i+=" "+$}else{(M=M||[]).push(i),i="",i+="  "+w+".call( ",e.opts.passContext?i+="this":i+="self",v||!1===x.schema?i+=" , "+h+" ":i+=" , "+n+" , "+h+" , validate.schema"+e.schemaPath+" ",i+=" , (dataPath || '')",'""'!=e.errorPath&&(i+=" + "+e.errorPath);var T=s?"data"+(s-1||""):"parentData",R=s?e.dataPathArr[s]:"parentDataProperty",I=i+=" , "+T+" , "+R+" , rootData )  ";i=M.pop(),!1===x.errors?(i+=" "+p+" = ",C&&(i+="await "),i+=I+"; "):i+=C?" var "+(_="customErrors"+o)+" = null; try { "+p+" = await "+I+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+_+" = e.errors; else throw e; } ":" "+_+" = null; "+p+" = "+I+"; "}if(x.modifying&&(i+=" if ("+T+") "+h+" = "+T+"["+R+"];"),i+=""+E,x.valid)d&&(i+=" if (true) { ");else{var M;i+=" if ( ",void 0===x.valid?(i+=" !",i+=y?""+A:""+p):i+=" "+!x.valid+" ",i+=") { ",a=this.keyword,(M=M||[]).push(i),i="",(M=M||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(a||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var j=i;i=M.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+j+"]); ":i+=" validate.errors = ["+j+"]; return false; ":i+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var N=i;i=M.pop(),g?x.errors?"full"!=x.errors&&(i+="  for (var "+S+"="+f+"; "+S+"<errors; "+S+"++) { var "+k+" = vErrors["+S+"]; if ("+k+".dataPath === undefined) "+k+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+k+".schemaPath === undefined) { "+k+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(i+=" "+k+".schema = "+n+"; "+k+".data = "+h+"; "),i+=" } "):!1===x.errors?i+=" "+N+" ":(i+=" if ("+f+" == errors) { "+N+" } else {  for (var "+S+"="+f+"; "+S+"<errors; "+S+"++) { var "+k+" = vErrors["+S+"]; if ("+k+".dataPath === undefined) "+k+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+k+".schemaPath === undefined) { "+k+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(i+=" "+k+".schema = "+n+"; "+k+".data = "+h+"; "),i+=" } } "):y?(i+="   var err =   ",!1!==e.createErrors?(i+=" { keyword: '"+(a||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; ")):!1===x.errors?i+=" "+N+" ":(i+=" if (Array.isArray("+_+")) { if (vErrors === null) vErrors = "+_+"; else vErrors = vErrors.concat("+_+"); errors = vErrors.length;  for (var "+S+"="+f+"; "+S+"<errors; "+S+"++) { var "+k+" = vErrors["+S+"]; if ("+k+".dataPath === undefined) "+k+".dataPath = (dataPath || '') + "+e.errorPath+";  "+k+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(i+=" "+k+".schema = "+n+"; "+k+".data = "+h+"; "),i+=" } } else { "+N+" } "),i+=" } ",d&&(i+=" else { ")}return i},$t=/^[a-z_$][a-z0-9_$-]*$/i,Tt=function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!$t.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){if(t.macro&&void 0!==t.valid)throw new Error('"valid" option cannot be used with macro keywords');var a=t.type;if(Array.isArray(a)){var n,i=a.length;for(n=0;n<i;n++)c(a[n]);for(n=0;n<i;n++)l(e,a[n],t)}else a&&c(a),l(e,a,t);var o=!0===t.$data&&this._opts.$data;if(o&&!t.validate)throw new Error('$data support: "validate" function is not defined');var s=t.metaSchema;s&&(o&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(s,!0))}function l(e,t,a){for(var n,i=0;i<r.length;i++){var o=r[i];if(o.type==t){n=o;break}}n||(n={type:t,rules:[]},r.push(n));var s={keyword:e,definition:a,custom:!0,code:Ft,implements:a.implements};n.rules.push(s),r.custom[e]=s}function c(e){if(!r.types[e])throw new Error("Unknown type "+e)}return r.keywords[e]=r.all[e]=!0,this},Rt=function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},It=function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var a=t[r].rules,n=0;n<a.length;n++)if(a[n].keyword==e){a.splice(n,1);break}return this};const Mt="http://json-schema.org/draft-07/schema#",jt="https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#",Nt="Meta-schema for $data reference (JSON Schema extension proposal)",zt=["$data"],Yt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}};var Lt={$schema:Mt,$id:jt,description:Nt,type:"object",required:zt,properties:Yt,additionalProperties:!1},Vt=Object.freeze({$schema:Mt,$id:jt,description:Nt,type:"object",required:zt,properties:Yt,additionalProperties:!1,default:Lt});const qt="http://json-schema.org/draft-07/schema#",Ht="http://json-schema.org/draft-07/schema#",Ut="Core schema meta-schema",Bt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Qt=["object","boolean"],Jt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}};var Xt={$schema:qt,$id:Ht,title:Ut,definitions:Bt,type:Qt,properties:Jt,default:!0},Kt=Object.freeze({$schema:qt,$id:Ht,title:Ut,definitions:Bt,type:Qt,properties:Jt,default:Xt}),Wt=Vt&&Lt||Vt,Zt=Kt&&Xt||Kt,Gt=ar;ar.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var a=this._addSchema(e);r=a.validate||this._compile(a)}var n=r(t);!0!==r.$async&&(this.errors=r.errors);return n},ar.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},ar.prototype.addSchema=function(e,t,r,a){if(Array.isArray(e)){for(var n=0;n<e.length;n++)this.addSchema(e[n],void 0,r,a);return this}var i=this._getId(e);if(void 0!==i&&"string"!=typeof i)throw new Error("schema id must be string");return cr(this,t=Ce.normalizeId(t||i)),this._schemas[t]=this._addSchema(e,r,a,!0),this},ar.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},ar.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||(a=this,n=a._opts.meta,a._opts.defaultMeta="object"==typeof n?a._getId(n)||n:a.getSchema(er)?er:void 0,a._opts.defaultMeta)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var a,n;var i=this.validate(r,e);if(!i&&t){var o="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(o);this.logger.error(o)}return i},ar.prototype.getSchema=function(e){var t=nr(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=Ce.schema.call(e,{schema:{}},t);if(r){var a=r.schema,n=r.root,i=r.baseId,o=Qe.call(e,a,n,void 0,i);return e._fragments[t]=new Se({ref:t,fragment:!0,schema:a,root:n,baseId:i,validate:o}),o}}(this,e)}},ar.prototype.removeSchema=function(e){if(e instanceof RegExp)return ir(this,this._schemas,e),ir(this,this._refs,e),this;switch(typeof e){case"undefined":return ir(this,this._schemas),ir(this,this._refs),this._cache.clear(),this;case"string":var t=nr(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,a=r?r(e):e;this._cache.del(a);var n=this._getId(e);n&&(n=Ce.normalizeId(n),delete this._schemas[n],delete this._refs[n])}return this},ar.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},ar.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,a=void 0===t.dataVar?"data":t.dataVar,n="",i=0;i<e.length;i++){var o=e[i];o&&(n+=a+o.dataPath+" "+o.message+r)}return n.slice(0,-r.length)},ar.prototype._addSchema=function(e,t,r,a){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var n=this._opts.serialize,i=n?n(e):e,o=this._cache.get(i);if(o)return o;a=a||!1!==this._opts.addUsedSchema;var s=Ce.normalizeId(this._getId(e));s&&a&&cr(this,s);var l,c=!1!==this._opts.validateSchema&&!t;c&&!(l=s&&s==Ce.normalizeId(e.$schema))&&this.validateSchema(e,!0);var u=Ce.ids.call(this,e),d=new Se({id:s,schema:e,localRefs:u,cacheKey:i,meta:r});"#"!=s[0]&&a&&(this._refs[s]=d);this._cache.put(i,d),c&&l&&this.validateSchema(e,!0);return d},ar.prototype._compile=function(e,t){if(e.compiling)return e.validate=n,n.schema=e.schema,n.errors=null,n.root=t||n,!0===e.schema.$async&&(n.$async=!0),n;var r,a;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{a=Qe.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=a,e.refs=a.refs,e.refVal=a.refVal,e.root=a.root,a;function n(){var t=e.validate,r=t.apply(this,arguments);return n.errors=t.errors,r}},ar.prototype.compileAsync=At,ar.prototype.addKeyword=Tt,ar.prototype.getKeyword=Rt,ar.prototype.removeKeyword=It,ar.ValidationError=Ye.Validation,ar.MissingRefError=Ye.MissingRef,ar.$dataMetaSchema=Ct;var er="http://json-schema.org/draft-07/schema",tr=["removeAdditional","useDefaults","coerceTypes"],rr=["/properties"];function ar(e){if(!(this instanceof ar))return new ar(e);e=this._opts=ee.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:ur,warn:ur,error:ur};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=ht(e.format),this._cache=e.cache||new et,this._loadingSchemas={},this._compilations=[],this.RULES=St(),this._getId=function(e){switch(e.schemaId){case"auto":return lr;case"id":return or;default:return sr}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=qe),this._metaOpts=function(e){for(var t=ee.copy(e._opts),r=0;r<tr.length;r++)delete t[tr[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),function(e){var t;e._opts.$data&&(t=Wt,e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var r=Zt;e._opts.$data&&(r=Ct(r,rr));e.addMetaSchema(r,er,!0),e._refs["http://json-schema.org/schema"]=er}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{const:!0}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function nr(e,t){return t=Ce.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function ir(e,t,r){for(var a in t){var n=t[a];n.meta||r&&!r.test(a)||(e._cache.del(n.cacheKey),delete t[a])}}function or(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function sr(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function lr(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function cr(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function ur(){}var dr=function(e,t,r){var a=" ",n=e.level,i=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=(e.errSchemaPath,e.opts.allErrors,"data"+(i||""));if(!1!==e.createErrors){var c=/\$\{[^\}]+\}/,u=/\$\{([^\}]+)\}/g,d=/^\'\'\s*\+\s*|\s*\+\s*\'\'$/g,h=e.self.getKeyword(t).config,p="_em_dataPath"+n,f="_em_i"+n,m="_em_key"+n,v="_em_keyProp"+n,g="_em_err"+n,y="_em_child"+n,b="_em_childKeyword"+n,w="_em_matches"+n,P="_em_isArray"+n,x="_em_errors"+n,E="_em_message"+n,D="_em_paramsErrors"+n,_="_em_propParam"+n,S="_em_keywordPropParams"+n,k="_em_templates"+n,C=e.util.toQuotedString(e.errSchemaPath);if(a+=" if (errors > 0) { var "+p+" = (dataPath || '') + "+e.errorPath+"; var "+f+", "+g+", "+x+"; ","object"==typeof o){var O={},A={},F={properties:{},items:{}},$=!1,T=!1,R=!1;for(var I in o)switch(I){case"properties":for(var M in o.properties)T=!0,F.properties[M]=[];break;case"items":for(var j=0;j<o.items.length;j++)R=!0,F.items[j]=[];break;default:if("object"==typeof o[I])for(var M in $=!0,A[I]={},o[I])A[I][M]=[];else O[I]=[]}var N=Object.keys(O);if(N.length){a+=" "+f+" = 0; "+x+" = "+JSON.stringify(O)+";  var "+k+" = { ";var z=!1,Y=N;if(Y)for(var L=-1,V=Y.length-1;L<V;)I=Y[L+=1],c.test(o[I])&&(z&&(a+=","),a+=e.util.toQuotedString(I)+": "+pe(o[I])+" ",z=!0);a+=" }; while ("+f+" < errors) { "+g+" = vErrors["+f+"]; if (  "+g+".keyword != '"+t+"' ",h.options.keepErrors&&(a+=" && !"+g+".emUsed "),a+=" && "+g+".keyword in "+x+" && "+g+".dataPath == "+p+" && "+g+".schemaPath.indexOf("+C+") == 0 && /^\\/[^\\/]*$/.test("+g+".schemaPath.slice("+e.errSchemaPath.length+"))) { "+x+"["+g+".keyword].push("+g+");  ",h.options.keepErrors?a+=" "+g+".emUsed = true; ":a+=" vErrors.splice("+f+", 1); errors--; ",a+=" } else { "+f+"++; } } ",h.options.singleError&&(a+=" var "+E+" = ''; var "+D+" = []; "),a+=" for (var "+m+" in "+x+") { if ("+x+"["+m+"].length) { ",h.options.singleError?(a+=" if ("+E+") { "+E+" += ","string"==typeof h.options.singleError?a+=" "+e.util.toQuotedString(h.options.singleError)+" ":a+=" '; ' ",a+="; } "+E+" +=   "+m+" in "+k+" ? "+k+"["+m+"] () : validate.schema"+s+"["+m+"]; "+D+" = "+D+".concat("+x+"["+m+"]); } } "):a+=" var "+E+" =   "+m+" in "+k+" ? "+k+"["+m+"] () : validate.schema"+s+"["+m+"]; var "+D+" = "+x+"["+m+"]; ",a+="  var err = { keyword: '"+t+"' , dataPath: "+p+" , schemaPath: "+C+" + '/"+t+"' , params: { errors: "+D+" } , message: "+E+" ",e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),a+=" };  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h.options.singleError||(a+=" } } ")}if($){a+=" "+f+" = 0; "+x+" = "+JSON.stringify(A)+"; var "+D+", "+_+"; var "+S+" = "+JSON.stringify(h.KEYWORD_PROPERTY_PARAMS)+";  var "+k+" = { ";z=!1;var q=Object.keys(A);if(q)for(var H=-1,U=q.length-1;H<U;){var B=o[I=q[H+=1]];z&&(a+=","),a+=e.util.toQuotedString(I)+": { ",z=!0;var Q=!1,J=Object.keys(B);if(J)for(var X=-1,K=J.length-1;X<K;)M=J[X+=1],c.test(B[M])&&(Q&&(a+=","),a+=e.util.toQuotedString(M)+": "+pe(B[M])+" ",Q=!0);a+=" } "}a+=" }; while ("+f+" < errors) { "+g+" = vErrors["+f+"]; if (  "+g+".keyword != '"+t+"' ",h.options.keepErrors&&(a+=" && !"+g+".emUsed "),a+=" && "+g+".keyword in "+x+" && "+g+".dataPath == "+p+" && "+g+".schemaPath.indexOf("+C+") == 0 && /^\\/[^\\/]*$/.test("+g+".schemaPath.slice("+e.errSchemaPath.length+"))) { "+_+" = "+S+"["+g+".keyword]; "+D+" = "+x+"["+g+".keyword]["+g+".params["+_+"]]; if ("+D+") { "+D+".push("+g+");  ",h.options.keepErrors?a+=" "+g+".emUsed = true; ":a+=" vErrors.splice("+f+", 1); errors--; ",a+=" } else { "+f+"++; } } else { "+f+"++; } } for (var "+m+" in "+x+") { for (var "+v+" in "+x+"["+m+"]) { "+D+" = "+x+"["+m+"]["+v+"]; if ("+D+".length) { var "+E+" =   "+m+" in "+k+" && "+v+" in "+k+"["+m+"] ? "+k+"["+m+"]["+v+"] () : validate.schema"+s+"["+m+"]["+v+"];  var err = { keyword: '"+t+"' , dataPath: "+p+" , schemaPath: "+C+" + '/"+t+"' , params: { errors: "+D+" } , message: "+E+" ",e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),a+=" };  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } } "}if(T||R){if(a+=" var "+P+" = Array.isArray("+l+"); if ",T&&R){a+=" (typeof "+l+" == 'object') { ";var W="["+b+"]";a+=" "+f+" = 0; if ("+P+") { var "+b+" = 'items'; "+x+" = "+JSON.stringify(F.items)+";    ";var Z=Object.keys(F.items);a+=" var "+k+" = { ";z=!1;var G=Z;if(G)for(var ee=-1,te=G.length-1;ee<te;)I=G[ee+=1],c.test(o.items[I])&&(z&&(a+=","),a+=e.util.toQuotedString(I)+": "+pe(o.items[I])+" ",z=!0);a+=" }; } else { var "+b+" = 'properties'; "+x+" =  "+JSON.stringify(F.properties)+";    ";Z=Object.keys(F.properties);a+=" var "+k+" = { ";z=!1;var re=Z;if(re)for(var ae=-1,ne=re.length-1;ae<ne;)I=re[ae+=1],c.test(o.properties[I])&&(z&&(a+=","),a+=e.util.toQuotedString(I)+": "+pe(o.properties[I])+" ",z=!0);a+=" }; } "}else if(T){a+=" (typeof "+l+" == 'object' && !"+P+") { ";W=".properties";a+=" "+f+" = 0; "+x+" = "+JSON.stringify(F.properties)+";  ";Z=Object.keys(F.properties);a+=" var "+k+" = { ";z=!1;var ie=Z;if(ie)for(var oe=-1,se=ie.length-1;oe<se;)I=ie[oe+=1],c.test(o.properties[I])&&(z&&(a+=","),a+=e.util.toQuotedString(I)+": "+pe(o.properties[I])+" ",z=!0);a+=" }; "}else{a+=" ("+P+") { ";W=".items";a+=" "+f+" = 0; "+x+" = "+JSON.stringify(F.items)+";  ";Z=Object.keys(F.items);a+=" var "+k+" = { ";z=!1;var le=Z;if(le)for(var ce=-1,ue=le.length-1;ce<ue;)I=le[ce+=1],c.test(o.items[I])&&(z&&(a+=","),a+=e.util.toQuotedString(I)+": "+pe(o.items[I])+" ",z=!0);a+=" }; "}a+=" var "+y+", "+w+"; while ("+f+" < errors) { "+g+" = vErrors["+f+"]; if (  "+g+".keyword != '"+t+"' ",h.options.keepErrors&&(a+=" && !"+g+".emUsed "),a+=" && "+g+".dataPath.indexOf("+p+") == 0 && ("+w+" = "+g+".dataPath.slice("+p+".length).match(/^\\/([^\\/]*)(?:\\/|$)/), "+y+" = "+w+" && "+w+"[1].replace(/~1/g, '/').replace(/~0/g, '~') ) !== undefined && "+y+" in "+x+") { "+x+"["+y+"].push("+g+");  ",h.options.keepErrors?a+=" "+g+".emUsed = true; ":a+=" vErrors.splice("+f+", 1); errors--; ",a+=" } else { "+f+"++; } } for (var "+m+" in "+x+") { if ("+x+"["+m+"].length) { var err = { keyword: '"+t+"' , dataPath: "+p+" + '/' + "+m+".replace(/~/g, '~0').replace(/\\//g, '~1') , schemaPath: "+C+" + '/"+t+"' , params: { errors: "+x+"["+m+"] } , message: "+m+" in "+k+" ? "+k+"["+m+"] () : validate.schema"+s+W+"["+m+"] ",e.opts.verbose&&(a+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),a+=" };  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } }  }  "}}var de="string"==typeof o?o:o._;de&&(a+=" "+f+" = 0; "+x+" = []; while ("+f+" < errors) { "+g+" = vErrors["+f+"]; if (  "+g+".keyword != '"+t+"' ",h.options.keepErrors&&(a+=" && !"+g+".emUsed "),a+=" && ("+g+".dataPath == "+p+" || ("+g+".dataPath.indexOf("+p+") == 0 && "+g+".dataPath["+p+".length] == '/')) && "+g+".schemaPath.indexOf("+C+") == 0 && "+g+".schemaPath["+e.errSchemaPath.length+"] == '/') { "+x+".push("+g+");  ",h.options.keepErrors?a+=" "+g+".emUsed = true; ":a+=" vErrors.splice("+f+", 1); errors--; ",a+=" } else { "+f+"++; } } if ("+x+".length) { var err = { keyword: '"+t+"' , dataPath: "+p+" , schemaPath: "+C+" + '/"+t+"' , params: { errors: "+x+" } , message: "+he(de)+" ",e.opts.verbose&&(a+=" , schema: "+e.util.toQuotedString(de)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),a+=" };  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "),a+=" }"}function he(t){return t=e.util.escapeQuotes(t),c.test(t)?("'"+t.replace(u,function(t,r){return"' + JSON.stringify("+e.util.getData(r,i,e.dataPathArr)+") + '"})+"'").replace(d,""):"'"+t+"'"}function pe(e){return"function() { return "+he(e)+"; }"}return a},hr={$data:!0,removeAdditional:!0,useDefaults:!0,coerceTypes:!0,allErrors:!0,jsonPointers:!0,format:"fast",formats:{phone:/^1[3|4|5|6|7|8|9]\d{9}$/,mobile:/^1[3|4|5|6|7|8|9]\d{9}$/,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i}},pr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},hr,e),r=new Gt(t);return function(e,t){if(!e._opts.allErrors)throw new Error("ajv-errors: Ajv option allErrors must be true");e._opts.jsonPointers||(console.warn("ajv-errors: Ajv option jsonPointers changed to true"),e._opts.jsonPointers=!0),e.addKeyword("errorMessage",{inline:dr,statements:!0,valid:!0,errors:"full",config:{KEYWORD_PROPERTY_PARAMS:{required:"missingProperty",dependencies:"property"},options:t||{}},metaSchema:{type:["string","object"],properties:{properties:{$ref:"#/definitions/stringMap"},items:{$ref:"#/definitions/stringList"},required:{$ref:"#/definitions/stringOrMap"},dependencies:{$ref:"#/definitions/stringOrMap"}},additionalProperties:{type:"string"},definitions:{stringMap:{type:["object"],additionalProperties:{type:"string"}},stringOrMap:{type:["string","object"],additionalProperties:{type:"string"}},stringList:{type:["array"],items:{type:"string"}}}}})}(r),r},fr=require("lodash"),mr=/(\[\d+\])/g,vr=/(\.)/g;function gr(e){return(e=(e=e.replace(vr,".properties$1")).replace(mr,".items$1")).substr(1)}var yr=new J,br="silentList",wr=function(e,t){var r={};Object.keys(t).forEach(function(e){var a=t[e];r[e]=a.message?{status:2,message:t[e].message}:{status:1}}),e.messages=Object.assign({},e.messages,r)},Pr=function(e,t){e.validator||(e.validator=e.ajv.compile(e.schema));var r=e.validator(e.model),a=void 0;if(t=t?t.join("."):null,!r){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(e.length)for(var r=0;r<e.length;r++){var a=e[r],n=void 0,i=void 0,o=a.dataPath;if("required"===a.keyword){o+="."+a.params.missingProperty;var s=fr.get(t,gr(o));i=s?s.title:""}if("errorMessage"===a.keyword&&"required"===a.params.errors[0].keyword){o+="."+a.params.errors[0].params.missingProperty;var l=fr.get(t,gr(o));i=l?l.title:""}switch(a.path=o.substr(1).replace(/\//g,"."),a.keyword){case"$ref":n="无法找到引用"+a.params.ref;break;case"additionalItems":n="",n+="不允许超过"+a.params.limit+"个元素";break;case"additionalProperties":n="不允许有额外的属性";break;case"anyOf":n="数据应为 anyOf 所指定的其中一个";break;case"const":n="应当等于常量";break;case"contains":n="应当包含一个有效项";break;case"custom":n='应当通过 "'+a.keyword+' 关键词校验"';break;case"dependencies":n="",a.params.depsCount,n+="应当拥有属性"+a.params.property+"的依赖属性"+a.params.deps;break;case"enum":n="应当是预设定的枚举值之一";break;case"exclusiveMaximum":case"exclusiveMinimum":n="",n+="应当为 "+a.params.comparison+" "+a.params.limit;break;case"false schema":n="布尔模式出错";break;case"format":n='应当匹配格式 "'+a.params.format+'"';break;case"formatExclusiveMaximum":n="formatExclusiveMaximum 应当是布尔值";break;case"formatExclusiveMinimum":n="formatExclusiveMinimum 应当是布尔值";break;case"formatMaximum":case"formatMinimum":n="",n+="应当是 "+a.params.comparison+" "+a.params.limit;break;case"if":n='应当匹配模式 "'+a.params.failingKeyword+'" ';break;case"maximum":n="",n+="应当为 "+a.params.comparison+" "+a.params.limit;break;case"maxItems":n="",n+="不应多于 "+a.params.limit+" 个项";break;case"maxLength":n="",n+="不应多于 "+a.params.limit+" 个字符";break;case"maxProperties":n="",n+="不应有多于 "+a.params.limit+" 个属性";break;case"minimum":n="",n+="应当为 "+a.params.comparison+" "+a.params.limit;break;case"minItems":n="",n+="不应少于 "+a.params.limit+" 个项";break;case"minLength":n="",n+="不应少于 "+a.params.limit+" 个字符";break;case"minProperties":n="",n+="不应有少于 "+a.params.limit+" 个属性";break;case"multipleOf":n="应当是 "+a.params.multipleOf+" 的整数倍";break;case"not":n='不应当匹配 "not" schema';break;case"oneOf":n='只能匹配一个 "oneOf" 中的 schema';break;case"pattern":n='应当匹配模式 "'+a.params.pattern+'"';break;case"patternRequired":n="应当有属性匹配模式 "+a.params.missingPattern;break;case"propertyNames":n="属性名 '"+a.params.propertyName+"' 无效";break;case"required":n=(i||a.params.missingProperty)+"不能为空";break;case"switch":n="由于 "+a.params.caseIndex+' 失败，未通过 "switch" 校验, ';break;case"type":n="应当是 "+a.params.type+" 类型";break;case"uniqueItems":n="不应当含有重复项 (第 "+a.params.j+" 项与第 "+a.params.i+" 项是重复的)";break;default:continue}a.message=n}}(e.validator.errors,e.schema);var n=function(e){var t={};return e.forEach(function(e){t[e.path]=e}),t}(e.validator.errors);t?n[t]&&((a={})[t]=n[t]):a=n,a&&wr(e,a)}!a&&t&&((a={})[t]=!0,wr(e,a)),e.model=Object.assign({},e.model),e.valid=r};var xr=Object.freeze({init:function(e,t){var r=t.schema,n=t.definition,i=t.model,o=void 0===i?{}:i;if("array"===r.type){var s={title:"列表",type:"object",properties:{},required:[br]};if(s.properties[br]=Object.assign({},r),r=s,!a.isEmpty(o)){var l={};l[br]=o,o=E(!0,{},l)}if(!a.isEmpty(n)){var c=[{title:"",type:"array",key:br,items:[]}];c[0].items=function e(t){a.forEach(t,function(t,r){t.key=br+t.key,t.items&&e(t.items)})}(n),n=c}e.isRootArray=!0}e.definition=yr.parse(r,n),e.schema=r;var u=yr.getDefaultModal(r);e.model=E(!0,{},u,o),e.ajv=new pr},setMessages:wr,validate:Pr,setValue:function(e,t){var r=t.path,n=t.value;if(!r||void 0===n)throw new Error("path and value is required!");var i=r[r.length-1];if("number"==typeof i){r.pop();var o=a.get(e.model,r);i>=o.length?o.push(n):o.splice(i,1,n)}else{var s=Object.assign({},e.model);a.set(s,r,n),e.model=Object.assign({},s)}Pr(e,r)},removeValue:function(e,t){var r=t[t.length-1];if("number"==typeof r)t.pop(),a.get(e.model,t).splice(r,1);else{var n=Object.assign({},e.model);a.unset(n,t),e.model=Object.assign({},n)}Pr(e,t)},exchanceItem:function(e,t){var r=t.path,n=t.newIndex,i=t.oldIndex;if(n>i){var o=n;n=i,i=o}var s=a.get(e.model,r),l=s.splice(i,1);s.splice(n,0,l[0])},setOptions:function(e,t){var r=t.key,n=t.options,i=a.cloneDeep(e.definition);((function e(t,r){var a=void 0;r=r.replace(/(\[\s?\])/g,"$index");for(var n=0,i=t.length;n<i;n++)if((a=t[n]).key){if(a.key.join(".")===r)return a;if(a.items)return e(a.items,r)}})(i,r)).options=n,e.definition=i}}),Er=Object.freeze({getSchema:function(e){return function(t){return function(e,t){if(!e)throw new Error("schema is required!");if(!t)return e;var r=[],n=t.length;return t.forEach(function(e,a){"$index"===e?r.push("items"):r.push(e),a!==n-1&&"$index"!==t[a+1]&&r.push("properties")}),r.splice(0,0,"properties"),a.get(e,r)}(e.schema,t)}}}),Dr={state:{schema:{},definition:[],model:{},theme:"bootstrap",valid:!0,messages:{},ajv:null,validator:null,isRootArray:!1},mutations:o({},xr),getters:o({},Er)};function _r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_r.installed||(_r.installed=!0,Cr.options=t,e.component("vue-form",L))}!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===r&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}(".form-horizontal {\n  padding: 20px 20px 0;\n}\n.form-horizontal .fieldset {\n  padding: 20px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n}\n.form-horizontal .list-group .list-group-item {\n  position: relative;\n  padding: 10px 30px;\n}\n.form-horizontal .list-group .list-group-item > .glyphicon-remove,\n.form-horizontal .list-group .list-group-item > .glyphicon-chevron-up,\n.form-horizontal .list-group .list-group-item > .glyphicon-chevron-down {\n  position: absolute;\n  right: 10px;\n  width: 16px;\n  cursor: pointer;\n}\n.form-horizontal .list-group .list-group-item > .glyphicon-remove {\n  top: 10px;\n}\n.form-horizontal .list-group .list-group-item > .glyphicon-chevron-up {\n  top: 30px;\n  right: 9px;\n}\n.form-horizontal .list-group .list-group-item > .glyphicon-chevron-down {\n  top: 50px;\n}\n.form-horizontal .list-group .form-group {\n  margin-bottom: 0;\n}\n.form-horizontal .tab-pane {\n  padding: 20px 0;\n}\n.form-group > label {\n  display: block;\n}\n.form-group .required {\n  display: inline-block;\n  color: #a94442;\n}\n.form-group .form-tips {\n  margin-top: 5px;\n  color: #999;\n}\n.form-group.has-error .form-tips {\n  color: #a94442;\n}\n");var Sr=L,kr=Dr,Cr={install:_r,get enabled(){return state.enabled},set enabled(e){state.enabled=e}},Or=null;return"undefined"!=typeof window?Or=window.Vue:"undefined"!=typeof global&&(Or=global.Vue),Or&&Or.use(Cr),e.install=_r,e.VueJSONSchemaForm=Sr,e.store=kr,e.default=Cr,e}({},vuex,Vue,_);
